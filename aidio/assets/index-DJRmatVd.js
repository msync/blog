(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&f(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();const Gn=globalThis,Lr=Gn.ShadowRoot&&(Gn.ShadyCSS===void 0||Gn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Kr=Symbol(),Ei=new WeakMap;let Wi=class{constructor(o,i,f){if(this._$cssResult$=!0,f!==Kr)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=o,this.t=i}get styleSheet(){let o=this.o;const i=this.t;if(Lr&&o===void 0){const f=i!==void 0&&i.length===1;f&&(o=Ei.get(i)),o===void 0&&((this.o=o=new CSSStyleSheet).replaceSync(this.cssText),f&&Ei.set(i,o))}return o}toString(){return this.cssText}};const Da=y=>new Wi(typeof y=="string"?y:y+"",void 0,Kr),rr=(y,...o)=>{const i=y.length===1?y[0]:o.reduce(((f,c,u)=>f+(h=>{if(h._$cssResult$===!0)return h.cssText;if(typeof h=="number")return h;throw Error("Value passed to 'css' function must be a 'css' function result: "+h+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(c)+y[u+1]),y[0]);return new Wi(i,y,Kr)},Ba=(y,o)=>{if(Lr)y.adoptedStyleSheets=o.map((i=>i instanceof CSSStyleSheet?i:i.styleSheet));else for(const i of o){const f=document.createElement("style"),c=Gn.litNonce;c!==void 0&&f.setAttribute("nonce",c),f.textContent=i.cssText,y.appendChild(f)}},Oi=Lr?y=>y:y=>y instanceof CSSStyleSheet?(o=>{let i="";for(const f of o.cssRules)i+=f.cssText;return Da(i)})(y):y;const{is:ja,defineProperty:Ma,getOwnPropertyDescriptor:Fa,getOwnPropertyNames:Na,getOwnPropertySymbols:Ua,getPrototypeOf:La}=Object,ir=globalThis,Ri=ir.trustedTypes,Ka=Ri?Ri.emptyScript:"",qa=ir.reactiveElementPolyfillSupport,yn=(y,o)=>y,Qn={toAttribute(y,o){switch(o){case Boolean:y=y?Ka:null;break;case Object:case Array:y=y==null?y:JSON.stringify(y)}return y},fromAttribute(y,o){let i=y;switch(o){case Boolean:i=y!==null;break;case Number:i=y===null?null:Number(y);break;case Object:case Array:try{i=JSON.parse(y)}catch{i=null}}return i}},qr=(y,o)=>!ja(y,o),Pi={attribute:!0,type:String,converter:Qn,reflect:!1,useDefault:!1,hasChanged:qr};Symbol.metadata??=Symbol("metadata"),ir.litPropertyMetadata??=new WeakMap;let an=class extends HTMLElement{static addInitializer(o){this._$Ei(),(this.l??=[]).push(o)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(o,i=Pi){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(o)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(o,i),!i.noAccessor){const f=Symbol(),c=this.getPropertyDescriptor(o,f,i);c!==void 0&&Ma(this.prototype,o,c)}}static getPropertyDescriptor(o,i,f){const{get:c,set:u}=Fa(this.prototype,o)??{get(){return this[i]},set(h){this[i]=h}};return{get:c,set(h){const l=c?.call(this);u?.call(this,h),this.requestUpdate(o,l,f)},configurable:!0,enumerable:!0}}static getPropertyOptions(o){return this.elementProperties.get(o)??Pi}static _$Ei(){if(this.hasOwnProperty(yn("elementProperties")))return;const o=La(this);o.finalize(),o.l!==void 0&&(this.l=[...o.l]),this.elementProperties=new Map(o.elementProperties)}static finalize(){if(this.hasOwnProperty(yn("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(yn("properties"))){const i=this.properties,f=[...Na(i),...Ua(i)];for(const c of f)this.createProperty(c,i[c])}const o=this[Symbol.metadata];if(o!==null){const i=litPropertyMetadata.get(o);if(i!==void 0)for(const[f,c]of i)this.elementProperties.set(f,c)}this._$Eh=new Map;for(const[i,f]of this.elementProperties){const c=this._$Eu(i,f);c!==void 0&&this._$Eh.set(c,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(o){const i=[];if(Array.isArray(o)){const f=new Set(o.flat(1/0).reverse());for(const c of f)i.unshift(Oi(c))}else o!==void 0&&i.push(Oi(o));return i}static _$Eu(o,i){const f=i.attribute;return f===!1?void 0:typeof f=="string"?f:typeof o=="string"?o.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((o=>this.enableUpdating=o)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((o=>o(this)))}addController(o){(this._$EO??=new Set).add(o),this.renderRoot!==void 0&&this.isConnected&&o.hostConnected?.()}removeController(o){this._$EO?.delete(o)}_$E_(){const o=new Map,i=this.constructor.elementProperties;for(const f of i.keys())this.hasOwnProperty(f)&&(o.set(f,this[f]),delete this[f]);o.size>0&&(this._$Ep=o)}createRenderRoot(){const o=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Ba(o,this.constructor.elementStyles),o}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((o=>o.hostConnected?.()))}enableUpdating(o){}disconnectedCallback(){this._$EO?.forEach((o=>o.hostDisconnected?.()))}attributeChangedCallback(o,i,f){this._$AK(o,f)}_$ET(o,i){const f=this.constructor.elementProperties.get(o),c=this.constructor._$Eu(o,f);if(c!==void 0&&f.reflect===!0){const u=(f.converter?.toAttribute!==void 0?f.converter:Qn).toAttribute(i,f.type);this._$Em=o,u==null?this.removeAttribute(c):this.setAttribute(c,u),this._$Em=null}}_$AK(o,i){const f=this.constructor,c=f._$Eh.get(o);if(c!==void 0&&this._$Em!==c){const u=f.getPropertyOptions(c),h=typeof u.converter=="function"?{fromAttribute:u.converter}:u.converter?.fromAttribute!==void 0?u.converter:Qn;this._$Em=c;const l=h.fromAttribute(i,u.type);this[c]=l??this._$Ej?.get(c)??l,this._$Em=null}}requestUpdate(o,i,f){if(o!==void 0){const c=this.constructor,u=this[o];if(f??=c.getPropertyOptions(o),!((f.hasChanged??qr)(u,i)||f.useDefault&&f.reflect&&u===this._$Ej?.get(o)&&!this.hasAttribute(c._$Eu(o,f))))return;this.C(o,i,f)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(o,i,{useDefault:f,reflect:c,wrapped:u},h){f&&!(this._$Ej??=new Map).has(o)&&(this._$Ej.set(o,h??i??this[o]),u!==!0||h!==void 0)||(this._$AL.has(o)||(this.hasUpdated||f||(i=void 0),this._$AL.set(o,i)),c===!0&&this._$Em!==o&&(this._$Eq??=new Set).add(o))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const o=this.scheduleUpdate();return o!=null&&await o,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[c,u]of this._$Ep)this[c]=u;this._$Ep=void 0}const f=this.constructor.elementProperties;if(f.size>0)for(const[c,u]of f){const{wrapped:h}=u,l=this[c];h!==!0||this._$AL.has(c)||l===void 0||this.C(c,void 0,u,l)}}let o=!1;const i=this._$AL;try{o=this.shouldUpdate(i),o?(this.willUpdate(i),this._$EO?.forEach((f=>f.hostUpdate?.())),this.update(i)):this._$EM()}catch(f){throw o=!1,this._$EM(),f}o&&this._$AE(i)}willUpdate(o){}_$AE(o){this._$EO?.forEach((i=>i.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(o)),this.updated(o)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(o){return!0}update(o){this._$Eq&&=this._$Eq.forEach((i=>this._$ET(i,this[i]))),this._$EM()}updated(o){}firstUpdated(o){}};an.elementStyles=[],an.shadowRootOptions={mode:"open"},an[yn("elementProperties")]=new Map,an[yn("finalized")]=new Map,qa?.({ReactiveElement:an}),(ir.reactiveElementVersions??=[]).push("2.1.1");const Wr=globalThis,tr=Wr.trustedTypes,Ti=tr?tr.createPolicy("lit-html",{createHTML:y=>y}):void 0,Hi="$lit$",De=`lit$${Math.random().toFixed(9).slice(2)}$`,Zi="?"+De,Wa=`<${Zi}>`,He=document,_n=()=>He.createComment(""),xn=y=>y===null||typeof y!="object"&&typeof y!="function",Hr=Array.isArray,Ha=y=>Hr(y)||typeof y?.[Symbol.iterator]=="function",jr=`[ 	
\f\r]`,vn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,$i=/-->/g,Ii=/>/g,qe=RegExp(`>|${jr}(?:([^\\s"'>=/]+)(${jr}*=${jr}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),zi=/'/g,Di=/"/g,Vi=/^(?:script|style|textarea|title)$/i,Za=y=>(o,...i)=>({_$litType$:y,strings:o,values:i}),ne=Za(1),Ze=Symbol.for("lit-noChange"),Xt=Symbol.for("lit-nothing"),Bi=new WeakMap,We=He.createTreeWalker(He,129);function Yi(y,o){if(!Hr(y)||!y.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ti!==void 0?Ti.createHTML(o):o}const Va=(y,o)=>{const i=y.length-1,f=[];let c,u=o===2?"<svg>":o===3?"<math>":"",h=vn;for(let l=0;l<i;l++){const m=y[l];let k,C,x=-1,A=0;for(;A<m.length&&(h.lastIndex=A,C=h.exec(m),C!==null);)A=h.lastIndex,h===vn?C[1]==="!--"?h=$i:C[1]!==void 0?h=Ii:C[2]!==void 0?(Vi.test(C[2])&&(c=RegExp("</"+C[2],"g")),h=qe):C[3]!==void 0&&(h=qe):h===qe?C[0]===">"?(h=c??vn,x=-1):C[1]===void 0?x=-2:(x=h.lastIndex-C[2].length,k=C[1],h=C[3]===void 0?qe:C[3]==='"'?Di:zi):h===Di||h===zi?h=qe:h===$i||h===Ii?h=vn:(h=qe,c=void 0);const g=h===qe&&y[l+1].startsWith("/>")?" ":"";u+=h===vn?m+Wa:x>=0?(f.push(k),m.slice(0,x)+Hi+m.slice(x)+De+g):m+De+(x===-2?l:g)}return[Yi(y,u+(y[i]||"<?>")+(o===2?"</svg>":o===3?"</math>":"")),f]};class kn{constructor({strings:o,_$litType$:i},f){let c;this.parts=[];let u=0,h=0;const l=o.length-1,m=this.parts,[k,C]=Va(o,i);if(this.el=kn.createElement(k,f),We.currentNode=this.el.content,i===2||i===3){const x=this.el.content.firstChild;x.replaceWith(...x.childNodes)}for(;(c=We.nextNode())!==null&&m.length<l;){if(c.nodeType===1){if(c.hasAttributes())for(const x of c.getAttributeNames())if(x.endsWith(Hi)){const A=C[h++],g=c.getAttribute(x).split(De),E=/([.?@])?(.*)/.exec(A);m.push({type:1,index:u,name:E[2],strings:g,ctor:E[1]==="."?Ga:E[1]==="?"?Xa:E[1]==="@"?Ja:ar}),c.removeAttribute(x)}else x.startsWith(De)&&(m.push({type:6,index:u}),c.removeAttribute(x));if(Vi.test(c.tagName)){const x=c.textContent.split(De),A=x.length-1;if(A>0){c.textContent=tr?tr.emptyScript:"";for(let g=0;g<A;g++)c.append(x[g],_n()),We.nextNode(),m.push({type:2,index:++u});c.append(x[A],_n())}}}else if(c.nodeType===8)if(c.data===Zi)m.push({type:2,index:u});else{let x=-1;for(;(x=c.data.indexOf(De,x+1))!==-1;)m.push({type:7,index:u}),x+=De.length-1}u++}}static createElement(o,i){const f=He.createElement("template");return f.innerHTML=o,f}}function on(y,o,i=y,f){if(o===Ze)return o;let c=f!==void 0?i._$Co?.[f]:i._$Cl;const u=xn(o)?void 0:o._$litDirective$;return c?.constructor!==u&&(c?._$AO?.(!1),u===void 0?c=void 0:(c=new u(y),c._$AT(y,i,f)),f!==void 0?(i._$Co??=[])[f]=c:i._$Cl=c),c!==void 0&&(o=on(y,c._$AS(y,o.values),c,f)),o}class Ya{constructor(o,i){this._$AV=[],this._$AN=void 0,this._$AD=o,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(o){const{el:{content:i},parts:f}=this._$AD,c=(o?.creationScope??He).importNode(i,!0);We.currentNode=c;let u=We.nextNode(),h=0,l=0,m=f[0];for(;m!==void 0;){if(h===m.index){let k;m.type===2?k=new Cn(u,u.nextSibling,this,o):m.type===1?k=new m.ctor(u,m.name,m.strings,this,o):m.type===6&&(k=new Qa(u,this,o)),this._$AV.push(k),m=f[++l]}h!==m?.index&&(u=We.nextNode(),h++)}return We.currentNode=He,c}p(o){let i=0;for(const f of this._$AV)f!==void 0&&(f.strings!==void 0?(f._$AI(o,f,i),i+=f.strings.length-2):f._$AI(o[i])),i++}}class Cn{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(o,i,f,c){this.type=2,this._$AH=Xt,this._$AN=void 0,this._$AA=o,this._$AB=i,this._$AM=f,this.options=c,this._$Cv=c?.isConnected??!0}get parentNode(){let o=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&o?.nodeType===11&&(o=i.parentNode),o}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(o,i=this){o=on(this,o,i),xn(o)?o===Xt||o==null||o===""?(this._$AH!==Xt&&this._$AR(),this._$AH=Xt):o!==this._$AH&&o!==Ze&&this._(o):o._$litType$!==void 0?this.$(o):o.nodeType!==void 0?this.T(o):Ha(o)?this.k(o):this._(o)}O(o){return this._$AA.parentNode.insertBefore(o,this._$AB)}T(o){this._$AH!==o&&(this._$AR(),this._$AH=this.O(o))}_(o){this._$AH!==Xt&&xn(this._$AH)?this._$AA.nextSibling.data=o:this.T(He.createTextNode(o)),this._$AH=o}$(o){const{values:i,_$litType$:f}=o,c=typeof f=="number"?this._$AC(o):(f.el===void 0&&(f.el=kn.createElement(Yi(f.h,f.h[0]),this.options)),f);if(this._$AH?._$AD===c)this._$AH.p(i);else{const u=new Ya(c,this),h=u.u(this.options);u.p(i),this.T(h),this._$AH=u}}_$AC(o){let i=Bi.get(o.strings);return i===void 0&&Bi.set(o.strings,i=new kn(o)),i}k(o){Hr(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let f,c=0;for(const u of o)c===i.length?i.push(f=new Cn(this.O(_n()),this.O(_n()),this,this.options)):f=i[c],f._$AI(u),c++;c<i.length&&(this._$AR(f&&f._$AB.nextSibling,c),i.length=c)}_$AR(o=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);o!==this._$AB;){const f=o.nextSibling;o.remove(),o=f}}setConnected(o){this._$AM===void 0&&(this._$Cv=o,this._$AP?.(o))}}class ar{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(o,i,f,c,u){this.type=1,this._$AH=Xt,this._$AN=void 0,this.element=o,this.name=i,this._$AM=c,this.options=u,f.length>2||f[0]!==""||f[1]!==""?(this._$AH=Array(f.length-1).fill(new String),this.strings=f):this._$AH=Xt}_$AI(o,i=this,f,c){const u=this.strings;let h=!1;if(u===void 0)o=on(this,o,i,0),h=!xn(o)||o!==this._$AH&&o!==Ze,h&&(this._$AH=o);else{const l=o;let m,k;for(o=u[0],m=0;m<u.length-1;m++)k=on(this,l[f+m],i,m),k===Ze&&(k=this._$AH[m]),h||=!xn(k)||k!==this._$AH[m],k===Xt?o=Xt:o!==Xt&&(o+=(k??"")+u[m+1]),this._$AH[m]=k}h&&!c&&this.j(o)}j(o){o===Xt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,o??"")}}class Ga extends ar{constructor(){super(...arguments),this.type=3}j(o){this.element[this.name]=o===Xt?void 0:o}}class Xa extends ar{constructor(){super(...arguments),this.type=4}j(o){this.element.toggleAttribute(this.name,!!o&&o!==Xt)}}class Ja extends ar{constructor(o,i,f,c,u){super(o,i,f,c,u),this.type=5}_$AI(o,i=this){if((o=on(this,o,i,0)??Xt)===Ze)return;const f=this._$AH,c=o===Xt&&f!==Xt||o.capture!==f.capture||o.once!==f.once||o.passive!==f.passive,u=o!==Xt&&(f===Xt||c);c&&this.element.removeEventListener(this.name,this,f),u&&this.element.addEventListener(this.name,this,o),this._$AH=o}handleEvent(o){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,o):this._$AH.handleEvent(o)}}class Qa{constructor(o,i,f){this.element=o,this.type=6,this._$AN=void 0,this._$AM=i,this.options=f}get _$AU(){return this._$AM._$AU}_$AI(o){on(this,o)}}const to=Wr.litHtmlPolyfillSupport;to?.(kn,Cn),(Wr.litHtmlVersions??=[]).push("3.3.1");const eo=(y,o,i)=>{const f=i?.renderBefore??o;let c=f._$litPart$;if(c===void 0){const u=i?.renderBefore??null;f._$litPart$=c=new Cn(o.insertBefore(_n(),u),u,void 0,i??{})}return c._$AI(y),c};const Zr=globalThis;let Be=class extends an{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const o=super.createRenderRoot();return this.renderOptions.renderBefore??=o.firstChild,o}update(o){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(o),this._$Do=eo(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Ze}};Be._$litElement$=!0,Be.finalized=!0,Zr.litElementHydrateSupport?.({LitElement:Be});const no=Zr.litElementPolyfillSupport;no?.({LitElement:Be});(Zr.litElementVersions??=[]).push("4.2.1");const or=y=>(o,i)=>{i!==void 0?i.addInitializer((()=>{customElements.define(y,o)})):customElements.define(y,o)};const ro={attribute:!0,type:String,converter:Qn,reflect:!1,hasChanged:qr},io=(y=ro,o,i)=>{const{kind:f,metadata:c}=i;let u=globalThis.litPropertyMetadata.get(c);if(u===void 0&&globalThis.litPropertyMetadata.set(c,u=new Map),f==="setter"&&((y=Object.create(y)).wrapped=!0),u.set(i.name,y),f==="accessor"){const{name:h}=i;return{set(l){const m=o.get.call(this);o.set.call(this,l),this.requestUpdate(h,m,y)},init(l){return l!==void 0&&this.C(h,void 0,y,l),l}}}if(f==="setter"){const{name:h}=i;return function(l){const m=this[h];o.call(this,l),this.requestUpdate(h,m,y)}}throw Error("Unsupported decorator location: "+f)};function sr(y){return(o,i)=>typeof i=="object"?io(y,o,i):((f,c,u)=>{const h=c.hasOwnProperty(u);return c.constructor.createProperty(u,f),h?Object.getOwnPropertyDescriptor(c,u):void 0})(y,o,i)}function le(y){return sr({...y,state:!0,attribute:!1})}const ao=(y,o,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&typeof o!="object"&&Object.defineProperty(y,o,i),i);function oo(y,o){return(i,f,c)=>{const u=h=>h.renderRoot?.querySelector(y)??null;return ao(i,f,{get(){return u(this)}})}}const so={CHILD:2},uo=y=>(...o)=>({_$litDirective$:y,values:o});class lo{constructor(o){}get _$AU(){return this._$AM._$AU}_$AT(o,i,f){this._$Ct=o,this._$AM=i,this._$Ci=f}_$AS(o,i){return this.update(o,i)}update(o,i){return this.render(...i)}}class Nr extends lo{constructor(o){if(super(o),this.it=Xt,o.type!==so.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(o){if(o===Xt||o==null)return this._t=void 0,this.it=o;if(o===Ze)return o;if(typeof o!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(o===this.it)return this._t;this.it=o;const i=[o];return i.raw=i,this._t={_$litType$:this.constructor.resultType,strings:i,values:[]}}}Nr.directiveName="unsafeHTML",Nr.resultType=1;const oe=uo(Nr);class co{constructor(){this.stream=null}async requestPermission(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("MediaDevices API not supported in this browser");try{return this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,sampleRate:48e3,channelCount:1}}),this.stream}catch(o){throw o instanceof Error?new Error(`Microphone access denied: ${o.message}`):new Error("Microphone access denied")}}getStream(){return this.stream}release(){this.stream&&(this.stream.getTracks().forEach(o=>o.stop()),this.stream=null)}isActive(){return this.stream!==null&&this.stream.active}}class ho{constructor(){this.mediaRecorder=null,this.chunks=[]}async initialize(o){if(!window.MediaRecorder)throw new Error("MediaRecorder API not supported in this browser");const i=this.getSupportedMimeType();if(!i)throw new Error("No supported audio MIME type found");this.mediaRecorder=new MediaRecorder(o,{mimeType:i,audioBitsPerSecond:128e3}),this.mediaRecorder.ondataavailable=f=>{f.data.size>0&&(this.chunks.push(f.data),this.onDataAvailableCallback?.(f.data))},this.mediaRecorder.onstop=()=>{this.onStateChangeCallback?.("inactive")},this.mediaRecorder.onstart=()=>{this.onStateChangeCallback?.("recording")},this.mediaRecorder.onpause=()=>{this.onStateChangeCallback?.("paused")},this.mediaRecorder.onresume=()=>{this.onStateChangeCallback?.("recording")}}getSupportedMimeType(){return["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/mp4"].find(i=>MediaRecorder.isTypeSupported(i))||null}start(o=0){if(!this.mediaRecorder)throw new Error("MediaRecorder not initialized");this.mediaRecorder.state!=="recording"&&(this.chunks=[],this.mediaRecorder.start(o))}async stop(){if(!this.mediaRecorder)throw new Error("MediaRecorder not initialized");return this.mediaRecorder.state==="inactive"?new Blob(this.chunks,{type:this.mediaRecorder.mimeType}):new Promise(o=>{this.mediaRecorder.onstop=()=>{const i=new Blob(this.chunks,{type:this.mediaRecorder.mimeType});this.onStateChangeCallback?.("inactive"),o(i)},this.mediaRecorder.stop()})}pause(){this.mediaRecorder?.state==="recording"&&this.mediaRecorder.pause()}resume(){this.mediaRecorder?.state==="paused"&&this.mediaRecorder.resume()}getState(){return this.mediaRecorder?.state||"inactive"}getMimeType(){return this.mediaRecorder?.mimeType||""}onDataAvailable(o){this.onDataAvailableCallback=o}onStateChange(o){this.onStateChangeCallback=o}release(){this.mediaRecorder?.state==="recording"&&this.mediaRecorder.stop(),this.mediaRecorder=null,this.chunks=[]}}const fo="modulepreload",po=function(y){return"/aidio/"+y},ji={},mo=function(o,i,f){let c=Promise.resolve();if(i&&i.length>0){let k=function(C){return Promise.all(C.map(x=>Promise.resolve(x).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};var h=k;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),m=l?.nonce||l?.getAttribute("nonce");c=k(i.map(C=>{if(C=po(C),C in ji)return;ji[C]=!0;const x=C.endsWith(".css"),A=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${A}`))return;const g=document.createElement("link");if(g.rel=x?"stylesheet":fo,x||(g.as="script"),g.crossOrigin="",g.href=C,m&&g.setAttribute("nonce",m),document.head.appendChild(g),x)return new Promise((E,v)=>{g.addEventListener("load",E),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${C}`)))})}))}function u(l){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=l,window.dispatchEvent(m),!m.defaultPrevented)throw l}return c.then(l=>{for(const m of l||[])m.status==="rejected"&&u(m.reason);return o().catch(u)})};var Se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gi(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var Xn={exports:{}},go=Xn.exports,Mi;function vo(){return Mi||(Mi=1,(function(y,o){(function(i,f){y.exports=f()})(go,function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(t,e)},f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function c(t,e,n){for(var r,a=0,d=e.length;a<d;a++)!r&&a in e||((r=r||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(r||Array.prototype.slice.call(e))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Se,h=Object.keys,l=Array.isArray;function m(t,e){return typeof e!="object"||h(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var k=Object.getPrototypeOf,C={}.hasOwnProperty;function x(t,e){return C.call(t,e)}function A(t,e){typeof e=="function"&&(e=e(k(t))),(typeof Reflect>"u"?h:Reflect.ownKeys)(e).forEach(function(n){E(t,n,e[n])})}var g=Object.defineProperty;function E(t,e,n,r){g(t,e,m(n&&x(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function v(t){return{from:function(e){return t.prototype=Object.create(e.prototype),E(t.prototype,"constructor",t),{extend:A.bind(null,t.prototype)}}}}var S=Object.getOwnPropertyDescriptor,w=[].slice;function P(t,e,n){return w.call(t,e,n)}function B(t,e){return e(t)}function W(t){if(!t)throw new Error("Assertion Failed")}function K(t){u.setImmediate?setImmediate(t):setTimeout(t,0)}function nt(t,e){if(typeof e=="string"&&x(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,a=e.length;r<a;++r){var d=nt(t,e[r]);n.push(d)}return n}var b=e.indexOf(".");if(b!==-1){var R=t[e.substr(0,b)];return R==null?void 0:nt(R,e.substr(b+1))}}function X(t,e,n){if(t&&e!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){W(typeof n!="string"&&"length"in n);for(var r=0,a=e.length;r<a;++r)X(t,e[r],n[r])}else{var d,b,R=e.indexOf(".");R!==-1?(d=e.substr(0,R),(b=e.substr(R+1))===""?n===void 0?l(t)&&!isNaN(parseInt(d))?t.splice(d,1):delete t[d]:t[d]=n:X(R=!(R=t[d])||!x(t,d)?t[d]={}:R,b,n)):n===void 0?l(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function lt(t){var e,n={};for(e in t)x(t,e)&&(n[e]=t[e]);return n}var tt=[].concat;function pt(t){return tt.apply([],t)}var At="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(pt([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return u[t]}),Rt=new Set(At.map(function(t){return u[t]})),$=null;function Q(t){return $=new WeakMap,t=(function e(n){if(!n||typeof n!="object")return n;var r=$.get(n);if(r)return r;if(l(n)){r=[],$.set(n,r);for(var a=0,d=n.length;a<d;++a)r.push(e(n[a]))}else if(Rt.has(n.constructor))r=n;else{var b,R=k(n);for(b in r=R===Object.prototype?{}:Object.create(R),$.set(n,r),n)x(n,b)&&(r[b]=e(n[b]))}return r})(t),$=null,t}var p={}.toString;function it(t){return p.call(t).slice(8,-1)}var Pt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ut=typeof Pt=="symbol"?function(t){var e;return t!=null&&(e=t[Pt])&&e.apply(t)}:function(){return null};function Tt(t,e){return e=t.indexOf(e),0<=e&&t.splice(e,1),0<=e}var st={};function Ot(t){var e,n,r,a;if(arguments.length===1){if(l(t))return t.slice();if(this===st&&typeof t=="string")return[t];if(a=ut(t)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)!="number")return[t];for(n=new Array(e);e--;)n[e]=t[e];return n}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var Y=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},dt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],me=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(dt),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Et(t,e){this.name=t,this.message=e}function xt(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function vt(t,e,n,r){this.failures=e,this.failedKeys=r,this.successCount=n,this.message=xt(t,e)}function Lt(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=xt(t,this.failures)}v(Et).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(vt).from(Et),v(Lt).from(Et);var Gt=me.reduce(function(t,e){return t[e]=e+"Error",t},{}),Mt=Et,mt=me.reduce(function(t,e){var n=e+"Error";function r(a,d){this.name=n,a?typeof a=="string"?(this.message="".concat(a).concat(d?`
 `+d:""),this.inner=d||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=V[e]||n,this.inner=null)}return v(r).from(Mt),t[e]=r,t},{});mt.Syntax=SyntaxError,mt.Type=TypeError,mt.Range=RangeError;var Zt=dt.reduce(function(t,e){return t[e+"Error"]=mt[e],t},{}),Kt=me.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=mt[e]),t},{});function Dt(){}function ee(t){return t}function s(t,e){return t==null||t===ee?e:function(n){return e(t(n))}}function et(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function G(t,e){return t===Dt?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var d=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?et(r,this.onsuccess):r),a&&(this.onerror=this.onerror?et(a,this.onerror):a),d!==void 0?d:n}}function O(t,e){return t===Dt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?et(n,this.onsuccess):n),r&&(this.onerror=this.onerror?et(r,this.onerror):r)}}function _(t,e){return t===Dt?e:function(n){var r=t.apply(this,arguments);m(n,r);var a=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,n=e.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?et(a,this.onsuccess):a),d&&(this.onerror=this.onerror?et(d,this.onerror):d),r===void 0?n===void 0?void 0:n:m(r,n)}}function N(t,e){return t===Dt?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function ot(t,e){return t===Dt?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,d=new Array(a);a--;)d[a]=arguments[a];return n.then(function(){return e.apply(r,d)})}return e.apply(this,arguments)}}Kt.ModifyError=vt,Kt.DexieError=Et,Kt.BulkError=Lt;var at=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function H(t){at=t}var ct={},kt=100,At=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,k(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,k(e),t]})(),dt=At[0],me=At[1],At=At[2],me=me&&me.then,Nt=dt&&dt.constructor,Bt=!!At,Jt=function(t,e){Ae.push([t,e]),se&&(queueMicrotask(ha),se=!1)},we=!0,se=!0,he=[],qt=[],Ce=ee,pe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Dt,pgp:!1,env:{},finalize:Dt},St=pe,Ae=[],_e=0,Ve=[];function _t(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=St;if(typeof t!="function"){if(t!==ct)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Oe(this,this._value))}this._state=null,this._value=null,++e.ref,(function n(r,a){try{a(function(d){if(r._state===null){if(d===r)throw new TypeError("A promise cannot be resolved with itself.");var b=r._lib&&Ge();d&&typeof d.then=="function"?n(r,function(R,I){d instanceof _t?d._then(R,I):d.then(R,I)}):(r._state=!0,r._value=d,Yr(r)),b&&Xe()}},Oe.bind(null,r))}catch(d){Oe(r,d)}})(this,t)}var Ye={get:function(){var t=St,e=Rn;function n(r,a){var d=this,b=!t.global&&(t!==St||e!==Rn),R=b&&!Pe(),I=new _t(function(z,F){ur(d,new Ee(Xr(r,t,b,R),Xr(a,t,b,R),z,F,t))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return n.prototype=ct,n},set:function(t){E(this,"then",t&&t.prototype===ct?Ye:{get:function(){return t},set:Ye.set})}};function Ee(t,e,n,r,a){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=a}function Oe(t,e){var n,r;qt.push(e),t._state===null&&(n=t._lib&&Ge(),e=Ce(e),t._state=!1,t._value=e,r=t,he.some(function(a){return a._value===r._value})||he.push(r),Yr(t),n&&Xe())}function Yr(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)ur(t,e[n]);var a=t._PSD;--a.ref||a.finalize(),_e===0&&(++_e,Jt(function(){--_e==0&&lr()},[]))}function ur(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++_e,Jt(ca,[n,t,e])}else t._listeners.push(e)}function ca(t,e,n){try{var r,a=e._value;!e._state&&qt.length&&(qt=[]),r=at&&e._consoleTask?e._consoleTask.run(function(){return t(a)}):t(a),e._state||qt.indexOf(a)!==-1||(function(d){for(var b=he.length;b;)if(he[--b]._value===d._value)return he.splice(b,1)})(e),n.resolve(r)}catch(d){n.reject(d)}finally{--_e==0&&lr(),--n.psd.ref||n.psd.finalize()}}function ha(){Me(pe,function(){Ge()&&Xe()})}function Ge(){var t=we;return se=we=!1,t}function Xe(){var t,e,n;do for(;0<Ae.length;)for(t=Ae,Ae=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(0<Ae.length);se=we=!0}function lr(){var t=he;he=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=Ve.slice(0),n=e.length;n;)e[--n]()}function An(t){return new _t(ct,!1,t)}function Ht(t,e){var n=St;return function(){var r=Ge(),a=St;try{return Te(n,!0),t.apply(this,arguments)}catch(d){e&&e(d)}finally{Te(a,!1),r&&Xe()}}}A(_t.prototype,{then:Ye,_then:function(t,e){ur(this,new Ee(null,null,t,e,St))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=t,n=arguments[1];return typeof e=="function"?this.then(null,function(r){return(r instanceof e?n:An)(r)}):this.then(null,function(r){return(r&&r.name===e?n:An)(r)})},finally:function(t){return this.then(function(e){return _t.resolve(t()).then(function(){return e})},function(e){return _t.resolve(t()).then(function(){return An(e)})})},timeout:function(t,e){var n=this;return t<1/0?new _t(function(r,a){var d=setTimeout(function(){return a(new mt.Timeout(e))},t);n.then(r,a).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&E(_t.prototype,Symbol.toStringTag,"Dexie.Promise"),pe.env=Gr(),A(_t,{all:function(){var t=Ot.apply(null,arguments).map(Pn);return new _t(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(a,d){return _t.resolve(a).then(function(b){t[d]=b,--r||e(t)},n)})})},resolve:function(t){return t instanceof _t?t:t&&typeof t.then=="function"?new _t(function(e,n){t.then(e,n)}):new _t(ct,!0,t)},reject:An,race:function(){var t=Ot.apply(null,arguments).map(Pn);return new _t(function(e,n){t.map(function(r){return _t.resolve(r).then(e,n)})})},PSD:{get:function(){return St},set:function(t){return St=t}},totalEchoes:{get:function(){return Rn}},newPSD:Re,usePSD:Me,scheduler:{get:function(){return Jt},set:function(t){Jt=t}},rejectionMapper:{get:function(){return Ce},set:function(t){Ce=t}},follow:function(t,e){return new _t(function(n,r){return Re(function(a,d){var b=St;b.unhandleds=[],b.onunhandled=d,b.finalize=et(function(){var R,I=this;R=function(){I.unhandleds.length===0?a():d(I.unhandleds[0])},Ve.push(function z(){R(),Ve.splice(Ve.indexOf(z),1)}),++_e,Jt(function(){--_e==0&&lr()},[])},b.finalize),t()},e,n,r)})}}),Nt&&(Nt.allSettled&&E(_t,"allSettled",function(){var t=Ot.apply(null,arguments).map(Pn);return new _t(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(a,d){return _t.resolve(a).then(function(b){return r[d]={status:"fulfilled",value:b}},function(b){return r[d]={status:"rejected",reason:b}}).then(function(){return--n||e(r)})})})}),Nt.any&&typeof AggregateError<"u"&&E(_t,"any",function(){var t=Ot.apply(null,arguments).map(Pn);return new _t(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,a=new Array(r);t.forEach(function(d,b){return _t.resolve(d).then(function(R){return e(R)},function(R){a[b]=R,--r||n(new AggregateError(a))})})})}),Nt.withResolvers&&(_t.withResolvers=Nt.withResolvers));var Qt={awaits:0,echoes:0,id:0},da=0,En=[],On=0,Rn=0,fa=0;function Re(t,e,n,r){var a=St,d=Object.create(a);return d.parent=a,d.ref=0,d.global=!1,d.id=++fa,pe.env,d.env=Bt?{Promise:_t,PromiseProp:{value:_t,configurable:!0,writable:!0},all:_t.all,race:_t.race,allSettled:_t.allSettled,any:_t.any,resolve:_t.resolve,reject:_t.reject}:{},e&&m(d,e),++a.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Me(d,t,n,r),d.ref===0&&d.finalize(),r}function Je(){return Qt.id||(Qt.id=++da),++Qt.awaits,Qt.echoes+=kt,Qt.id}function Pe(){return!!Qt.awaits&&(--Qt.awaits==0&&(Qt.id=0),Qt.echoes=Qt.awaits*kt,!0)}function Pn(t){return Qt.echoes&&t&&t.constructor===Nt?(Je(),t.then(function(e){return Pe(),e},function(e){return Pe(),Vt(e)})):t}function pa(){var t=En[En.length-1];En.pop(),Te(t,!1)}function Te(t,e){var n,r=St;(e?!Qt.echoes||On++&&t===St:!On||--On&&t===St)||queueMicrotask(e?function(a){++Rn,Qt.echoes&&--Qt.echoes!=0||(Qt.echoes=Qt.awaits=Qt.id=0),En.push(St),Te(a,!0)}.bind(null,t):pa),t!==St&&(St=t,r===pe&&(pe.env=Gr()),Bt&&(n=pe.env.Promise,e=t.env,(r.global||t.global)&&(Object.defineProperty(u,"Promise",e.PromiseProp),n.all=e.all,n.race=e.race,n.resolve=e.resolve,n.reject=e.reject,e.allSettled&&(n.allSettled=e.allSettled),e.any&&(n.any=e.any))))}function Gr(){var t=u.Promise;return Bt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Me(t,e,n,r,a){var d=St;try{return Te(t,!0),e(n,r,a)}finally{Te(d,!1)}}function Xr(t,e,n,r){return typeof t!="function"?t:function(){var a=St;n&&Je(),Te(e,!0);try{return t.apply(this,arguments)}finally{Te(a,!1),r&&queueMicrotask(Pe)}}}function cr(t){Promise===Nt&&Qt.echoes===0?On===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+me).indexOf("[native code]")===-1&&(Je=Pe=Dt);var Vt=_t.reject,Fe="ï¿¿",xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Jr="String expected.",Qe=[],Tn="__dbnames",hr="readonly",dr="readwrite";function Ne(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Qr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function $n(t){return typeof t!="string"||/\./.test(t)?function(e){return e}:function(e){return e[t]===void 0&&t in e&&delete(e=Q(e))[t],e}}function ti(){throw mt.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ft(t,e){try{var n=ei(t),r=ei(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e<t?1:t<e?-1:0;case"binary":return(function(a,d){for(var b=a.length,R=d.length,I=b<R?b:R,z=0;z<I;++z)if(a[z]!==d[z])return a[z]<d[z]?-1:1;return b===R?0:b<R?-1:1})(ni(t),ni(e));case"Array":return(function(a,d){for(var b=a.length,R=d.length,I=b<R?b:R,z=0;z<I;++z){var F=Ft(a[z],d[z]);if(F!==0)return F}return b===R?0:b<R?-1:1})(t,e)}}catch{}return NaN}function ei(t){var e=typeof t;return e!="object"?e:ArrayBuffer.isView(t)?"binary":(t=it(t),t==="ArrayBuffer"?"binary":t)}function ni(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function In(t,e,n){var r=t.schema.yProps;return r?(e&&0<n.numFailures&&(e=e.filter(function(a,d){return!n.failures[d]})),Promise.all(r.map(function(a){return a=a.updatesTable,e?t.db.table(a).where("k").anyOf(e).delete():t.db.table(a).clear()})).then(function(){return n})):n}var un=(ri.prototype.execute=function(t){var e=this["@@propmod"];if(e.add!==void 0){var n=e.add;if(l(n))return c(c([],l(t)?t:[],!0),n).sort();if(typeof n=="number")return(Number(t)||0)+n;if(typeof n=="bigint")try{return BigInt(t)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(e.remove!==void 0){var r=e.remove;if(l(r))return l(t)?t.filter(function(a){return!r.includes(a)}).sort():[];if(typeof r=="number")return Number(t)-r;if(typeof r=="bigint")try{return BigInt(t)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=e.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof t=="string"&&t.startsWith(n)?e.replacePrefix[1]+t.substring(n.length):t},ri);function ri(t){this["@@propmod"]=t}function ii(t,e){for(var n=h(e),r=n.length,a=!1,d=0;d<r;++d){var b=n[d],R=e[b],I=nt(t,b);R instanceof un?(X(t,b,R.execute(I)),a=!0):I!==R&&(X(t,b,R),a=!0)}return a}var ai=(Wt.prototype._trans=function(t,e,n){var r=this._tx||St.trans,a=this.name,d=at&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function b(z,F,T){if(!T.schema[a])throw new mt.NotFound("Table "+a+" not part of transaction");return e(T.idbtrans,T)}var R=Ge();try{var I=r&&r.db._novip===this.db._novip?r===St.trans?r._promise(t,b,n):Re(function(){return r._promise(t,b,n)},{trans:r,transless:St.transless||St}):(function z(F,T,L,D){if(F.idbdb&&(F._state.openComplete||St.letThrough||F._vip)){var j=F._createTransaction(T,L,F._dbSchema);try{j.create(),F._state.PR1398_maxLoop=3}catch(M){return M.name===Gt.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return z(F,T,L,D)})):Vt(M)}return j._promise(T,function(M,U){return Re(function(){return St.trans=j,D(M,U,j)})}).then(function(M){if(T==="readwrite")try{j.idbtrans.commit()}catch{}return T==="readonly"?M:j._completion.then(function(){return M})})}if(F._state.openComplete)return Vt(new mt.DatabaseClosed(F._state.dbOpenError));if(!F._state.isBeingOpened){if(!F._state.autoOpen)return Vt(new mt.DatabaseClosed);F.open().catch(Dt)}return F._state.dbReadyPromise.then(function(){return z(F,T,L,D)})})(this.db,t,[this.name],b);return d&&(I._consoleTask=d,I=I.catch(function(z){return console.trace(z),Vt(z)})),I}finally{R&&Xe()}},Wt.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):t==null?Vt(new mt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:t}).then(function(a){return n.hook.reading.fire(a)})}).then(e)},Wt.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(l(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=h(t);if(e.length===1)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(R){if(R.compound&&e.every(function(z){return 0<=R.keyPath.indexOf(z)})){for(var I=0;I<e.length;++I)if(e.indexOf(R.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(R,I){return R.keyPath.length-I.keyPath.length})[0];if(n&&this.db._maxKey!==Fe){var d=n.keyPath.slice(0,e.length);return this.where(d).equals(d.map(function(I){return t[I]}))}!n&&at&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var r=this.schema.idxByName;function a(R,I){return Ft(R,I)===0}var b=e.reduce(function(T,I){var z=T[0],F=T[1],T=r[I],L=t[I];return[z||T,z||!T?Ne(F,T&&T.multi?function(D){return D=nt(D,I),l(D)&&D.some(function(j){return a(L,j)})}:function(D){return a(L,nt(D,I))}):F]},[null,null]),d=b[0],b=b[1];return d?this.where(d.name).equals(t[d.keyPath]).filter(b):n?this.filter(b):this.where(e).equals("")},Wt.prototype.filter=function(t){return this.toCollection().and(t)},Wt.prototype.count=function(t){return this.toCollection().count(t)},Wt.prototype.offset=function(t){return this.toCollection().offset(t)},Wt.prototype.limit=function(t){return this.toCollection().limit(t)},Wt.prototype.each=function(t){return this.toCollection().each(t)},Wt.prototype.toArray=function(t){return this.toCollection().toArray(t)},Wt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Wt.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,l(t)?"[".concat(t.join("+"),"]"):t))},Wt.prototype.reverse=function(){return this.toCollection().reverse()},Wt.prototype.mapToClass=function(t){var e,n=this.db,r=this.name;function a(){return e!==null&&e.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof ti&&((function(I,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function F(){this.constructor=I}i(I,z),I.prototype=z===null?Object.create(z):(F.prototype=z.prototype,new F)})(a,e=t),Object.defineProperty(a.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),a.prototype.table=function(){return r},t=a);for(var d=new Set,b=t.prototype;b;b=k(b))Object.getOwnPropertyNames(b).forEach(function(I){return d.add(I)});function R(I){if(!I)return I;var z,F=Object.create(t.prototype);for(z in I)if(!d.has(z))try{F[z]=I[z]}catch{}return F}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=R,this.hook("reading",R),t},Wt.prototype.defineClass=function(){return this.mapToClass(function(t){m(this,t)})},Wt.prototype.add=function(t,e){var n=this,r=this.schema.primKey,a=r.auto,d=r.keyPath,b=t;return d&&a&&(b=$n(d)(t)),this._trans("readwrite",function(R){return n.core.mutate({trans:R,type:"add",keys:e!=null?[e]:null,values:[b]})}).then(function(R){return R.numFailures?_t.reject(R.failures[0]):R.lastResult}).then(function(R){if(d)try{X(t,d,R)}catch{}return R})},Wt.prototype.upsert=function(t,e){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return n.core.get({trans:a,key:t}).then(function(d){var b=d??{};return ii(b,e),r&&X(b,r,t),n.core.mutate({trans:a,type:"put",values:[b],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[e]}}).then(function(R){return R.numFailures?_t.reject(R.failures[0]):!!d})})})},Wt.prototype.update=function(t,e){return typeof t!="object"||l(t)?this.where(":id").equals(t).modify(e):(t=nt(t,this.schema.primKey.keyPath),t===void 0?Vt(new mt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(e))},Wt.prototype.put=function(t,e){var n=this,r=this.schema.primKey,a=r.auto,d=r.keyPath,b=t;return d&&a&&(b=$n(d)(t)),this._trans("readwrite",function(R){return n.core.mutate({trans:R,type:"put",values:[b],keys:e!=null?[e]:null})}).then(function(R){return R.numFailures?_t.reject(R.failures[0]):R.lastResult}).then(function(R){if(d)try{X(t,d,R)}catch{}return R})},Wt.prototype.delete=function(t){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]}).then(function(r){return In(e,[t],r)}).then(function(r){return r.numFailures?_t.reject(r.failures[0]):void 0})})},Wt.prototype.clear=function(){var t=this;return this._trans("readwrite",function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Qr}).then(function(n){return In(t,null,n)})}).then(function(e){return e.numFailures?_t.reject(e.failures[0]):void 0})},Wt.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",function(n){return e.core.getMany({keys:t,trans:n}).then(function(r){return r.map(function(a){return e.hook.reading.fire(a)})})})},Wt.prototype.bulkAdd=function(t,e,n){var r=this,a=Array.isArray(e)?e:void 0,d=(n=n||(a?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(b){var z=r.schema.primKey,R=z.auto,z=z.keyPath;if(z&&a)throw new mt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new mt.InvalidArgument("Arguments objects and keys must have the same length");var I=t.length,z=z&&R?t.map($n(z)):t;return r.core.mutate({trans:b,type:"add",keys:a,values:z,wantResults:d}).then(function(j){var T=j.numFailures,L=j.results,D=j.lastResult,j=j.failures;if(T===0)return d?L:D;throw new Lt("".concat(r.name,".bulkAdd(): ").concat(T," of ").concat(I," operations failed"),j)})})},Wt.prototype.bulkPut=function(t,e,n){var r=this,a=Array.isArray(e)?e:void 0,d=(n=n||(a?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(b){var z=r.schema.primKey,R=z.auto,z=z.keyPath;if(z&&a)throw new mt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new mt.InvalidArgument("Arguments objects and keys must have the same length");var I=t.length,z=z&&R?t.map($n(z)):t;return r.core.mutate({trans:b,type:"put",keys:a,values:z,wantResults:d}).then(function(j){var T=j.numFailures,L=j.results,D=j.lastResult,j=j.failures;if(T===0)return d?L:D;throw new Lt("".concat(r.name,".bulkPut(): ").concat(T," of ").concat(I," operations failed"),j)})})},Wt.prototype.bulkUpdate=function(t){var e=this,n=this.core,r=t.map(function(b){return b.key}),a=t.map(function(b){return b.changes}),d=[];return this._trans("readwrite",function(b){return n.getMany({trans:b,keys:r,cache:"clone"}).then(function(R){var I=[],z=[];t.forEach(function(T,L){var D=T.key,j=T.changes,M=R[L];if(M){for(var U=0,q=Object.keys(j);U<q.length;U++){var Z=q[U],J=j[Z];if(Z===e.schema.primKey.keyPath){if(Ft(J,D)!==0)throw new mt.Constraint("Cannot update primary key in bulkUpdate()")}else X(M,Z,J)}d.push(L),I.push(D),z.push(M)}});var F=I.length;return n.mutate({trans:b,type:"put",keys:I,values:z,updates:{keys:r,changeSpecs:a}}).then(function(T){var L=T.numFailures,D=T.failures;if(L===0)return F;for(var j=0,M=Object.keys(D);j<M.length;j++){var U,q=M[j],Z=d[Number(q)];Z!=null&&(U=D[q],delete D[q],D[Z]=U)}throw new Lt("".concat(e.name,".bulkUpdate(): ").concat(L," of ").concat(F," operations failed"),D)})})})},Wt.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"delete",keys:t}).then(function(a){return In(e,t,a)})}).then(function(b){var a=b.numFailures,d=b.lastResult,b=b.failures;if(a===0)return d;throw new Lt("".concat(e.name,".bulkDelete(): ").concat(a," of ").concat(n," operations failed"),b)})},Wt);function Wt(){}function ln(t){function e(b,R){if(R){for(var I=arguments.length,z=new Array(I-1);--I;)z[I-1]=arguments[I];return n[b].subscribe.apply(null,z),t}if(typeof b=="string")return n[b]}var n={};e.addEventType=d;for(var r=1,a=arguments.length;r<a;++r)d(arguments[r]);return e;function d(b,R,I){if(typeof b!="object"){var z;R=R||N;var F={subscribers:[],fire:I=I||Dt,subscribe:function(T){F.subscribers.indexOf(T)===-1&&(F.subscribers.push(T),F.fire=R(F.fire,T))},unsubscribe:function(T){F.subscribers=F.subscribers.filter(function(L){return L!==T}),F.fire=F.subscribers.reduce(R,I)}};return n[b]=e[b]=F}h(z=b).forEach(function(T){var L=z[T];if(l(L))d(T,z[T][0],z[T][1]);else{if(L!=="asap")throw new mt.InvalidArgument("Invalid event config");var D=d(T,ee,function(){for(var j=arguments.length,M=new Array(j);j--;)M[j]=arguments[j];D.subscribers.forEach(function(U){K(function(){U.apply(null,M)})})})}})}}function cn(t,e){return v(e).from({prototype:t}),e}function tn(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function fr(t,e){t.filter=Ne(t.filter,e)}function pr(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Ne(r(),e())}:e,t.justLimit=n&&!r}function zn(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new mt.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function oi(t,e,n){var r=zn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Dn(t,e,n,r){var a=t.replayFilter?Ne(t.filter,t.replayFilter()):t.filter;if(t.or){var d={},b=function(R,I,z){var F,T;a&&!a(I,z,function(L){return I.stop(L)},function(L){return I.fail(L)})||((T=""+(F=I.primaryKey))=="[object ArrayBuffer]"&&(T=""+new Uint8Array(F)),x(d,T)||(d[T]=!0,e(R,I,z)))};return Promise.all([t.or._iterate(b,n),si(oi(t,r,n),t.algorithm,b,!t.keysOnly&&t.valueMapper)])}return si(oi(t,r,n),Ne(t.algorithm,a),e,!t.keysOnly&&t.valueMapper)}function si(t,e,n,r){var a=Ht(r?function(d,b,R){return n(r(d),b,R)}:n);return t.then(function(d){if(d)return d.start(function(){var b=function(){return d.continue()};e&&!e(d,function(R){return b=R},function(R){d.stop(R),b=Dt},function(R){d.fail(R),b=Dt})||a(d.value,d,function(R){return b=R}),b()})})}var ma=(Ut.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,Vt.bind(null,n.error)):n.table._trans("readonly",t).then(e)},Ut.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,Vt.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},Ut.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Ne(e.algorithm,t)},Ut.prototype._iterate=function(t,e){return Dn(this._ctx,t,e,this._ctx.table.core)},Ut.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&m(n,t),e._ctx=n,e},Ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ut.prototype.each=function(t){var e=this._ctx;return this._read(function(n){return Dn(e,t,n,e.table.core)})},Ut.prototype.count=function(t){var e=this;return this._read(function(n){var r=e._ctx,a=r.table.core;if(tn(r,!0))return a.count({trans:n,query:{index:zn(r,a.schema),range:r.range}}).then(function(b){return Math.min(b,r.limit)});var d=0;return Dn(r,function(){return++d,!1},n,a).then(function(){return d})}).then(t)},Ut.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],a=n.length-1;function d(I,z){return z?d(I[n[z]],z-1):I[r]}var b=this._ctx.dir==="next"?1:-1;function R(I,z){return Ft(d(I,a),d(z,a))*b}return this.toArray(function(I){return I.sort(R)}).then(e)},Ut.prototype.toArray=function(t){var e=this;return this._read(function(n){var r=e._ctx;if(r.dir==="next"&&tn(r,!0)&&0<r.limit){var a=r.valueMapper,d=zn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:d,range:r.range}}).then(function(R){return R=R.result,a?R.map(a):R})}var b=[];return Dn(r,function(R){return b.push(R)},n,r.table.core).then(function(){return b})},t)},Ut.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,tn(e)?pr(e,function(){var n=t;return function(r,a){return n===0||(n===1?--n:a(function(){r.advance(n),n=0}),!1)}}):pr(e,function(){var n=t;return function(){return--n<0}})),this},Ut.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),pr(this._ctx,function(){var e=t;return function(n,r,a){return--e<=0&&r(a),0<=e}},!0),this},Ut.prototype.until=function(t,e){return fr(this._ctx,function(n,r,a){return!t(n.value)||(r(a),e)}),this},Ut.prototype.first=function(t){return this.limit(1).toArray(function(e){return e[0]}).then(t)},Ut.prototype.last=function(t){return this.reverse().first(t)},Ut.prototype.filter=function(t){var e;return fr(this._ctx,function(n){return t(n.value)}),(e=this._ctx).isMatch=Ne(e.isMatch,t),this},Ut.prototype.and=function(t){return this.filter(t)},Ut.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},Ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ut.prototype.desc=function(){return this.reverse()},Ut.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(n,r){t(r.key,r)})},Ut.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},Ut.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(n,r){t(r.primaryKey,r)})},Ut.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(r,a){n.push(a.key)}).then(function(){return n}).then(t)},Ut.prototype.primaryKeys=function(t){var e=this._ctx;if(e.dir==="next"&&tn(e,!0)&&0<e.limit)return this._read(function(r){var a=zn(e,e.table.core.schema);return e.table.core.query({trans:r,values:!1,limit:e.limit,query:{index:a,range:e.range}})}).then(function(r){return r.result}).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(r,a){n.push(a.primaryKey)}).then(function(){return n}).then(t)},Ut.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},Ut.prototype.firstKey=function(t){return this.limit(1).keys(function(e){return e[0]}).then(t)},Ut.prototype.lastKey=function(t){return this.reverse().firstKey(t)},Ut.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var e={};return fr(this._ctx,function(a){var r=a.primaryKey.toString(),a=x(e,r);return e[r]=!0,!a}),this},Ut.prototype.modify=function(t){var e=this,n=this._ctx;return this._write(function(r){var a=typeof t=="function"?t:function(M){return ii(M,t)},d=n.table.core,z=d.schema.primaryKey,b=z.outbound,R=z.extractKey,I=200,z=e.db._options.modifyChunkSize;z&&(I=typeof z=="object"?z[d.name]||z["*"]||200:z);function F(M,Z){var q=Z.failures,Z=Z.numFailures;L+=M-Z;for(var J=0,rt=h(q);J<rt.length;J++){var ft=rt[J];T.push(q[ft])}}var T=[],L=0,D=[],j=t===ui;return e.clone().primaryKeys().then(function(M){function U(Z){var J=Math.min(I,M.length-Z),rt=M.slice(Z,Z+J);return(j?Promise.resolve([]):d.getMany({trans:r,keys:rt,cache:"immutable"})).then(function(ft){var bt=[],ht=[],gt=b?[]:null,wt=j?rt:[];if(!j)for(var yt=0;yt<J;++yt){var Ct=ft[yt],It={value:Q(Ct),primKey:M[Z+yt]};a.call(It,It.value,It)!==!1&&(It.value==null?wt.push(M[Z+yt]):b||Ft(R(Ct),R(It.value))===0?(ht.push(It.value),b&&gt.push(M[Z+yt])):(wt.push(M[Z+yt]),bt.push(It.value)))}return Promise.resolve(0<bt.length&&d.mutate({trans:r,type:"add",values:bt}).then(function(zt){for(var jt in zt.failures)wt.splice(parseInt(jt),1);F(bt.length,zt)})).then(function(){return(0<ht.length||q&&typeof t=="object")&&d.mutate({trans:r,type:"put",keys:gt,values:ht,criteria:q,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<Z}).then(function(zt){return F(ht.length,zt)})}).then(function(){return(0<wt.length||q&&j)&&d.mutate({trans:r,type:"delete",keys:wt,criteria:q,isAdditionalChunk:0<Z}).then(function(zt){return In(n.table,wt,zt)}).then(function(zt){return F(wt.length,zt)})}).then(function(){return M.length>Z+J&&U(Z+I)})})}var q=tn(n)&&n.limit===1/0&&(typeof t!="function"||j)&&{index:n.index,range:n.range};return U(0).then(function(){if(0<T.length)throw new vt("Error modifying one or more objects",T,L,D);return M.length})})})},Ut.prototype.delete=function(){var t=this._ctx,e=t.range;return!tn(t)||t.table.schema.yProps||!t.isPrimKey&&e.type!==3?this.modify(ui):this._write(function(n){var r=t.table.core.schema.primaryKey,a=e;return t.table.core.count({trans:n,query:{index:r,range:a}}).then(function(d){return t.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(I){var R=I.failures,I=I.numFailures;if(I)throw new vt("Could not delete some values",Object.keys(R).map(function(z){return R[z]}),d-I);return d-I})})})},Ut);function Ut(){}var ui=function(t,e){return e.value=null};function ga(t,e){return t<e?-1:t===e?0:1}function va(t,e){return e<t?-1:t===e?0:1}function de(t,e,n){return t=t instanceof ci?new t.Collection(t):t,t._ctx.error=new(n||TypeError)(e),t}function en(t){return new t.Collection(t,function(){return li("")}).limit(0)}function Bn(t,e,n,r){var a,d,b,R,I,z,F,T=n.length;if(!n.every(function(j){return typeof j=="string"}))return de(t,Jr);function L(j){a=j==="next"?function(U){return U.toUpperCase()}:function(U){return U.toLowerCase()},d=j==="next"?function(U){return U.toLowerCase()}:function(U){return U.toUpperCase()},b=j==="next"?ga:va;var M=n.map(function(U){return{lower:d(U),upper:a(U)}}).sort(function(U,q){return b(U.lower,q.lower)});R=M.map(function(U){return U.upper}),I=M.map(function(U){return U.lower}),F=(z=j)==="next"?"":r}L("next"),t=new t.Collection(t,function(){return $e(R[0],I[T-1]+r)}),t._ondirectionchange=function(j){L(j)};var D=0;return t._addAlgorithm(function(j,M,U){var q=j.key;if(typeof q!="string")return!1;var Z=d(q);if(e(Z,I,D))return!0;for(var J=null,rt=D;rt<T;++rt){var ft=(function(bt,ht,gt,wt,yt,Ct){for(var It=Math.min(bt.length,wt.length),zt=-1,jt=0;jt<It;++jt){var fe=ht[jt];if(fe!==wt[jt])return yt(bt[jt],gt[jt])<0?bt.substr(0,jt)+gt[jt]+gt.substr(jt+1):yt(bt[jt],wt[jt])<0?bt.substr(0,jt)+wt[jt]+gt.substr(jt+1):0<=zt?bt.substr(0,zt)+ht[zt]+gt.substr(zt+1):null;yt(bt[jt],fe)<0&&(zt=jt)}return It<wt.length&&Ct==="next"?bt+gt.substr(bt.length):It<bt.length&&Ct==="prev"?bt.substr(0,gt.length):zt<0?null:bt.substr(0,zt)+wt[zt]+gt.substr(zt+1)})(q,Z,R[rt],I[rt],b,z);ft===null&&J===null?D=rt+1:(J===null||0<b(J,ft))&&(J=ft)}return M(J!==null?function(){j.continue(J+F)}:U),!1}),t}function $e(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function li(t){return{type:1,lower:t,upper:t}}var ci=(Object.defineProperty(te.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),te.prototype.between=function(t,e,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(t,e)||this._cmp(t,e)===0&&(n||r)&&(!n||!r)?en(this):new this.Collection(this,function(){return $e(t,e,!n,!r)})}catch{return de(this,xe)}},te.prototype.equals=function(t){return t==null?de(this,xe):new this.Collection(this,function(){return li(t)})},te.prototype.above=function(t){return t==null?de(this,xe):new this.Collection(this,function(){return $e(t,void 0,!0)})},te.prototype.aboveOrEqual=function(t){return t==null?de(this,xe):new this.Collection(this,function(){return $e(t,void 0,!1)})},te.prototype.below=function(t){return t==null?de(this,xe):new this.Collection(this,function(){return $e(void 0,t,!1,!0)})},te.prototype.belowOrEqual=function(t){return t==null?de(this,xe):new this.Collection(this,function(){return $e(void 0,t)})},te.prototype.startsWith=function(t){return typeof t!="string"?de(this,Jr):this.between(t,t+Fe,!0,!0)},te.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Bn(this,function(e,n){return e.indexOf(n[0])===0},[t],Fe)},te.prototype.equalsIgnoreCase=function(t){return Bn(this,function(e,n){return e===n[0]},[t],"")},te.prototype.anyOfIgnoreCase=function(){var t=Ot.apply(st,arguments);return t.length===0?en(this):Bn(this,function(e,n){return n.indexOf(e)!==-1},t,"")},te.prototype.startsWithAnyOfIgnoreCase=function(){var t=Ot.apply(st,arguments);return t.length===0?en(this):Bn(this,function(e,n){return n.some(function(r){return e.indexOf(r)===0})},t,Fe)},te.prototype.anyOf=function(){var t=this,e=Ot.apply(st,arguments),n=this._cmp;try{e.sort(n)}catch{return de(this,xe)}if(e.length===0)return en(this);var r=new this.Collection(this,function(){return $e(e[0],e[e.length-1])});r._ondirectionchange=function(d){n=d==="next"?t._ascending:t._descending,e.sort(n)};var a=0;return r._addAlgorithm(function(d,b,R){for(var I=d.key;0<n(I,e[a]);)if(++a===e.length)return b(R),!1;return n(I,e[a])===0||(b(function(){d.continue(e[a])}),!1)}),r},te.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},te.prototype.noneOf=function(){var t=Ot.apply(st,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return de(this,xe)}var e=t.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},te.prototype.inAnyRange=function(q,e){var n=this,r=this._cmp,a=this._ascending,d=this._descending,b=this._min,R=this._max;if(q.length===0)return en(this);if(!q.every(function(Z){return Z[0]!==void 0&&Z[1]!==void 0&&a(Z[0],Z[1])<=0}))return de(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",mt.InvalidArgument);var I=!e||e.includeLowers!==!1,z=e&&e.includeUppers===!0,F,T=a;function L(Z,J){return T(Z[0],J[0])}try{(F=q.reduce(function(Z,J){for(var rt=0,ft=Z.length;rt<ft;++rt){var bt=Z[rt];if(r(J[0],bt[1])<0&&0<r(J[1],bt[0])){bt[0]=b(bt[0],J[0]),bt[1]=R(bt[1],J[1]);break}}return rt===ft&&Z.push(J),Z},[])).sort(L)}catch{return de(this,xe)}var D=0,j=z?function(Z){return 0<a(Z,F[D][1])}:function(Z){return 0<=a(Z,F[D][1])},M=I?function(Z){return 0<d(Z,F[D][0])}:function(Z){return 0<=d(Z,F[D][0])},U=j,q=new this.Collection(this,function(){return $e(F[0][0],F[F.length-1][1],!I,!z)});return q._ondirectionchange=function(Z){T=Z==="next"?(U=j,a):(U=M,d),F.sort(L)},q._addAlgorithm(function(Z,J,rt){for(var ft,bt=Z.key;U(bt);)if(++D===F.length)return J(rt),!1;return!j(ft=bt)&&!M(ft)||(n._cmp(bt,F[D][1])===0||n._cmp(bt,F[D][0])===0||J(function(){T===a?Z.continue(F[D][0]):Z.continue(F[D][1])}),!1)}),q},te.prototype.startsWithAnyOf=function(){var t=Ot.apply(st,arguments);return t.every(function(e){return typeof e=="string"})?t.length===0?en(this):this.inAnyRange(t.map(function(e){return[e,e+Fe]})):de(this,"startsWithAnyOf() only works with strings")},te);function te(){}function ye(t){return Ht(function(e){return hn(e),t(e.target.error),!1})}function hn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var dn="storagemutated",mr="x-storagemutated-1",Ie=ln(null,dn),ya=(be.prototype._lock=function(){return W(!St.global),++this._reculock,this._reculock!==1||St.global||(St.lockOwnerFor=this),this},be.prototype._unlock=function(){if(W(!St.global),--this._reculock==0)for(St.global||(St.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Me(t[1],t[0])}catch{}}return this},be.prototype._locked=function(){return this._reculock&&St.lockOwnerFor!==this},be.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(W(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new mt.DatabaseClosed(r);case"MissingAPIError":throw new mt.MissingAPI(r.message,r);default:throw new mt.OpenFailed(r)}if(!this.active)throw new mt.TransactionInactive;return W(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ht(function(a){hn(a),e._reject(t.error)}),t.onabort=Ht(function(a){hn(a),e.active&&e._reject(new mt.Abort(t.error)),e.active=!1,e.on("abort").fire(a)}),t.oncomplete=Ht(function(){e.active=!1,e._resolve(),"mutatedParts"in t&&Ie.storagemutated.fire(t.mutatedParts)}),this},be.prototype._promise=function(t,e,n){var r=this;if(t==="readwrite"&&this.mode!=="readwrite")return Vt(new mt.ReadOnly("Transaction is readonly"));if(!this.active)return Vt(new mt.TransactionInactive);if(this._locked())return new _t(function(d,b){r._blockedFuncs.push([function(){r._promise(t,e,n).then(d,b)},St])});if(n)return Re(function(){var d=new _t(function(b,R){r._lock();var I=e(b,R,r);I&&I.then&&I.then(b,R)});return d.finally(function(){return r._unlock()}),d._lib=!0,d});var a=new _t(function(d,b){var R=e(d,b,r);R&&R.then&&R.then(d,b)});return a._lib=!0,a},be.prototype._root=function(){return this.parent?this.parent._root():this},be.prototype.waitFor=function(t){var e,n=this._root(),r=_t.resolve(t);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],e=n.idbtrans.objectStore(n.storeNames[0]),(function d(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(e.get(-1/0).onsuccess=d)})());var a=n._waitingFor;return new _t(function(d,b){r.then(function(R){return n._waitingQueue.push(Ht(d.bind(null,R)))},function(R){return n._waitingQueue.push(Ht(b.bind(null,R)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},be.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new mt.Abort))},be.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(x(e,t))return e[t];var n=this.schema[t];if(!n)throw new mt.NotFound("Table "+t+" not part of transaction");return n=new this.db.Table(t,n,this),n.core=this.db.core.table(t),e[t]=n},be);function be(){}function gr(t,e,n,r,a,d,b,R){return{name:t,keyPath:e,unique:n,multi:r,auto:a,compound:d,src:(n&&!b?"&":"")+(r?"*":"")+(a?"++":"")+hi(e),type:R}}function hi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function vr(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:(r=function(a){return[a.name,a]},n.reduce(function(a,d,b){return b=r(d,b),b&&(a[b[0]]=b[1]),a},{}))};var r}var fn=function(t){try{return t.only([[]]),fn=function(){return[[]]},[[]]}catch{return fn=function(){return Fe},Fe}};function yr(t){return t==null?function(){}:typeof t=="string"?(e=t).split(".").length===1?function(n){return n[e]}:function(n){return nt(n,e)}:function(n){return nt(n,t)};var e}function di(t){return[].slice.call(t)}var ba=0;function pn(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function wa(t,e,I){function r(U){if(U.type===3)return null;if(U.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var D=U.lower,j=U.upper,M=U.lowerOpen,U=U.upperOpen;return D===void 0?j===void 0?null:e.upperBound(j,!!U):j===void 0?e.lowerBound(D,!!M):e.bound(D,j,!!M,!!U)}function a(L){var D,j=L.name;return{name:j,schema:L,mutate:function(M){var U=M.trans,q=M.type,Z=M.keys,J=M.values,rt=M.range;return new Promise(function(ft,bt){ft=Ht(ft);var ht=U.objectStore(j),gt=ht.keyPath==null,wt=q==="put"||q==="add";if(!wt&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var yt,Ct=(Z||J||{length:1}).length;if(Z&&J&&Z.length!==J.length)throw new Error("Given keys array must have same length as given values array.");if(Ct===0)return ft({numFailures:0,failures:{},results:[],lastResult:void 0});function It(ue){++fe,hn(ue)}var zt=[],jt=[],fe=0;if(q==="deleteRange"){if(rt.type===4)return ft({numFailures:fe,failures:jt,results:[],lastResult:void 0});rt.type===3?zt.push(yt=ht.clear()):zt.push(yt=ht.delete(r(rt)))}else{var gt=wt?gt?[J,Z]:[J,null]:[Z,null],$t=gt[0],ie=gt[1];if(wt)for(var ae=0;ae<Ct;++ae)zt.push(yt=ie&&ie[ae]!==void 0?ht[q]($t[ae],ie[ae]):ht[q]($t[ae])),yt.onerror=It;else for(ae=0;ae<Ct;++ae)zt.push(yt=ht[q]($t[ae])),yt.onerror=It}function Vn(ue){ue=ue.target.result,zt.forEach(function(Ke,Br){return Ke.error!=null&&(jt[Br]=Ke.error)}),ft({numFailures:fe,failures:jt,results:q==="delete"?Z:zt.map(function(Ke){return Ke.result}),lastResult:ue})}yt.onerror=function(ue){It(ue),Vn(ue)},yt.onsuccess=Vn})},getMany:function(M){var U=M.trans,q=M.keys;return new Promise(function(Z,J){Z=Ht(Z);for(var rt,ft=U.objectStore(j),bt=q.length,ht=new Array(bt),gt=0,wt=0,yt=function(zt){zt=zt.target,ht[zt._pos]=zt.result,++wt===gt&&Z(ht)},Ct=ye(J),It=0;It<bt;++It)q[It]!=null&&((rt=ft.get(q[It]))._pos=It,rt.onsuccess=yt,rt.onerror=Ct,++gt);gt===0&&Z(ht)})},get:function(M){var U=M.trans,q=M.key;return new Promise(function(Z,J){Z=Ht(Z);var rt=U.objectStore(j).get(q);rt.onsuccess=function(ft){return Z(ft.target.result)},rt.onerror=ye(J)})},query:(D=z,function(M){return new Promise(function(U,q){U=Ht(U);var Z,J,rt,gt=M.trans,ft=M.values,bt=M.limit,yt=M.query,ht=bt===1/0?void 0:bt,wt=yt.index,yt=yt.range,gt=gt.objectStore(j),wt=wt.isPrimaryKey?gt:gt.index(wt.name),yt=r(yt);if(bt===0)return U({result:[]});D?((ht=ft?wt.getAll(yt,ht):wt.getAllKeys(yt,ht)).onsuccess=function(Ct){return U({result:Ct.target.result})},ht.onerror=ye(q)):(Z=0,J=!ft&&"openKeyCursor"in wt?wt.openKeyCursor(yt):wt.openCursor(yt),rt=[],J.onsuccess=function(Ct){var It=J.result;return It?(rt.push(ft?It.value:It.primaryKey),++Z===bt?U({result:rt}):void It.continue()):U({result:rt})},J.onerror=ye(q))})}),openCursor:function(M){var U=M.trans,q=M.values,Z=M.query,J=M.reverse,rt=M.unique;return new Promise(function(ft,bt){ft=Ht(ft);var wt=Z.index,ht=Z.range,gt=U.objectStore(j),gt=wt.isPrimaryKey?gt:gt.index(wt.name),wt=J?rt?"prevunique":"prev":rt?"nextunique":"next",yt=!q&&"openKeyCursor"in gt?gt.openKeyCursor(r(ht),wt):gt.openCursor(r(ht),wt);yt.onerror=ye(bt),yt.onsuccess=Ht(function(Ct){var It,zt,jt,fe,$t=yt.result;$t?($t.___id=++ba,$t.done=!1,It=$t.continue.bind($t),zt=(zt=$t.continuePrimaryKey)&&zt.bind($t),jt=$t.advance.bind($t),fe=function(){throw new Error("Cursor not stopped")},$t.trans=U,$t.stop=$t.continue=$t.continuePrimaryKey=$t.advance=function(){throw new Error("Cursor not started")},$t.fail=Ht(bt),$t.next=function(){var ie=this,ae=1;return this.start(function(){return ae--?ie.continue():ie.stop()}).then(function(){return ie})},$t.start=function(ie){function ae(){if(yt.result)try{ie()}catch(ue){$t.fail(ue)}else $t.done=!0,$t.start=function(){throw new Error("Cursor behind last entry")},$t.stop()}var Vn=new Promise(function(ue,Ke){ue=Ht(ue),yt.onerror=ye(Ke),$t.fail=Ke,$t.stop=function(Br){$t.stop=$t.continue=$t.continuePrimaryKey=$t.advance=fe,ue(Br)}});return yt.onsuccess=Ht(function(ue){yt.onsuccess=ae,ae()}),$t.continue=It,$t.continuePrimaryKey=zt,$t.advance=jt,ae(),Vn},ft($t)):ft(null)},bt)})},count:function(M){var U=M.query,q=M.trans,Z=U.index,J=U.range;return new Promise(function(rt,ft){var bt=q.objectStore(j),ht=Z.isPrimaryKey?bt:bt.index(Z.name),bt=r(J),ht=bt?ht.count(bt):ht.count();ht.onsuccess=Ht(function(gt){return rt(gt.target.result)}),ht.onerror=ye(ft)})}}}var d,b,R,F=(b=I,R=di((d=t).objectStoreNames),{schema:{name:d.name,tables:R.map(function(L){return b.objectStore(L)}).map(function(L){var D=L.keyPath,U=L.autoIncrement,j=l(D),M={},U={name:L.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:D==null,compound:j,keyPath:D,autoIncrement:U,unique:!0,extractKey:yr(D)},indexes:di(L.indexNames).map(function(q){return L.index(q)}).map(function(rt){var Z=rt.name,J=rt.unique,ft=rt.multiEntry,rt=rt.keyPath,ft={name:Z,compound:l(rt),keyPath:rt,unique:J,multiEntry:ft,extractKey:yr(rt)};return M[pn(rt)]=ft}),getIndexByKeyPath:function(q){return M[pn(q)]}};return M[":id"]=U.primaryKey,D!=null&&(M[pn(D)]=U.primaryKey),U})},hasGetAll:0<R.length&&"getAll"in b.objectStore(R[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),I=F.schema,z=F.hasGetAll,F=I.tables.map(a),T={};return F.forEach(function(L){return T[L.name]=L}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(L){if(!T[L])throw new Error("Table '".concat(L,"' not found"));return T[L]},MIN_KEY:-1/0,MAX_KEY:fn(e),schema:I}}function _a(t,e,n,r){var a=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=wa(e,a,r),t.dbcore.reduce(function(d,b){return b=b.create,f(f({},d),b(d))},r))}}function jn(t,r){var n=r.db,r=_a(t._middlewares,n,t._deps,r);t.core=r.dbcore,t.tables.forEach(function(a){var d=a.name;t.core.schema.tables.some(function(b){return b.name===d})&&(a.core=t.core.table(d),t[d]instanceof t.Table&&(t[d].core=a.core))})}function Mn(t,e,n,r){n.forEach(function(a){var d=r[a];e.forEach(function(b){var R=(function I(z,F){return S(z,F)||(z=k(z))&&I(z,F)})(b,a);(!R||"value"in R&&R.value===void 0)&&(b===t.Transaction.prototype||b instanceof t.Transaction?E(b,a,{get:function(){return this.table(a)},set:function(I){g(this,a,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new t.Table(a,d))})})}function br(t,e){e.forEach(function(n){for(var r in n)n[r]instanceof t.Table&&delete n[r]})}function xa(t,e){return t._cfg.version-e._cfg.version}function ka(t,e,n,r){var a=t._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=vr("$meta",pi("")[0],[]),t._storeNames.push("$meta"));var d=t._createTransaction("readwrite",t._storeNames,a);d.create(n),d._completion.catch(r);var b=d._reject.bind(d),R=St.transless||St;Re(function(){return St.trans=d,St.transless=R,e!==0?(jn(t,n),z=e,((I=d).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(F){return F??z}):_t.resolve(z)).then(function(F){return L=F,D=d,j=n,M=[],F=(T=t)._versions,U=T._dbSchema=Nn(0,T.idbdb,j),(F=F.filter(function(q){return q._cfg.version>=L})).length!==0?(F.forEach(function(q){M.push(function(){var Z=U,J=q._cfg.dbschema;Un(T,Z,j),Un(T,J,j),U=T._dbSchema=J;var rt=wr(Z,J);rt.add.forEach(function(wt){_r(j,wt[0],wt[1].primKey,wt[1].indexes)}),rt.change.forEach(function(wt){if(wt.recreate)throw new mt.Upgrade("Not yet support for changing primary key");var yt=j.objectStore(wt.name);wt.add.forEach(function(Ct){return Fn(yt,Ct)}),wt.change.forEach(function(Ct){yt.deleteIndex(Ct.name),Fn(yt,Ct)}),wt.del.forEach(function(Ct){return yt.deleteIndex(Ct)})});var ft=q._cfg.contentUpgrade;if(ft&&q._cfg.version>L){jn(T,j),D._memoizedTables={};var bt=lt(J);rt.del.forEach(function(wt){bt[wt]=Z[wt]}),br(T,[T.Transaction.prototype]),Mn(T,[T.Transaction.prototype],h(bt),bt),D.schema=bt;var ht,gt=Y(ft);return gt&&Je(),rt=_t.follow(function(){var wt;(ht=ft(D))&&gt&&(wt=Pe.bind(null,null),ht.then(wt,wt))}),ht&&typeof ht.then=="function"?_t.resolve(ht):rt.then(function(){return ht})}}),M.push(function(Z){var J,rt,ft=q._cfg.dbschema;J=ft,rt=Z,[].slice.call(rt.db.objectStoreNames).forEach(function(bt){return J[bt]==null&&rt.db.deleteObjectStore(bt)}),br(T,[T.Transaction.prototype]),Mn(T,[T.Transaction.prototype],T._storeNames,T._dbSchema),D.schema=T._dbSchema}),M.push(function(Z){T.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(T.idbdb.version/10)===q._cfg.version?(T.idbdb.deleteObjectStore("$meta"),delete T._dbSchema.$meta,T._storeNames=T._storeNames.filter(function(J){return J!=="$meta"})):Z.objectStore("$meta").put(q._cfg.version,"version"))})}),(function q(){return M.length?_t.resolve(M.shift()(D.idbtrans)).then(q):_t.resolve()})().then(function(){fi(U,j)})):_t.resolve();var T,L,D,j,M,U}).catch(b)):(h(a).forEach(function(F){_r(n,F,a[F].primKey,a[F].indexes)}),jn(t,n),void _t.follow(function(){return t.on.populate.fire(d)}).catch(b));var I,z})}function Sa(t,e){fi(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var n=Nn(0,t.idbdb,e);Un(t,t._dbSchema,e);for(var r=0,a=wr(n,t._dbSchema).change;r<a.length;r++){var d=(function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var R=e.objectStore(b.name);b.add.forEach(function(I){at&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(I.src)),Fn(R,I)})})(a[r]);if(typeof d=="object")return d.value}}function wr(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var a=t[n],d=e[n];if(a){var b={name:n,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||a.primKey.auto!==d.primKey.auto)b.recreate=!0,r.change.push(b);else{var R=a.idxByName,I=d.idxByName,z=void 0;for(z in R)I[z]||b.del.push(z);for(z in I){var F=R[z],T=I[z];F?F.src!==T.src&&b.change.push(T):b.add.push(T)}(0<b.del.length||0<b.add.length||0<b.change.length)&&r.change.push(b)}}else r.add.push([n,d])}return r}function _r(t,e,n,r){var a=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(d){return Fn(a,d)}),a}function fi(t,e){h(t).forEach(function(n){e.db.objectStoreNames.contains(n)||(at&&console.debug("Dexie: Creating missing table",n),_r(e,n,t[n].primKey,t[n].indexes))})}function Fn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Nn(t,e,n){var r={};return P(e.objectStoreNames,0).forEach(function(a){for(var d=n.objectStore(a),b=gr(hi(z=d.keyPath),z||"",!0,!1,!!d.autoIncrement,z&&typeof z!="string",!0),R=[],I=0;I<d.indexNames.length;++I){var F=d.index(d.indexNames[I]),z=F.keyPath,F=gr(F.name,z,!!F.unique,!!F.multiEntry,!1,z&&typeof z!="string",!1);R.push(F)}r[a]=vr(a,b,R)}),r}function Un(t,e,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var d=r[a],b=n.objectStore(d);t._hasGetAll="getAll"in b;for(var R=0;R<b.indexNames.length;++R){var I=b.indexNames[R],z=b.index(I).keyPath,F=typeof z=="string"?z:"["+P(z).join("+")+"]";!e[d]||(z=e[d].idxByName[F])&&(z.name=I,delete e[d].idxByName[F],e[d].idxByName[I]=z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function pi(t){return t.split(",").map(function(e,n){var d=e.split(":"),r=(a=d[1])===null||a===void 0?void 0:a.trim(),a=(e=d[0].trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return gr(a,d||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),l(d),n===0,r)})}var Ca=(nn.prototype._createTableSchema=vr,nn.prototype._parseIndexSyntax=pi,nn.prototype._parseStoresSpec=function(t,e){var n=this;h(t).forEach(function(r){if(t[r]!==null){var a=n._parseIndexSyntax(t[r]),d=a.shift();if(!d)throw new mt.Schema("Invalid schema for table "+r+": "+t[r]);if(d.unique=!0,d.multi)throw new mt.Schema("Primary key cannot be multiEntry*");a.forEach(function(b){if(b.auto)throw new mt.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new mt.Schema("Index must have a name and cannot be an empty string")}),a=n._createTableSchema(r,d,a),e[r]=a}})},nn.prototype.stores=function(n){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,n):n;var n=e._versions,r={},a={};return n.forEach(function(d){m(r,d._cfg.storesSource),a=d._cfg.dbschema={},d._parseStoresSpec(r,a)}),e._dbSchema=a,br(e,[e._allTables,e,e.Transaction.prototype]),Mn(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],h(a),a),e._storeNames=h(a),this},nn.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ot(this._cfg.contentUpgrade||Dt,t),this},nn);function nn(){}function xr(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ke(Tn,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function kr(t){return t&&typeof t.databases=="function"}function Sr(t){return Re(function(){return St.letThrough=!0,t()})}function Cr(t){return!("from"in t)}var re=function(t,e){if(!this){var n=new re;return t&&"d"in t&&m(n,t),n}m(this,arguments.length?{d:1,from:t,to:1<arguments.length?e:t}:{d:0})};function mn(t,e,n){var r=Ft(e,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Cr(t))return m(t,{from:e,to:n,d:1});var a=t.l,r=t.r;if(Ft(n,t.from)<0)return a?mn(a,e,n):t.l={from:e,to:n,d:1,l:null,r:null},gi(t);if(0<Ft(e,t.to))return r?mn(r,e,n):t.r={from:e,to:n,d:1,l:null,r:null},gi(t);Ft(e,t.from)<0&&(t.from=e,t.l=null,t.d=r?r.d+1:1),0<Ft(n,t.to)&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1),n=!t.r,a&&!t.l&&gn(t,a),r&&n&&gn(t,r)}}function gn(t,e){Cr(e)||(function n(r,I){var d=I.from,b=I.to,R=I.l,I=I.r;mn(r,d,b),R&&n(r,R),I&&n(r,I)})(t,e)}function mi(t,e){var n=Ln(e),r=n.next();if(r.done)return!1;for(var a=r.value,d=Ln(t),b=d.next(a.from),R=b.value;!r.done&&!b.done;){if(Ft(R.from,a.to)<=0&&0<=Ft(R.to,a.from))return!0;Ft(a.from,R.from)<0?a=(r=n.next(R.from)).value:R=(b=d.next(a.from)).value}return!1}function Ln(t){var e=Cr(t)?null:{s:0,n:t};return{next:function(n){for(var r=0<arguments.length;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Ft(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Ft(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function gi(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),a=1<r?"r":r<-1?"l":"";a&&(e=a=="r"?"l":"r",n=f({},t),r=t[a],t.from=r.from,t.to=r.to,t[a]=r[a],n[a]=r[e],(t[e]=n).d=vi(n)),t.d=vi(t)}function vi(n){var e=n.r,n=n.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}function Kn(t,e){return h(e).forEach(function(n){t[n]?gn(t[n],e[n]):t[n]=(function r(a){var d,b,R={};for(d in a)x(a,d)&&(b=a[d],R[d]=!b||typeof b!="object"||Rt.has(b.constructor)?b:r(b));return R})(e[n])}),t}function Ar(t,e){return t.all||e.all||Object.keys(t).some(function(n){return e[n]&&mi(e[n],t[n])})}A(re.prototype,((me={add:function(t){return gn(this,t),this},addKey:function(t){return mn(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return mn(e,n,n)}),this},hasKey:function(t){var e=Ln(this).next(t).value;return e&&Ft(e.from,t)<=0&&0<=Ft(e.to,t)}})[Pt]=function(){return Ln(this)},me));var Ue={},Er={},Or=!1;function qn(t){Kn(Er,t),Or||(Or=!0,setTimeout(function(){Or=!1,Rr(Er,!(Er={}))},0))}function Rr(t,e){e===void 0&&(e=!1);var n=new Set;if(t.all)for(var r=0,a=Object.values(Ue);r<a.length;r++)yi(b=a[r],t,n,e);else for(var d in t){var b,R=/^idb\:\/\/(.*)\/(.*)\//.exec(d);R&&(d=R[1],R=R[2],(b=Ue["idb://".concat(d,"/").concat(R)])&&yi(b,t,n,e))}n.forEach(function(I){return I()})}function yi(t,e,n,r){for(var a=[],d=0,b=Object.entries(t.queries.query);d<b.length;d++){for(var R=b[d],I=R[0],z=[],F=0,T=R[1];F<T.length;F++){var L=T[F];Ar(e,L.obsSet)?L.subscribers.forEach(function(U){return n.add(U)}):r&&z.push(L)}r&&a.push([I,z])}if(r)for(var D=0,j=a;D<j.length;D++){var M=j[D],I=M[0],z=M[1];t.queries.query[I]=z}}function Aa(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?Vt(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller,a=Math.round(10*t.verno),d=!1;function b(){if(e.openCanceller!==r)throw new mt.DatabaseClosed("db.open() was cancelled")}function R(){return new _t(function(L,D){if(b(),!n)throw new mt.MissingAPI;var j=t.name,M=e.autoSchema||!a?n.open(j):n.open(j,a);if(!M)throw new mt.MissingAPI;M.onerror=ye(D),M.onblocked=Ht(t._fireOnBlocked),M.onupgradeneeded=Ht(function(U){var q;F=M.transaction,e.autoSchema&&!t._options.allowEmptyDB?(M.onerror=hn,F.abort(),M.result.close(),(q=n.deleteDatabase(j)).onsuccess=q.onerror=Ht(function(){D(new mt.NoSuchDatabase("Database ".concat(j," doesnt exist")))})):(F.onerror=ye(D),U=U.oldVersion>Math.pow(2,62)?0:U.oldVersion,T=U<1,t.idbdb=M.result,d&&Sa(t,F),ka(t,U/10,F,D))},D),M.onsuccess=Ht(function(){F=null;var U,q,Z,J,rt,ft=t.idbdb=M.result,bt=P(ft.objectStoreNames);if(0<bt.length)try{var ht=ft.transaction((J=bt).length===1?J[0]:J,"readonly");if(e.autoSchema)q=ft,Z=ht,(U=t).verno=q.version/10,Z=U._dbSchema=Nn(0,q,Z),U._storeNames=P(q.objectStoreNames,0),Mn(U,[U._allTables],h(Z),Z);else if(Un(t,t._dbSchema,ht),((rt=wr(Nn(0,(rt=t).idbdb,ht),rt._dbSchema)).add.length||rt.change.some(function(gt){return gt.add.length||gt.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ft.close(),a=ft.version+1,d=!0,L(R());jn(t,ht)}catch{}Qe.push(t),ft.onversionchange=Ht(function(gt){e.vcFired=!0,t.on("versionchange").fire(gt)}),ft.onclose=Ht(function(){t.close({disableAutoOpen:!1})}),T&&(rt=t._deps,ht=j,ft=rt.indexedDB,rt=rt.IDBKeyRange,kr(ft)||ht===Tn||xr(ft,rt).put({name:ht}).catch(Dt)),L()},D)}).catch(function(L){switch(L?.name){case"UnknownError":if(0<e.PR1398_maxLoop)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),R();break;case"VersionError":if(0<a)return a=0,R()}return _t.reject(L)})}var I,z=e.dbReadyResolve,F=null,T=!1;return _t.race([r,(typeof navigator>"u"?_t.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(L){function D(){return indexedDB.databases().finally(L)}I=setInterval(D,100),D()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(R)]).then(function(){return b(),e.onReadyBeingFired=[],_t.resolve(Sr(function(){return t.on.ready.fire(t.vip)})).then(function L(){if(0<e.onReadyBeingFired.length){var D=e.onReadyBeingFired.reduce(ot,Dt);return e.onReadyBeingFired=[],_t.resolve(Sr(function(){return D(t.vip)})).then(L)}})}).finally(function(){e.openCanceller===r&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(L){e.dbOpenError=L;try{F&&F.abort()}catch{}return r===e.openCanceller&&t._close(),Vt(L)}).finally(function(){e.openComplete=!0,z()}).then(function(){var L;return T&&(L={},t.tables.forEach(function(D){D.schema.indexes.forEach(function(j){j.name&&(L["idb://".concat(t.name,"/").concat(D.name,"/").concat(j.name)]=new re(-1/0,[[[]]]))}),L["idb://".concat(t.name,"/").concat(D.name,"/")]=L["idb://".concat(t.name,"/").concat(D.name,"/:dels")]=new re(-1/0,[[[]]])}),Ie(dn).fire(L),Rr(L,!0)),t})}function Pr(t){function e(d){return t.next(d)}var n=a(e),r=a(function(d){return t.throw(d)});function a(d){return function(I){var R=d(I),I=R.value;return R.done?I:I&&typeof I.then=="function"?I.then(n,r):l(I)?Promise.all(I).then(n,r):n(I)}}return a(e)()}function Wn(t,e,n){for(var r=l(t)?t.slice():[t],a=0;a<n;++a)r.push(e);return r}var Ea={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return f(f({},t),{table:function(e){var n=t.table(e),r=n.schema,a={},d=[];function b(T,L,D){var j=pn(T),M=a[j]=a[j]||[],U=T==null?0:typeof T=="string"?1:T.length,q=0<L,q=f(f({},D),{name:q?"".concat(j,"(virtual-from:").concat(D.name,")"):D.name,lowLevelIndex:D,isVirtual:q,keyTail:L,keyLength:U,extractKey:yr(T),unique:!q&&D.unique});return M.push(q),q.isPrimaryKey||d.push(q),1<U&&b(U===2?T[0]:T.slice(0,U-1),L+1,D),M.sort(function(Z,J){return Z.keyTail-J.keyTail}),q}e=b(r.primaryKey.keyPath,0,r.primaryKey),a[":id"]=[e];for(var R=0,I=r.indexes;R<I.length;R++){var z=I[R];b(z.keyPath,0,z)}function F(T){var L,D=T.query.index;return D.isVirtual?f(f({},T),{query:{index:D.lowLevelIndex,range:(L=T.query.range,D=D.keyTail,{type:L.type===1?2:L.type,lower:Wn(L.lower,L.lowerOpen?t.MAX_KEY:t.MIN_KEY,D),lowerOpen:!0,upper:Wn(L.upper,L.upperOpen?t.MIN_KEY:t.MAX_KEY,D),upperOpen:!0})}}):T}return f(f({},n),{schema:f(f({},r),{primaryKey:e,indexes:d,getIndexByKeyPath:function(T){return(T=a[pn(T)])&&T[0]}}),count:function(T){return n.count(F(T))},query:function(T){return n.query(F(T))},openCursor:function(T){var L=T.query.index,D=L.keyTail,j=L.isVirtual,M=L.keyLength;return j?n.openCursor(F(T)).then(function(q){return q&&U(q)}):n.openCursor(T);function U(q){return Object.create(q,{continue:{value:function(Z){Z!=null?q.continue(Wn(Z,T.reverse?t.MAX_KEY:t.MIN_KEY,D)):T.unique?q.continue(q.key.slice(0,M).concat(T.reverse?t.MIN_KEY:t.MAX_KEY,D)):q.continue()}},continuePrimaryKey:{value:function(Z,J){q.continuePrimaryKey(Wn(Z,t.MAX_KEY,D),J)}},primaryKey:{get:function(){return q.primaryKey}},key:{get:function(){var Z=q.key;return M===1?Z[0]:Z.slice(0,M)}},value:{get:function(){return q.value}}})}}})}})}};function Tr(t,e,n,r){return n=n||{},r=r||"",h(t).forEach(function(a){var d,b,R;x(e,a)?(d=t[a],b=e[a],typeof d=="object"&&typeof b=="object"&&d&&b?(R=it(d))!==it(b)?n[r+a]=e[a]:R==="Object"?Tr(d,b,n,r+a+"."):d!==b&&(n[r+a]=e[a]):d!==b&&(n[r+a]=e[a])):n[r+a]=void 0}),h(e).forEach(function(a){x(t,a)||(n[r+a]=e[a])}),n}function $r(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var Oa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return f(f({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey;return f(f({},n),{mutate:function(a){var d=St.trans,b=d.table(e).hook,R=b.deleting,I=b.creating,z=b.updating;switch(a.type){case"add":if(I.fire===Dt)break;return d._promise("readwrite",function(){return F(a)},!0);case"put":if(I.fire===Dt&&z.fire===Dt)break;return d._promise("readwrite",function(){return F(a)},!0);case"delete":if(R.fire===Dt)break;return d._promise("readwrite",function(){return F(a)},!0);case"deleteRange":if(R.fire===Dt)break;return d._promise("readwrite",function(){return(function T(L,D,j){return n.query({trans:L,values:!1,query:{index:r,range:D},limit:j}).then(function(M){var U=M.result;return F({type:"delete",keys:U,trans:L}).then(function(q){return 0<q.numFailures?Promise.reject(q.failures[0]):U.length<j?{failures:[],numFailures:0,lastResult:void 0}:T(L,f(f({},D),{lower:U[U.length-1],lowerOpen:!0}),j)})})})(a.trans,a.range,1e4)},!0)}return n.mutate(a);function F(T){var L,D,j,M=St.trans,U=T.keys||$r(r,T);if(!U)throw new Error("Keys missing");return(T=T.type==="add"||T.type==="put"?f(f({},T),{keys:U}):f({},T)).type!=="delete"&&(T.values=c([],T.values)),T.keys&&(T.keys=c([],T.keys)),L=n,j=U,((D=T).type==="add"?Promise.resolve([]):L.getMany({trans:D.trans,keys:j,cache:"immutable"})).then(function(q){var Z=U.map(function(J,rt){var ft,bt,ht,gt=q[rt],wt={onerror:null,onsuccess:null};return T.type==="delete"?R.fire.call(wt,J,gt,M):T.type==="add"||gt===void 0?(ft=I.fire.call(wt,J,T.values[rt],M),J==null&&ft!=null&&(T.keys[rt]=J=ft,r.outbound||X(T.values[rt],r.keyPath,J))):(ft=Tr(gt,T.values[rt]),(bt=z.fire.call(wt,ft,J,gt,M))&&(ht=T.values[rt],Object.keys(bt).forEach(function(yt){x(ht,yt)?ht[yt]=bt[yt]:X(ht,yt,bt[yt])}))),wt});return n.mutate(T).then(function(J){for(var rt=J.failures,ft=J.results,bt=J.numFailures,J=J.lastResult,ht=0;ht<U.length;++ht){var gt=(ft||U)[ht],wt=Z[ht];gt==null?wt.onerror&&wt.onerror(rt[ht]):wt.onsuccess&&wt.onsuccess(T.type==="put"&&q[ht]?T.values[ht]:gt)}return{failures:rt,results:ft,numFailures:bt,lastResult:J}}).catch(function(J){return Z.forEach(function(rt){return rt.onerror&&rt.onerror(J)}),Promise.reject(J)})})}}})}})}};function bi(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],a=0,d=0;a<e.keys.length&&d<t.length;++a)Ft(e.keys[a],t[d])===0&&(r.push(n?Q(e.values[a]):e.values[a]),++d);return r.length===t.length?r:null}catch{return null}}var Ra={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return f(f({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var a=bi(r.keys,r.trans._cache,r.cache==="clone");return a?_t.resolve(a):n.getMany(r).then(function(d){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Q(d):d},d})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function wi(t,e){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!e.schema.primaryKey.outbound}function _i(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Pa={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,n=new re(t.MIN_KEY,t.MAX_KEY);return f(f({},t),{transaction:function(r,a,d){if(St.subscr&&a!=="readonly")throw new mt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(St.querier));return t.transaction(r,a,d)},table:function(r){var a=t.table(r),d=a.schema,b=d.primaryKey,T=d.indexes,R=b.extractKey,I=b.outbound,z=b.autoIncrement&&T.filter(function(D){return D.compound&&D.keyPath.includes(b.keyPath)}),F=f(f({},a),{mutate:function(D){function j(yt){return yt="idb://".concat(e,"/").concat(r,"/").concat(yt),J[yt]||(J[yt]=new re)}var M,U,q,Z=D.trans,J=D.mutatedParts||(D.mutatedParts={}),rt=j(""),ft=j(":dels"),bt=D.type,wt=D.type==="deleteRange"?[D.range]:D.type==="delete"?[D.keys]:D.values.length<50?[$r(b,D).filter(function(yt){return yt}),D.values]:[],ht=wt[0],gt=wt[1],wt=D.trans._cache;return l(ht)?(rt.addKeys(ht),(wt=bt==="delete"||ht.length===gt.length?bi(ht,wt):null)||ft.addKeys(ht),(wt||gt)&&(M=j,U=wt,q=gt,d.indexes.forEach(function(yt){var Ct=M(yt.name||"");function It(jt){return jt!=null?yt.extractKey(jt):null}function zt(jt){return yt.multiEntry&&l(jt)?jt.forEach(function(fe){return Ct.addKey(fe)}):Ct.addKey(jt)}(U||q).forEach(function(jt,ie){var $t=U&&It(U[ie]),ie=q&&It(q[ie]);Ft($t,ie)!==0&&($t!=null&&zt($t),ie!=null&&zt(ie))})}))):ht?(gt={from:(gt=ht.lower)!==null&&gt!==void 0?gt:t.MIN_KEY,to:(gt=ht.upper)!==null&&gt!==void 0?gt:t.MAX_KEY},ft.add(gt),rt.add(gt)):(rt.add(n),ft.add(n),d.indexes.forEach(function(yt){return j(yt.name).add(n)})),a.mutate(D).then(function(yt){return!ht||D.type!=="add"&&D.type!=="put"||(rt.addKeys(yt.results),z&&z.forEach(function(Ct){for(var It=D.values.map(function($t){return Ct.extractKey($t)}),zt=Ct.keyPath.findIndex(function($t){return $t===b.keyPath}),jt=0,fe=yt.results.length;jt<fe;++jt)It[jt][zt]=yt.results[jt];j(Ct.name).addKeys(It)})),Z.mutatedParts=Kn(Z.mutatedParts||{},J),yt})}}),T=function(j){var M=j.query,j=M.index,M=M.range;return[j,new re((j=M.lower)!==null&&j!==void 0?j:t.MIN_KEY,(M=M.upper)!==null&&M!==void 0?M:t.MAX_KEY)]},L={get:function(D){return[b,new re(D.key)]},getMany:function(D){return[b,new re().addKeys(D.keys)]},count:T,query:T,openCursor:T};return h(L).forEach(function(D){F[D]=function(j){var M=St.subscr,U=!!M,q=wi(St,a)&&_i(D,j)?j.obsSet={}:M;if(U){var Z=function(gt){return gt="idb://".concat(e,"/").concat(r,"/").concat(gt),q[gt]||(q[gt]=new re)},J=Z(""),rt=Z(":dels"),M=L[D](j),U=M[0],M=M[1];if((D==="query"&&U.isPrimaryKey&&!j.values?rt:Z(U.name||"")).add(M),!U.isPrimaryKey){if(D!=="count"){var ft=D==="query"&&I&&j.values&&a.query(f(f({},j),{values:!1}));return a[D].apply(this,arguments).then(function(gt){if(D==="query"){if(I&&j.values)return ft.then(function(It){return It=It.result,J.addKeys(It),gt});var wt=j.values?gt.result.map(R):gt.result;(j.values?J:rt).addKeys(wt)}else if(D==="openCursor"){var yt=gt,Ct=j.values;return yt&&Object.create(yt,{key:{get:function(){return rt.addKey(yt.primaryKey),yt.key}},primaryKey:{get:function(){var It=yt.primaryKey;return rt.addKey(It),It}},value:{get:function(){return Ct&&J.addKey(yt.primaryKey),yt.value}}})}return gt})}rt.add(n)}}return a[D].apply(this,arguments)}}),F}})}};function xi(t,e,n){if(n.numFailures===0)return e;if(e.type==="deleteRange")return null;var r=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;return n.numFailures===r?null:(e=f({},e),l(e.keys)&&(e.keys=e.keys.filter(function(a,d){return!(d in n.failures)})),"values"in e&&l(e.values)&&(e.values=e.values.filter(function(a,d){return!(d in n.failures)})),e)}function Ir(t,e){return n=t,((r=e).lower===void 0||(r.lowerOpen?0<Ft(n,r.lower):0<=Ft(n,r.lower)))&&(t=t,(e=e).upper===void 0||(e.upperOpen?Ft(t,e.upper)<0:Ft(t,e.upper)<=0));var n,r}function ki(t,e,L,r,a,d){if(!L||L.length===0)return t;var b=e.query.index,R=b.multiEntry,I=e.query.range,z=r.schema.primaryKey.extractKey,F=b.extractKey,T=(b.lowLevelIndex||b).extractKey,L=L.reduce(function(D,j){var M=D,U=[];if(j.type==="add"||j.type==="put")for(var q=new re,Z=j.values.length-1;0<=Z;--Z){var J,rt=j.values[Z],ft=z(rt);q.hasKey(ft)||(J=F(rt),(R&&l(J)?J.some(function(yt){return Ir(yt,I)}):Ir(J,I))&&(q.addKey(ft),U.push(rt)))}switch(j.type){case"add":var bt=new re().addKeys(e.values?D.map(function(Ct){return z(Ct)}):D),M=D.concat(e.values?U.filter(function(Ct){return Ct=z(Ct),!bt.hasKey(Ct)&&(bt.addKey(Ct),!0)}):U.map(function(Ct){return z(Ct)}).filter(function(Ct){return!bt.hasKey(Ct)&&(bt.addKey(Ct),!0)}));break;case"put":var ht=new re().addKeys(j.values.map(function(Ct){return z(Ct)}));M=D.filter(function(Ct){return!ht.hasKey(e.values?z(Ct):Ct)}).concat(e.values?U:U.map(function(Ct){return z(Ct)}));break;case"delete":var gt=new re().addKeys(j.keys);M=D.filter(function(Ct){return!gt.hasKey(e.values?z(Ct):Ct)});break;case"deleteRange":var wt=j.range;M=D.filter(function(Ct){return!Ir(z(Ct),wt)})}return M},t);return L===t?t:(L.sort(function(D,j){return Ft(T(D),T(j))||Ft(z(D),z(j))}),e.limit&&e.limit<1/0&&(L.length>e.limit?L.length=e.limit:t.length===e.limit&&L.length<e.limit&&(a.dirty=!0)),d?Object.freeze(L):L)}function Si(t,e){return Ft(t.lower,e.lower)===0&&Ft(t.upper,e.upper)===0&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function Ta(t,e){return(function(n,r,a,d){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=Ft(n,r))===0){if(a&&d)return 0;if(a)return 1;if(d)return-1}return r})(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&0<=(function(n,r,a,d){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=Ft(n,r))===0){if(a&&d)return 0;if(a)return-1;if(d)return 1}return r})(t.upper,e.upper,t.upperOpen,e.upperOpen)}function $a(t,e,n,r){t.subscribers.add(n),r.addEventListener("abort",function(){var a,d;t.subscribers.delete(n),t.subscribers.size===0&&(a=t,d=e,setTimeout(function(){a.subscribers.size===0&&Tt(d,a)},3e3))})}var Ia={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name;return f(f({},t),{transaction:function(n,r,a){var d,b,R=t.transaction(n,r,a);return r==="readwrite"&&(b=(d=new AbortController).signal,a=function(I){return function(){if(d.abort(),r==="readwrite"){for(var z=new Set,F=0,T=n;F<T.length;F++){var L=T[F],D=Ue["idb://".concat(e,"/").concat(L)];if(D){var j=t.table(L),M=D.optimisticOps.filter(function(Ct){return Ct.trans===R});if(R._explicit&&I&&R.mutatedParts)for(var U=0,q=Object.values(D.queries.query);U<q.length;U++)for(var Z=0,J=(bt=q[U]).slice();Z<J.length;Z++)Ar((ht=J[Z]).obsSet,R.mutatedParts)&&(Tt(bt,ht),ht.subscribers.forEach(function(Ct){return z.add(Ct)}));else if(0<M.length){D.optimisticOps=D.optimisticOps.filter(function(Ct){return Ct.trans!==R});for(var rt=0,ft=Object.values(D.queries.query);rt<ft.length;rt++)for(var bt,ht,gt,wt=0,yt=(bt=ft[rt]).slice();wt<yt.length;wt++)(ht=yt[wt]).res!=null&&R.mutatedParts&&(I&&!ht.dirty?(gt=Object.isFrozen(ht.res),gt=ki(ht.res,ht.req,M,j,ht,gt),ht.dirty?(Tt(bt,ht),ht.subscribers.forEach(function(Ct){return z.add(Ct)})):gt!==ht.res&&(ht.res=gt,ht.promise=_t.resolve({result:gt}))):(ht.dirty&&Tt(bt,ht),ht.subscribers.forEach(function(Ct){return z.add(Ct)})))}}}z.forEach(function(Ct){return Ct()})}}},R.addEventListener("abort",a(!1),{signal:b}),R.addEventListener("error",a(!1),{signal:b}),R.addEventListener("complete",a(!0),{signal:b})),R},table:function(n){var r=t.table(n),a=r.schema.primaryKey;return f(f({},r),{mutate:function(d){var b=St.trans;if(a.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return r.mutate(d);var R=Ue["idb://".concat(e,"/").concat(n)];return R?(b=r.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||$r(a,d).some(function(I){return I==null}))?(R.optimisticOps.push(d),d.mutatedParts&&qn(d.mutatedParts),b.then(function(I){0<I.numFailures&&(Tt(R.optimisticOps,d),(I=xi(0,d,I))&&R.optimisticOps.push(I),d.mutatedParts&&qn(d.mutatedParts))}),b.catch(function(){Tt(R.optimisticOps,d),d.mutatedParts&&qn(d.mutatedParts)})):b.then(function(I){var z=xi(0,f(f({},d),{values:d.values.map(function(F,T){var L;return I.failures[T]?F:(F=(L=a.keyPath)!==null&&L!==void 0&&L.includes(".")?Q(F):f({},F),X(F,a.keyPath,I.results[T]),F)})}),I);R.optimisticOps.push(z),queueMicrotask(function(){return d.mutatedParts&&qn(d.mutatedParts)})}),b):r.mutate(d)},query:function(d){if(!wi(St,r)||!_i("query",d))return r.query(d);var b=((z=St.trans)===null||z===void 0?void 0:z.db._options.cache)==="immutable",T=St,R=T.requery,I=T.signal,z=(function(j,M,U,q){var Z=Ue["idb://".concat(j,"/").concat(M)];if(!Z)return[];if(!(M=Z.queries[U]))return[null,!1,Z,null];var J=M[(q.query?q.query.index.name:null)||""];if(!J)return[null,!1,Z,null];switch(U){case"query":var rt=J.find(function(ft){return ft.req.limit===q.limit&&ft.req.values===q.values&&Si(ft.req.query.range,q.query.range)});return rt?[rt,!0,Z,J]:[J.find(function(ft){return("limit"in ft.req?ft.req.limit:1/0)>=q.limit&&(!q.values||ft.req.values)&&Ta(ft.req.query.range,q.query.range)}),!1,Z,J];case"count":return rt=J.find(function(ft){return Si(ft.req.query.range,q.query.range)}),[rt,!!rt,Z,J]}})(e,n,"query",d),F=z[0],T=z[1],L=z[2],D=z[3];return F&&T?F.obsSet=d.obsSet:(T=r.query(d).then(function(j){var M=j.result;if(F&&(F.res=M),b){for(var U=0,q=M.length;U<q;++U)Object.freeze(M[U]);Object.freeze(M)}else j.result=Q(M);return j}).catch(function(j){return D&&F&&Tt(D,F),Promise.reject(j)}),F={obsSet:d.obsSet,promise:T,subscribers:new Set,type:"query",req:d,dirty:!1},D?D.push(F):(D=[F],(L=L||(Ue["idb://".concat(e,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=D)),$a(F,D,R,I),F.promise.then(function(j){return{result:ki(j.result,d,L?.optimisticOps,r,F,b)}})}})}})}};function Hn(t,e){return new Proxy(t,{get:function(n,r,a){return r==="db"?e:Reflect.get(n,r,a)}})}var ke=(Yt.prototype.version=function(t){if(isNaN(t)||t<.1)throw new mt.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new mt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter(function(r){return r._cfg.version===t})[0];return n||(n=new this.Version(t),e.push(n),e.sort(xa),n.stores({}),this._state.autoSchema=!1,n)},Yt.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||St.letThrough||this._vip)?t():new _t(function(n,r){if(e._state.openComplete)return r(new mt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void r(new mt.DatabaseClosed);e.open().catch(Dt)}e._state.dbReadyPromise.then(n,r)}).then(t)},Yt.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,a=t.name;return a&&this.unuse({stack:e,name:a}),t=this._middlewares[e]||(this._middlewares[e]=[]),t.push({stack:e,create:n,level:r??10,name:a}),t.sort(function(d,b){return d.level-b.level}),this},Yt.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(function(a){return r?a.create!==r:!!n&&a.name!==n})),this},Yt.prototype.open=function(){var t=this;return Me(pe,function(){return Aa(t)})},Yt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,e=Qe.indexOf(this);if(0<=e&&Qe.splice(e,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new _t(function(n){t.dbReadyResolve=n}),t.openCanceller=new _t(function(n,r){t.cancelOpen=r}))},Yt.prototype.close=function(n){var e=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;e?(n.isBeingOpened&&n.cancelOpen(new mt.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new mt.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Yt.prototype.delete=function(t){var e=this;t===void 0&&(t={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new _t(function(a,d){function b(){e.close(t);var R=e._deps.indexedDB.deleteDatabase(e.name);R.onsuccess=Ht(function(){var I,z,F;I=e._deps,z=e.name,F=I.indexedDB,I=I.IDBKeyRange,kr(F)||z===Tn||xr(F,I).delete(z).catch(Dt),a()}),R.onerror=ye(d),R.onblocked=e._fireOnBlocked}if(n)throw new mt.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(b):b()})},Yt.prototype.backendDB=function(){return this.idbdb},Yt.prototype.isOpen=function(){return this.idbdb!==null},Yt.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},Yt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Yt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yt.prototype,"tables",{get:function(){var t=this;return h(this._allTables).map(function(e){return t._allTables[e]})},enumerable:!1,configurable:!0}),Yt.prototype.transaction=function(){var t=function(e,n,r){var a=arguments.length;if(a<2)throw new mt.InvalidArgument("Too few arguments");for(var d=new Array(a-1);--a;)d[a-1]=arguments[a];return r=d.pop(),[e,pt(d),r]}.apply(this,arguments);return this._transaction.apply(this,t)},Yt.prototype._transaction=function(t,e,n){var r=this,a=St.trans;a&&a.db===this&&t.indexOf("!")===-1||(a=null);var d,b,R=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(b=e.map(function(z){if(z=z instanceof r.Table?z.name:z,typeof z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return z}),t=="r"||t===hr)d=hr;else{if(t!="rw"&&t!=dr)throw new mt.InvalidArgument("Invalid transaction mode: "+t);d=dr}if(a){if(a.mode===hr&&d===dr){if(!R)throw new mt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&b.forEach(function(z){if(a&&a.storeNames.indexOf(z)===-1){if(!R)throw new mt.SubTransaction("Table "+z+" not included in parent transaction.");a=null}}),R&&a&&!a.active&&(a=null)}}catch(z){return a?a._promise(null,function(F,T){T(z)}):Vt(z)}var I=function z(F,T,L,D,j){return _t.resolve().then(function(){var M=St.transless||St,U=F._createTransaction(T,L,F._dbSchema,D);if(U.explicit=!0,M={trans:U,transless:M},D)U.idbtrans=D.idbtrans;else try{U.create(),U.idbtrans._explicit=!0,F._state.PR1398_maxLoop=3}catch(J){return J.name===Gt.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return z(F,T,L,null,j)})):Vt(J)}var q,Z=Y(j);return Z&&Je(),M=_t.follow(function(){var J;(q=j.call(U,U))&&(Z?(J=Pe.bind(null,null),q.then(J,J)):typeof q.next=="function"&&typeof q.throw=="function"&&(q=Pr(q)))},M),(q&&typeof q.then=="function"?_t.resolve(q).then(function(J){return U.active?J:Vt(new mt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):M.then(function(){return q})).then(function(J){return D&&U._resolve(),U._completion.then(function(){return J})}).catch(function(J){return U._reject(J),Vt(J)})})}.bind(null,this,d,b,a,n);return a?a._promise(d,I,"lock"):St.trans?Me(St.transless,function(){return r._whenReady(I)}):this._whenReady(I)},Yt.prototype.table=function(t){if(!x(this._allTables,t))throw new mt.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},Yt);function Yt(t,e){var n=this;this._middlewares={},this.verno=0;var r=Yt.dependencies;this._options=e=f({addons:Yt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},e),this._deps={indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange},r=e.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,d,b,R,I,z={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Dt,dbReadyPromise:null,cancelOpen:Dt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:e.autoOpen};z.dbReadyPromise=new _t(function(T){z.dbReadyResolve=T}),z.openCanceller=new _t(function(T,L){z.cancelOpen=L}),this._state=z,this.name=t,this.on=ln(this,"populate","blocked","versionchange","close",{ready:[ot,Dt]}),this.once=function(T,L){var D=function(){for(var j=[],M=0;M<arguments.length;M++)j[M]=arguments[M];n.on(T).unsubscribe(D),L.apply(n,j)};return n.on(T,D)},this.on.ready.subscribe=B(this.on.ready.subscribe,function(T){return function(L,D){Yt.vip(function(){var j,M=n._state;M.openComplete?(M.dbOpenError||_t.resolve().then(L),D&&T(L)):M.onReadyBeingFired?(M.onReadyBeingFired.push(L),D&&T(L)):(T(L),j=n,D||T(function U(){j.on.ready.unsubscribe(L),j.on.ready.unsubscribe(U)}))})}}),this.Collection=(a=this,cn(ma.prototype,function(q,U){this.db=a;var D=Qr,j=null;if(U)try{D=U()}catch(Z){j=Z}var M=q._ctx,U=M.table,q=U.hook.reading.fire;this._ctx={table:U,index:M.index,isPrimKey:!M.index||U.schema.primKey.keyPath&&M.index===U.schema.primKey.name,range:D,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:j,or:M.or,valueMapper:q!==ee?q:null}})),this.Table=(d=this,cn(ai.prototype,function(T,L,D){this.db=d,this._tx=D,this.name=T,this.schema=L,this.hook=d._allTables[T]?d._allTables[T].hook:ln(null,{creating:[G,Dt],reading:[s,ee],updating:[_,Dt],deleting:[O,Dt]})})),this.Transaction=(b=this,cn(ya.prototype,function(T,L,D,j,M){var U=this;T!=="readonly"&&L.forEach(function(q){q=(q=D[q])===null||q===void 0?void 0:q.yProps,q&&(L=L.concat(q.map(function(Z){return Z.updatesTable})))}),this.db=b,this.mode=T,this.storeNames=L,this.schema=D,this.chromeTransactionDurability=j,this.idbtrans=null,this.on=ln(this,"complete","error","abort"),this.parent=M||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _t(function(q,Z){U._resolve=q,U._reject=Z}),this._completion.then(function(){U.active=!1,U.on.complete.fire()},function(q){var Z=U.active;return U.active=!1,U.on.error.fire(q),U.parent?U.parent._reject(q):Z&&U.idbtrans&&U.idbtrans.abort(),Vt(q)})})),this.Version=(R=this,cn(Ca.prototype,function(T){this.db=R,this._cfg={version:T,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,cn(ci.prototype,function(T,L,D){if(this.db=I,this._ctx={table:T,index:L===":id"?null:L,or:D},this._cmp=this._ascending=Ft,this._descending=function(j,M){return Ft(M,j)},this._max=function(j,M){return 0<Ft(j,M)?j:M},this._min=function(j,M){return Ft(j,M)<0?j:M},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new mt.MissingAPI})),this.on("versionchange",function(T){0<T.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(T){!T.newVersion||T.newVersion<T.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(T.oldVersion/10))}),this._maxKey=fn(e.IDBKeyRange),this._createTransaction=function(T,L,D,j){return new n.Transaction(T,L,D,n._options.chromeTransactionDurability,j)},this._fireOnBlocked=function(T){n.on("blocked").fire(T),Qe.filter(function(L){return L.name===n.name&&L!==n&&!L._state.vcFired}).map(function(L){return L.on("versionchange").fire(T)})},this.use(Ra),this.use(Ia),this.use(Pa),this.use(Ea),this.use(Oa);var F=new Proxy(this,{get:function(T,L,D){if(L==="_vip")return!0;if(L==="table")return function(M){return Hn(n.table(M),F)};var j=Reflect.get(T,L,D);return j instanceof ai?Hn(j,F):L==="tables"?j.map(function(M){return Hn(M,F)}):L==="_createTransaction"?function(){return Hn(j.apply(this,arguments),F)}:j}});this.vip=F,r.forEach(function(T){return T(n)})}var Zn,me=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",za=(zr.prototype.subscribe=function(t,e,n){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:e,complete:n})},zr.prototype[me]=function(){return this},zr);function zr(t){this._subscribe=t}try{Zn={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Zn={indexedDB:null,IDBKeyRange:null}}function Ci(t){var e,n=!1,r=new za(function(a){var d=Y(t),b,R=!1,I={},z={},F={get closed(){return R},unsubscribe:function(){R||(R=!0,b&&b.abort(),T&&Ie.storagemutated.unsubscribe(D))}};a.start&&a.start(F);var T=!1,L=function(){return cr(j)},D=function(M){Kn(I,M),Ar(z,I)&&L()},j=function(){var M,U,q;!R&&Zn.indexedDB&&(I={},M={},b&&b.abort(),b=new AbortController,q=(function(Z){var J=Ge();try{d&&Je();var rt=Re(t,Z);return rt=d?rt.finally(Pe):rt}finally{J&&Xe()}})(U={subscr:M,signal:b.signal,requery:L,querier:t,trans:null}),Promise.resolve(q).then(function(Z){n=!0,e=Z,R||U.signal.aborted||(I={},(function(J){for(var rt in J)if(x(J,rt))return;return 1})(z=M)||T||(Ie(dn,D),T=!0),cr(function(){return!R&&a.next&&a.next(Z)}))},function(Z){n=!1,["DatabaseClosedError","AbortError"].includes(Z?.name)||R||cr(function(){R||a.error&&a.error(Z)})}))};return setTimeout(L,0),F});return r.hasValue=function(){return n},r.getValue=function(){return e},r}var Le=ke;function Dr(t){var e=ze;try{ze=!0,Ie.storagemutated.fire(t),Rr(t,!0)}finally{ze=e}}A(Le,f(f({},Kt),{delete:function(t){return new Le(t,{addons:[]}).delete()},exists:function(t){return new Le(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return e=Le.dependencies,n=e.indexedDB,e=e.IDBKeyRange,(kr(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==Tn})}):xr(n,e).toCollection().primaryKeys()).then(t)}catch{return Vt(new mt.MissingAPI)}var e,n},defineClass:function(){return function(t){m(this,t)}},ignoreTransaction:function(t){return St.trans?Me(St.transless,t):t()},vip:Sr,async:function(t){return function(){try{var e=Pr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:_t.resolve(e)}catch(n){return Vt(n)}}},spawn:function(t,e,n){try{var r=Pr(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:_t.resolve(r)}catch(a){return Vt(a)}},currentTransaction:{get:function(){return St.trans||null}},waitFor:function(t,e){return e=_t.resolve(typeof t=="function"?Le.ignoreTransaction(t):t).timeout(e||6e4),St.trans?St.trans.waitFor(e):e},Promise:_t,debug:{get:function(){return at},set:function(t){H(t)}},derive:v,extend:m,props:A,override:B,Events:ln,on:Ie,liveQuery:Ci,extendObservabilitySet:Kn,getByKeyPath:nt,setByKeyPath:X,delByKeyPath:function(t,e){typeof e=="string"?X(t,e,void 0):"length"in e&&[].map.call(e,function(n){X(t,n,void 0)})},shallowClone:lt,deepClone:Q,getObjectDiff:Tr,cmp:Ft,asap:K,minKey:-1/0,addons:[],connections:Qe,errnames:Gt,dependencies:Zn,cache:Ue,semVer:"4.2.1",version:"4.2.1".split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)})})),Le.maxKey=fn(Le.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ie(dn,function(t){ze||(t=new CustomEvent(mr,{detail:t}),ze=!0,dispatchEvent(t),ze=!1)}),addEventListener(mr,function(t){t=t.detail,ze||Dr(t)}));var rn,ze=!1,Ai=function(){};return typeof BroadcastChannel<"u"&&((Ai=function(){(rn=new BroadcastChannel(mr)).onmessage=function(t){return t.data&&Dr(t.data)}})(),typeof rn.unref=="function"&&rn.unref(),Ie(dn,function(t){ze||rn.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!ke.disableBfCache&&t.persisted){at&&console.debug("Dexie: handling persisted pagehide"),rn?.close();for(var e=0,n=Qe;e<n.length;e++)n[e].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!ke.disableBfCache&&t.persisted&&(at&&console.debug("Dexie: handling persisted pageshow"),Ai(),Dr({all:new re(-1/0,[[]])}))})),_t.rejectionMapper=function(t,e){return!t||t instanceof Et||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Zt[t.name]?t:(e=new Zt[t.name](e||t.message,t),"stack"in t&&E(e,"stack",{get:function(){return this.inner.stack}}),e)},H(at),f(ke,Object.freeze({__proto__:null,Dexie:ke,liveQuery:Ci,Entity:ti,cmp:Ft,PropModification:un,replacePrefix:function(t,e){return new un({replacePrefix:[t,e]})},add:function(t){return new un({add:t})},remove:function(t){return new un({remove:t})},default:ke,RangeSet:re,mergeRanges:gn,rangesOverlap:mi}),{default:ke}),ke})})(Xn)),Xn.exports}var yo=vo();const Ur=Gi(yo),Fi=Symbol.for("Dexie"),er=globalThis[Fi]||(globalThis[Fi]=Ur);if(Ur.semVer!==er.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ur.semVer} and ${er.semVer}`);const{liveQuery:fs,mergeRanges:ps,rangesOverlap:ms,RangeSet:gs,cmp:vs,Entity:ys,PropModification:bs,replacePrefix:ws,add:_s,remove:xs,DexieYProvider:ks}=er;class bo extends er{constructor(){super("AudioAnnotationDB"),this.version(1).stores({recordings:"id, title, createdAt, isAnnotated",annotations:"recordingId, completedAt, updatedAt"})}}const ge=new bo;async function Xi(y){const{v4:o}=await mo(async()=>{const{v4:c}=await import("./index-gGVEG6Gs.js");return{v4:c}},[]),i=o(),f={...y,id:i,createdAt:Date.now(),isAnnotated:!1};return await ge.recordings.add(f),i}async function Ji(){return await ge.recordings.orderBy("createdAt").reverse().toArray()}async function wo(y){return await ge.recordings.get(y)}async function _o(y,o){await ge.recordings.update(y,o)}async function xo(y){await ge.recordings.delete(y),await ge.annotations.delete(y)}async function Mr(y){await ge.annotations.put(y),await ge.recordings.update(y.recordingId,{isAnnotated:!0})}async function bn(y){return await ge.annotations.get(y)}async function ko(y){await ge.annotations.delete(y),await ge.recordings.update(y,{isAnnotated:!1})}async function So(){const y=await ge.recordings.toArray(),o=/^Untitled (\d+)$/,i=y.map(f=>f.title.match(o)?.[1]).filter(Boolean).map(Number);return i.length>0?Math.max(...i)+1:1}function Co(y){const o=y.lastIndexOf(".");return o===-1?y:y.substring(0,o)}async function Ao(y){return new Promise((o,i)=>{const f=new Audio,c=URL.createObjectURL(y);f.addEventListener("loadedmetadata",()=>{URL.revokeObjectURL(c),o(f.duration)}),f.addEventListener("error",()=>{URL.revokeObjectURL(c),i(new Error("Failed to load audio metadata"))}),f.src=c})}async function Eo(y){if(!y.type.startsWith("audio/"))throw new Error("File must be an audio file");const o=Co(y.name),i=await Ao(y);return{id:await Xi({title:o,audioBlob:y,duration:i,source:"upload"}),title:o,duration:i}}async function Oo(y){const o=Array.from(y),i=[];for(const f of o)try{const c=await Eo(f);i.push(c)}catch(c){console.error(`Failed to upload ${f.name}:`,c)}return i}function Ro(){return new Promise(y=>{const o=document.createElement("input");o.type="file",o.accept="audio/*",o.multiple=!0,o.addEventListener("change",()=>{y(o.files)}),o.addEventListener("cancel",()=>{y(null)}),o.click()})}function Yn(y){throw new Error('Could not dynamically require "'+y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fr={exports:{}};var Ni;function Po(){return Ni||(Ni=1,(function(y,o){(function(i){y.exports=i()})(function(){return(function i(f,c,u){function h(k,C){if(!c[k]){if(!f[k]){var x=typeof Yn=="function"&&Yn;if(!C&&x)return x(k,!0);if(l)return l(k,!0);var A=new Error("Cannot find module '"+k+"'");throw A.code="MODULE_NOT_FOUND",A}var g=c[k]={exports:{}};f[k][0].call(g.exports,function(E){var v=f[k][1][E];return h(v||E)},g,g.exports,i,f,c,u)}return c[k].exports}for(var l=typeof Yn=="function"&&Yn,m=0;m<u.length;m++)h(u[m]);return h})({1:[function(i,f,c){var u=i("./utils"),h=i("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(m){for(var k,C,x,A,g,E,v,S=[],w=0,P=m.length,B=P,W=u.getTypeOf(m)!=="string";w<m.length;)B=P-w,x=W?(k=m[w++],C=w<P?m[w++]:0,w<P?m[w++]:0):(k=m.charCodeAt(w++),C=w<P?m.charCodeAt(w++):0,w<P?m.charCodeAt(w++):0),A=k>>2,g=(3&k)<<4|C>>4,E=1<B?(15&C)<<2|x>>6:64,v=2<B?63&x:64,S.push(l.charAt(A)+l.charAt(g)+l.charAt(E)+l.charAt(v));return S.join("")},c.decode=function(m){var k,C,x,A,g,E,v=0,S=0,w="data:";if(m.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var P,B=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===l.charAt(64)&&B--,m.charAt(m.length-2)===l.charAt(64)&&B--,B%1!=0)throw new Error("Invalid base64 input, bad content length.");for(P=h.uint8array?new Uint8Array(0|B):new Array(0|B);v<m.length;)k=l.indexOf(m.charAt(v++))<<2|(A=l.indexOf(m.charAt(v++)))>>4,C=(15&A)<<4|(g=l.indexOf(m.charAt(v++)))>>2,x=(3&g)<<6|(E=l.indexOf(m.charAt(v++))),P[S++]=k,g!==64&&(P[S++]=C),E!==64&&(P[S++]=x);return P}},{"./support":30,"./utils":32}],2:[function(i,f,c){var u=i("./external"),h=i("./stream/DataWorker"),l=i("./stream/Crc32Probe"),m=i("./stream/DataLengthProbe");function k(C,x,A,g,E){this.compressedSize=C,this.uncompressedSize=x,this.crc32=A,this.compression=g,this.compressedContent=E}k.prototype={getContentWorker:function(){var C=new h(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),x=this;return C.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),C},getCompressedWorker:function(){return new h(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},k.createWorkerFrom=function(C,x,A){return C.pipe(new l).pipe(new m("uncompressedSize")).pipe(x.compressWorker(A)).pipe(new m("compressedSize")).withStreamInfo("compression",x)},f.exports=k},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,f,c){var u=i("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},c.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,f,c){var u=i("./utils"),h=(function(){for(var l,m=[],k=0;k<256;k++){l=k;for(var C=0;C<8;C++)l=1&l?3988292384^l>>>1:l>>>1;m[k]=l}return m})();f.exports=function(l,m){return l!==void 0&&l.length?u.getTypeOf(l)!=="string"?(function(k,C,x,A){var g=h,E=A+x;k^=-1;for(var v=A;v<E;v++)k=k>>>8^g[255&(k^C[v])];return-1^k})(0|m,l,l.length,0):(function(k,C,x,A){var g=h,E=A+x;k^=-1;for(var v=A;v<E;v++)k=k>>>8^g[255&(k^C.charCodeAt(v))];return-1^k})(0|m,l,l.length,0):0}},{"./utils":32}],5:[function(i,f,c){c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(i,f,c){var u=null;u=typeof Promise<"u"?Promise:i("lie"),f.exports={Promise:u}},{lie:37}],7:[function(i,f,c){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",h=i("pako"),l=i("./utils"),m=i("./stream/GenericWorker"),k=u?"uint8array":"array";function C(x,A){m.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=A,this.meta={}}c.magic="\b\0",l.inherits(C,m),C.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(k,x.data),!1)},C.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},C.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},C.prototype._createPako=function(){this._pako=new h[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(A){x.push({data:A,meta:x.meta})}},c.compressWorker=function(x){return new C("Deflate",x)},c.uncompressWorker=function(){return new C("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,f,c){function u(g,E){var v,S="";for(v=0;v<E;v++)S+=String.fromCharCode(255&g),g>>>=8;return S}function h(g,E,v,S,w,P){var B,W,K=g.file,nt=g.compression,X=P!==k.utf8encode,lt=l.transformTo("string",P(K.name)),tt=l.transformTo("string",k.utf8encode(K.name)),pt=K.comment,Rt=l.transformTo("string",P(pt)),$=l.transformTo("string",k.utf8encode(pt)),Q=tt.length!==K.name.length,p=$.length!==pt.length,it="",Pt="",ut="",Tt=K.dir,st=K.date,Ot={crc32:0,compressedSize:0,uncompressedSize:0};E&&!v||(Ot.crc32=g.crc32,Ot.compressedSize=g.compressedSize,Ot.uncompressedSize=g.uncompressedSize);var Y=0;E&&(Y|=8),X||!Q&&!p||(Y|=2048);var V=0,Et=0;Tt&&(V|=16),w==="UNIX"?(Et=798,V|=(function(vt,Lt){var Gt=vt;return vt||(Gt=Lt?16893:33204),(65535&Gt)<<16})(K.unixPermissions,Tt)):(Et=20,V|=(function(vt){return 63&(vt||0)})(K.dosPermissions)),B=st.getUTCHours(),B<<=6,B|=st.getUTCMinutes(),B<<=5,B|=st.getUTCSeconds()/2,W=st.getUTCFullYear()-1980,W<<=4,W|=st.getUTCMonth()+1,W<<=5,W|=st.getUTCDate(),Q&&(Pt=u(1,1)+u(C(lt),4)+tt,it+="up"+u(Pt.length,2)+Pt),p&&(ut=u(1,1)+u(C(Rt),4)+$,it+="uc"+u(ut.length,2)+ut);var xt="";return xt+=`
\0`,xt+=u(Y,2),xt+=nt.magic,xt+=u(B,2),xt+=u(W,2),xt+=u(Ot.crc32,4),xt+=u(Ot.compressedSize,4),xt+=u(Ot.uncompressedSize,4),xt+=u(lt.length,2),xt+=u(it.length,2),{fileRecord:x.LOCAL_FILE_HEADER+xt+lt+it,dirRecord:x.CENTRAL_FILE_HEADER+u(Et,2)+xt+u(Rt.length,2)+"\0\0\0\0"+u(V,4)+u(S,4)+lt+it+Rt}}var l=i("../utils"),m=i("../stream/GenericWorker"),k=i("../utf8"),C=i("../crc32"),x=i("../signature");function A(g,E,v,S){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=v,this.encodeFileName=S,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(A,m),A.prototype.push=function(g){var E=g.meta.percent||0,v=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,m.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:v?(E+100*(v-S-1))/v:100}}))},A.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var E=this.streamFiles&&!g.file.dir;if(E){var v=h(g,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},A.prototype.closedSource=function(g){this.accumulate=!1;var E=this.streamFiles&&!g.file.dir,v=h(g,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),E)this.push({data:(function(S){return x.DATA_DESCRIPTOR+u(S.crc32,4)+u(S.compressedSize,4)+u(S.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},A.prototype.flush=function(){for(var g=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var v=this.bytesWritten-g,S=(function(w,P,B,W,K){var nt=l.transformTo("string",K(W));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(w,2)+u(w,2)+u(P,4)+u(B,4)+u(nt.length,2)+nt})(this.dirRecords.length,v,g,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},A.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},A.prototype.registerPrevious=function(g){this._sources.push(g);var E=this;return g.on("data",function(v){E.processChunk(v)}),g.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),g.on("error",function(v){E.error(v)}),this},A.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},A.prototype.error=function(g){var E=this._sources;if(!m.prototype.error.call(this,g))return!1;for(var v=0;v<E.length;v++)try{E[v].error(g)}catch{}return!0},A.prototype.lock=function(){m.prototype.lock.call(this);for(var g=this._sources,E=0;E<g.length;E++)g[E].lock()},f.exports=A},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,f,c){var u=i("../compressions"),h=i("./ZipFileWorker");c.generateWorker=function(l,m,k){var C=new h(m.streamFiles,k,m.platform,m.encodeFileName),x=0;try{l.forEach(function(A,g){x++;var E=(function(P,B){var W=P||B,K=u[W];if(!K)throw new Error(W+" is not a valid compression method !");return K})(g.options.compression,m.compression),v=g.options.compressionOptions||m.compressionOptions||{},S=g.dir,w=g.date;g._compressWorker(E,v).withStreamInfo("file",{name:A,dir:S,date:w,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(C)}),C.entriesCount=x}catch(A){C.error(A)}return C}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,f,c){function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var h=new u;for(var l in this)typeof this[l]!="function"&&(h[l]=this[l]);return h}}(u.prototype=i("./object")).loadAsync=i("./load"),u.support=i("./support"),u.defaults=i("./defaults"),u.version="3.10.1",u.loadAsync=function(h,l){return new u().loadAsync(h,l)},u.external=i("./external"),f.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,f,c){var u=i("./utils"),h=i("./external"),l=i("./utf8"),m=i("./zipEntries"),k=i("./stream/Crc32Probe"),C=i("./nodejsUtils");function x(A){return new h.Promise(function(g,E){var v=A.decompressed.getContentWorker().pipe(new k);v.on("error",function(S){E(S)}).on("end",function(){v.streamInfo.crc32!==A.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}f.exports=function(A,g){var E=this;return g=u.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),C.isNode&&C.isStream(A)?h.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",A,!0,g.optimizedBinaryString,g.base64).then(function(v){var S=new m(g);return S.load(v),S}).then(function(v){var S=[h.Promise.resolve(v)],w=v.files;if(g.checkCRC32)for(var P=0;P<w.length;P++)S.push(x(w[P]));return h.Promise.all(S)}).then(function(v){for(var S=v.shift(),w=S.files,P=0;P<w.length;P++){var B=w[P],W=B.fileNameStr,K=u.resolve(B.fileNameStr);E.file(K,B.decompressed,{binary:!0,optimizedBinaryString:!0,date:B.date,dir:B.dir,comment:B.fileCommentStr.length?B.fileCommentStr:null,unixPermissions:B.unixPermissions,dosPermissions:B.dosPermissions,createFolders:g.createFolders}),B.dir||(E.file(K).unsafeOriginalName=W)}return S.zipComment.length&&(E.comment=S.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,f,c){var u=i("../utils"),h=i("../stream/GenericWorker");function l(m,k){h.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(k)}u.inherits(l,h),l.prototype._bindStream=function(m){var k=this;(this._stream=m).pause(),m.on("data",function(C){k.push({data:C,meta:{percent:0}})}).on("error",function(C){k.isPaused?this.generatedError=C:k.error(C)}).on("end",function(){k.isPaused?k._upstreamEnded=!0:k.end()})},l.prototype.pause=function(){return!!h.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},f.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,f,c){var u=i("readable-stream").Readable;function h(l,m,k){u.call(this,m),this._helper=l;var C=this;l.on("data",function(x,A){C.push(x)||C._helper.pause(),k&&k(A)}).on("error",function(x){C.emit("error",x)}).on("end",function(){C.push(null)})}i("../utils").inherits(h,u),h.prototype._read=function(){this._helper.resume()},f.exports=h},{"../utils":32,"readable-stream":16}],14:[function(i,f,c){f.exports={isNode:typeof Buffer<"u",newBufferFrom:function(u,h){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(u,h);if(typeof u=="number")throw new Error('The "data" argument must not be a number');return new Buffer(u,h)},allocBuffer:function(u){if(Buffer.alloc)return Buffer.alloc(u);var h=new Buffer(u);return h.fill(0),h},isBuffer:function(u){return Buffer.isBuffer(u)},isStream:function(u){return u&&typeof u.on=="function"&&typeof u.pause=="function"&&typeof u.resume=="function"}}},{}],15:[function(i,f,c){function u(K,nt,X){var lt,tt=l.getTypeOf(nt),pt=l.extend(X||{},C);pt.date=pt.date||new Date,pt.compression!==null&&(pt.compression=pt.compression.toUpperCase()),typeof pt.unixPermissions=="string"&&(pt.unixPermissions=parseInt(pt.unixPermissions,8)),pt.unixPermissions&&16384&pt.unixPermissions&&(pt.dir=!0),pt.dosPermissions&&16&pt.dosPermissions&&(pt.dir=!0),pt.dir&&(K=w(K)),pt.createFolders&&(lt=S(K))&&P.call(this,lt,!0);var Rt=tt==="string"&&pt.binary===!1&&pt.base64===!1;X&&X.binary!==void 0||(pt.binary=!Rt),(nt instanceof x&&nt.uncompressedSize===0||pt.dir||!nt||nt.length===0)&&(pt.base64=!1,pt.binary=!0,nt="",pt.compression="STORE",tt="string");var $=null;$=nt instanceof x||nt instanceof m?nt:E.isNode&&E.isStream(nt)?new v(K,nt):l.prepareContent(K,nt,pt.binary,pt.optimizedBinaryString,pt.base64);var Q=new A(K,$,pt);this.files[K]=Q}var h=i("./utf8"),l=i("./utils"),m=i("./stream/GenericWorker"),k=i("./stream/StreamHelper"),C=i("./defaults"),x=i("./compressedObject"),A=i("./zipObject"),g=i("./generate"),E=i("./nodejsUtils"),v=i("./nodejs/NodejsStreamInputAdapter"),S=function(K){K.slice(-1)==="/"&&(K=K.substring(0,K.length-1));var nt=K.lastIndexOf("/");return 0<nt?K.substring(0,nt):""},w=function(K){return K.slice(-1)!=="/"&&(K+="/"),K},P=function(K,nt){return nt=nt!==void 0?nt:C.createFolders,K=w(K),this.files[K]||u.call(this,K,null,{dir:!0,createFolders:nt}),this.files[K]};function B(K){return Object.prototype.toString.call(K)==="[object RegExp]"}var W={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(K){var nt,X,lt;for(nt in this.files)lt=this.files[nt],(X=nt.slice(this.root.length,nt.length))&&nt.slice(0,this.root.length)===this.root&&K(X,lt)},filter:function(K){var nt=[];return this.forEach(function(X,lt){K(X,lt)&&nt.push(lt)}),nt},file:function(K,nt,X){if(arguments.length!==1)return K=this.root+K,u.call(this,K,nt,X),this;if(B(K)){var lt=K;return this.filter(function(pt,Rt){return!Rt.dir&&lt.test(pt)})}var tt=this.files[this.root+K];return tt&&!tt.dir?tt:null},folder:function(K){if(!K)return this;if(B(K))return this.filter(function(tt,pt){return pt.dir&&K.test(tt)});var nt=this.root+K,X=P.call(this,nt),lt=this.clone();return lt.root=X.name,lt},remove:function(K){K=this.root+K;var nt=this.files[K];if(nt||(K.slice(-1)!=="/"&&(K+="/"),nt=this.files[K]),nt&&!nt.dir)delete this.files[K];else for(var X=this.filter(function(tt,pt){return pt.name.slice(0,K.length)===K}),lt=0;lt<X.length;lt++)delete this.files[X[lt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(K){var nt,X={};try{if((X=l.extend(K||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:h.utf8encode})).type=X.type.toLowerCase(),X.compression=X.compression.toUpperCase(),X.type==="binarystring"&&(X.type="string"),!X.type)throw new Error("No output type specified.");l.checkSupport(X.type),X.platform!=="darwin"&&X.platform!=="freebsd"&&X.platform!=="linux"&&X.platform!=="sunos"||(X.platform="UNIX"),X.platform==="win32"&&(X.platform="DOS");var lt=X.comment||this.comment||"";nt=g.generateWorker(this,X,lt)}catch(tt){(nt=new m("error")).error(tt)}return new k(nt,X.type||"string",X.mimeType)},generateAsync:function(K,nt){return this.generateInternalStream(K).accumulate(nt)},generateNodeStream:function(K,nt){return(K=K||{}).type||(K.type="nodebuffer"),this.generateInternalStream(K).toNodejsStream(nt)}};f.exports=W},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,f,c){f.exports=i("stream")},{stream:void 0}],17:[function(i,f,c){var u=i("./DataReader");function h(l){u.call(this,l);for(var m=0;m<this.data.length;m++)l[m]=255&l[m]}i("../utils").inherits(h,u),h.prototype.byteAt=function(l){return this.data[this.zero+l]},h.prototype.lastIndexOfSignature=function(l){for(var m=l.charCodeAt(0),k=l.charCodeAt(1),C=l.charCodeAt(2),x=l.charCodeAt(3),A=this.length-4;0<=A;--A)if(this.data[A]===m&&this.data[A+1]===k&&this.data[A+2]===C&&this.data[A+3]===x)return A-this.zero;return-1},h.prototype.readAndCheckSignature=function(l){var m=l.charCodeAt(0),k=l.charCodeAt(1),C=l.charCodeAt(2),x=l.charCodeAt(3),A=this.readData(4);return m===A[0]&&k===A[1]&&C===A[2]&&x===A[3]},h.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},f.exports=h},{"../utils":32,"./DataReader":18}],18:[function(i,f,c){var u=i("../utils");function h(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}h.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var m,k=0;for(this.checkOffset(l),m=this.index+l-1;m>=this.index;m--)k=(k<<8)+this.byteAt(m);return this.index+=l,k},readString:function(l){return u.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},f.exports=h},{"../utils":32}],19:[function(i,f,c){var u=i("./Uint8ArrayReader");function h(l){u.call(this,l)}i("../utils").inherits(h,u),h.prototype.readData=function(l){this.checkOffset(l);var m=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},f.exports=h},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,f,c){var u=i("./DataReader");function h(l){u.call(this,l)}i("../utils").inherits(h,u),h.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},h.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},h.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},h.prototype.readData=function(l){this.checkOffset(l);var m=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},f.exports=h},{"../utils":32,"./DataReader":18}],21:[function(i,f,c){var u=i("./ArrayReader");function h(l){u.call(this,l)}i("../utils").inherits(h,u),h.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},f.exports=h},{"../utils":32,"./ArrayReader":17}],22:[function(i,f,c){var u=i("../utils"),h=i("../support"),l=i("./ArrayReader"),m=i("./StringReader"),k=i("./NodeBufferReader"),C=i("./Uint8ArrayReader");f.exports=function(x){var A=u.getTypeOf(x);return u.checkSupport(A),A!=="string"||h.uint8array?A==="nodebuffer"?new k(x):h.uint8array?new C(u.transformTo("uint8array",x)):new l(u.transformTo("array",x)):new m(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,f,c){c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,f,c){var u=i("./GenericWorker"),h=i("../utils");function l(m){u.call(this,"ConvertWorker to "+m),this.destType=m}h.inherits(l,u),l.prototype.processChunk=function(m){this.push({data:h.transformTo(this.destType,m.data),meta:m.meta})},f.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(i,f,c){var u=i("./GenericWorker"),h=i("../crc32");function l(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(l,u),l.prototype.processChunk=function(m){this.streamInfo.crc32=h(m.data,this.streamInfo.crc32||0),this.push(m)},f.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,f,c){var u=i("../utils"),h=i("./GenericWorker");function l(m){h.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}u.inherits(l,h),l.prototype.processChunk=function(m){if(m){var k=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=k+m.data.length}h.prototype.processChunk.call(this,m)},f.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(i,f,c){var u=i("../utils"),h=i("./GenericWorker");function l(m){h.call(this,"DataWorker");var k=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(C){k.dataIsReady=!0,k.data=C,k.max=C&&C.length||0,k.type=u.getTypeOf(C),k.isPaused||k._tickAndRepeat()},function(C){k.error(C)})}u.inherits(l,h),l.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,k=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,k);break;case"uint8array":m=this.data.subarray(this.index,k);break;case"array":case"nodebuffer":m=this.data.slice(this.index,k)}return this.index=k,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},f.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(i,f,c){function u(h){this.name=h||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(h){this.emit("data",h)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(h){this.emit("error",h)}return!0},error:function(h){return!this.isFinished&&(this.isPaused?this.generatedError=h:(this.isFinished=!0,this.emit("error",h),this.previous&&this.previous.error(h),this.cleanUp()),!0)},on:function(h,l){return this._listeners[h].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(h,l){if(this._listeners[h])for(var m=0;m<this._listeners[h].length;m++)this._listeners[h][m].call(this,l)},pipe:function(h){return h.registerPrevious(this)},registerPrevious:function(h){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=h.streamInfo,this.mergeStreamInfo(),this.previous=h;var l=this;return h.on("data",function(m){l.processChunk(m)}),h.on("end",function(){l.end()}),h.on("error",function(m){l.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var h=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),h=!0),this.previous&&this.previous.resume(),!h},flush:function(){},processChunk:function(h){this.push(h)},withStreamInfo:function(h,l){return this.extraStreamInfo[h]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var h in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,h)&&(this.streamInfo[h]=this.extraStreamInfo[h])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var h="Worker "+this.name;return this.previous?this.previous+" -> "+h:h}},f.exports=u},{}],29:[function(i,f,c){var u=i("../utils"),h=i("./ConvertWorker"),l=i("./GenericWorker"),m=i("../base64"),k=i("../support"),C=i("../external"),x=null;if(k.nodestream)try{x=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function A(E,v){return new C.Promise(function(S,w){var P=[],B=E._internalType,W=E._outputType,K=E._mimeType;E.on("data",function(nt,X){P.push(nt),v&&v(X)}).on("error",function(nt){P=[],w(nt)}).on("end",function(){try{var nt=(function(X,lt,tt){switch(X){case"blob":return u.newBlob(u.transformTo("arraybuffer",lt),tt);case"base64":return m.encode(lt);default:return u.transformTo(X,lt)}})(W,(function(X,lt){var tt,pt=0,Rt=null,$=0;for(tt=0;tt<lt.length;tt++)$+=lt[tt].length;switch(X){case"string":return lt.join("");case"array":return Array.prototype.concat.apply([],lt);case"uint8array":for(Rt=new Uint8Array($),tt=0;tt<lt.length;tt++)Rt.set(lt[tt],pt),pt+=lt[tt].length;return Rt;case"nodebuffer":return Buffer.concat(lt);default:throw new Error("concat : unsupported type '"+X+"'")}})(B,P),K);S(nt)}catch(X){w(X)}P=[]}).resume()})}function g(E,v,S){var w=v;switch(v){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=v,this._mimeType=S,u.checkSupport(w),this._worker=E.pipe(new h(w)),E.lock()}catch(P){this._worker=new l("error"),this._worker.error(P)}}g.prototype={accumulate:function(E){return A(this,E)},on:function(E,v){var S=this;return E==="data"?this._worker.on(E,function(w){v.call(S,w.data,w.meta)}):this._worker.on(E,function(){u.delay(v,arguments,S)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(u.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},E)}},f.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,f,c){if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",c.nodebuffer=typeof Buffer<"u",c.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")c.blob=!1;else{var u=new ArrayBuffer(0);try{c.blob=new Blob([u],{type:"application/zip"}).size===0}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);h.append(u),c.blob=h.getBlob("application/zip").size===0}catch{c.blob=!1}}}try{c.nodestream=!!i("readable-stream").Readable}catch{c.nodestream=!1}},{"readable-stream":16}],31:[function(i,f,c){for(var u=i("./utils"),h=i("./support"),l=i("./nodejsUtils"),m=i("./stream/GenericWorker"),k=new Array(256),C=0;C<256;C++)k[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;k[254]=k[254]=1;function x(){m.call(this,"utf-8 decode"),this.leftOver=null}function A(){m.call(this,"utf-8 encode")}c.utf8encode=function(g){return h.nodebuffer?l.newBufferFrom(g,"utf-8"):(function(E){var v,S,w,P,B,W=E.length,K=0;for(P=0;P<W;P++)(64512&(S=E.charCodeAt(P)))==55296&&P+1<W&&(64512&(w=E.charCodeAt(P+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),P++),K+=S<128?1:S<2048?2:S<65536?3:4;for(v=h.uint8array?new Uint8Array(K):new Array(K),P=B=0;B<K;P++)(64512&(S=E.charCodeAt(P)))==55296&&P+1<W&&(64512&(w=E.charCodeAt(P+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),P++),S<128?v[B++]=S:(S<2048?v[B++]=192|S>>>6:(S<65536?v[B++]=224|S>>>12:(v[B++]=240|S>>>18,v[B++]=128|S>>>12&63),v[B++]=128|S>>>6&63),v[B++]=128|63&S);return v})(g)},c.utf8decode=function(g){return h.nodebuffer?u.transformTo("nodebuffer",g).toString("utf-8"):(function(E){var v,S,w,P,B=E.length,W=new Array(2*B);for(v=S=0;v<B;)if((w=E[v++])<128)W[S++]=w;else if(4<(P=k[w]))W[S++]=65533,v+=P-1;else{for(w&=P===2?31:P===3?15:7;1<P&&v<B;)w=w<<6|63&E[v++],P--;1<P?W[S++]=65533:w<65536?W[S++]=w:(w-=65536,W[S++]=55296|w>>10&1023,W[S++]=56320|1023&w)}return W.length!==S&&(W.subarray?W=W.subarray(0,S):W.length=S),u.applyFromCharCode(W)})(g=u.transformTo(h.uint8array?"uint8array":"array",g))},u.inherits(x,m),x.prototype.processChunk=function(g){var E=u.transformTo(h.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var v=E;(E=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),E.set(v,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var S=(function(P,B){var W;for((B=B||P.length)>P.length&&(B=P.length),W=B-1;0<=W&&(192&P[W])==128;)W--;return W<0||W===0?B:W+k[P[W]]>B?W:B})(E),w=E;S!==E.length&&(h.uint8array?(w=E.subarray(0,S),this.leftOver=E.subarray(S,E.length)):(w=E.slice(0,S),this.leftOver=E.slice(S,E.length))),this.push({data:c.utf8decode(w),meta:g.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=x,u.inherits(A,m),A.prototype.processChunk=function(g){this.push({data:c.utf8encode(g.data),meta:g.meta})},c.Utf8EncodeWorker=A},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,f,c){var u=i("./support"),h=i("./base64"),l=i("./nodejsUtils"),m=i("./external");function k(v){return v}function C(v,S){for(var w=0;w<v.length;++w)S[w]=255&v.charCodeAt(w);return S}i("setimmediate"),c.newBlob=function(v,S){c.checkSupport("blob");try{return new Blob([v],{type:S})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(v),w.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(v,S,w){var P=[],B=0,W=v.length;if(W<=w)return String.fromCharCode.apply(null,v);for(;B<W;)S==="array"||S==="nodebuffer"?P.push(String.fromCharCode.apply(null,v.slice(B,Math.min(B+w,W)))):P.push(String.fromCharCode.apply(null,v.subarray(B,Math.min(B+w,W)))),B+=w;return P.join("")},stringifyByChar:function(v){for(var S="",w=0;w<v.length;w++)S+=String.fromCharCode(v[w]);return S},applyCanBeUsed:{uint8array:(function(){try{return u.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return u.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function A(v){var S=65536,w=c.getTypeOf(v),P=!0;if(w==="uint8array"?P=x.applyCanBeUsed.uint8array:w==="nodebuffer"&&(P=x.applyCanBeUsed.nodebuffer),P)for(;1<S;)try{return x.stringifyByChunk(v,w,S)}catch{S=Math.floor(S/2)}return x.stringifyByChar(v)}function g(v,S){for(var w=0;w<v.length;w++)S[w]=v[w];return S}c.applyFromCharCode=A;var E={};E.string={string:k,array:function(v){return C(v,new Array(v.length))},arraybuffer:function(v){return E.string.uint8array(v).buffer},uint8array:function(v){return C(v,new Uint8Array(v.length))},nodebuffer:function(v){return C(v,l.allocBuffer(v.length))}},E.array={string:A,array:k,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(v)}},E.arraybuffer={string:function(v){return A(new Uint8Array(v))},array:function(v){return g(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:k,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(new Uint8Array(v))}},E.uint8array={string:A,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:k,nodebuffer:function(v){return l.newBufferFrom(v)}},E.nodebuffer={string:A,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return E.nodebuffer.uint8array(v).buffer},uint8array:function(v){return g(v,new Uint8Array(v.length))},nodebuffer:k},c.transformTo=function(v,S){if(S=S||"",!v)return S;c.checkSupport(v);var w=c.getTypeOf(S);return E[w][v](S)},c.resolve=function(v){for(var S=v.split("/"),w=[],P=0;P<S.length;P++){var B=S[P];B==="."||B===""&&P!==0&&P!==S.length-1||(B===".."?w.pop():w.push(B))}return w.join("/")},c.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":u.nodebuffer&&l.isBuffer(v)?"nodebuffer":u.uint8array&&v instanceof Uint8Array?"uint8array":u.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(v){if(!u[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(v){var S,w,P="";for(w=0;w<(v||"").length;w++)P+="\\x"+((S=v.charCodeAt(w))<16?"0":"")+S.toString(16).toUpperCase();return P},c.delay=function(v,S,w){setImmediate(function(){v.apply(w||null,S||[])})},c.inherits=function(v,S){function w(){}w.prototype=S.prototype,v.prototype=new w},c.extend=function(){var v,S,w={};for(v=0;v<arguments.length;v++)for(S in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],S)&&w[S]===void 0&&(w[S]=arguments[v][S]);return w},c.prepareContent=function(v,S,w,P,B){return m.Promise.resolve(S).then(function(W){return u.blob&&(W instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(W))!==-1)&&typeof FileReader<"u"?new m.Promise(function(K,nt){var X=new FileReader;X.onload=function(lt){K(lt.target.result)},X.onerror=function(lt){nt(lt.target.error)},X.readAsArrayBuffer(W)}):W}).then(function(W){var K=c.getTypeOf(W);return K?(K==="arraybuffer"?W=c.transformTo("uint8array",W):K==="string"&&(B?W=h.decode(W):w&&P!==!0&&(W=(function(nt){return C(nt,u.uint8array?new Uint8Array(nt.length):new Array(nt.length))})(W))),W):m.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,f,c){var u=i("./reader/readerFor"),h=i("./utils"),l=i("./signature"),m=i("./zipEntry"),k=i("./support");function C(x){this.files=[],this.loadOptions=x}C.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var A=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+h.pretty(A)+", expected "+h.pretty(x)+")")}},isSignature:function(x,A){var g=this.reader.index;this.reader.setIndex(x);var E=this.reader.readString(4)===A;return this.reader.setIndex(g),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),A=k.uint8array?"uint8array":"array",g=h.transformTo(A,x);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,A,g,E=this.zip64EndOfCentralSize-44;0<E;)x=this.reader.readInt(2),A=this.reader.readInt(4),g=this.reader.readData(A),this.zip64ExtensibleData[x]={id:x,length:A,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,A;for(x=0;x<this.files.length;x++)A=this.files[x],this.reader.setIndex(A.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),A.readLocalPart(this.reader),A.handleUTF8(),A.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(x=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var A=x;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===h.MAX_VALUE_16BITS||this.diskWithCentralDirStart===h.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===h.MAX_VALUE_16BITS||this.centralDirRecords===h.MAX_VALUE_16BITS||this.centralDirSize===h.MAX_VALUE_32BITS||this.centralDirOffset===h.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var E=A-g;if(0<E)this.isSignature(A,l.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(x){this.reader=u(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},f.exports=C},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,f,c){var u=i("./reader/readerFor"),h=i("./utils"),l=i("./compressedObject"),m=i("./crc32"),k=i("./utf8"),C=i("./compressions"),x=i("./support");function A(g,E){this.options=g,this.loadOptions=E}A.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var E,v;if(g.skip(22),this.fileNameLength=g.readInt(2),v=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=(function(S){for(var w in C)if(Object.prototype.hasOwnProperty.call(C,w)&&C[w].magic===S)return C[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+h.pretty(this.compressionMethod)+" unknown (inner file : "+h.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,E,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var E=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(E),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=u(this.extraFields[1].value);this.uncompressedSize===h.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===h.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===h.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===h.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var E,v,S,w=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<w;)E=g.readInt(2),v=g.readInt(2),S=g.readData(v),this.extraFields[E]={id:E,length:v,value:S};g.setIndex(w)},handleUTF8:function(){var g=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=k.utf8decode(this.fileName),this.fileCommentStr=k.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var v=h.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var w=h.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var E=u(g.value);return E.readInt(1)!==1||m(this.fileName)!==E.readInt(4)?null:k.utf8decode(E.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var E=u(g.value);return E.readInt(1)!==1||m(this.fileComment)!==E.readInt(4)?null:k.utf8decode(E.readData(g.length-5))}return null}},f.exports=A},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,f,c){function u(E,v,S){this.name=E,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=v,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var h=i("./stream/StreamHelper"),l=i("./stream/DataWorker"),m=i("./utf8"),k=i("./compressedObject"),C=i("./stream/GenericWorker");u.prototype={internalStream:function(E){var v=null,S="string";try{if(!E)throw new Error("No output type specified.");var w=(S=E.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),v=this._decompressWorker();var P=!this._dataBinary;P&&!w&&(v=v.pipe(new m.Utf8EncodeWorker)),!P&&w&&(v=v.pipe(new m.Utf8DecodeWorker))}catch(B){(v=new C("error")).error(B)}return new h(v,S,"")},async:function(E,v){return this.internalStream(E).accumulate(v)},nodeStream:function(E,v){return this.internalStream(E||"nodebuffer").toNodejsStream(v)},_compressWorker:function(E,v){if(this._data instanceof k&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new m.Utf8EncodeWorker)),k.createWorkerFrom(S,E,v)},_decompressWorker:function(){return this._data instanceof k?this._data.getContentWorker():this._data instanceof C?this._data:new l(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],A=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<x.length;g++)u.prototype[x[g]]=A;f.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,f,c){(function(u){var h,l,m=u.MutationObserver||u.WebKitMutationObserver;if(m){var k=0,C=new m(E),x=u.document.createTextNode("");C.observe(x,{characterData:!0}),h=function(){x.data=k=++k%2}}else if(u.setImmediate||u.MessageChannel===void 0)h="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var v=u.document.createElement("script");v.onreadystatechange=function(){E(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},u.document.documentElement.appendChild(v)}:function(){setTimeout(E,0)};else{var A=new u.MessageChannel;A.port1.onmessage=E,h=function(){A.port2.postMessage(0)}}var g=[];function E(){var v,S;l=!0;for(var w=g.length;w;){for(S=g,g=[],v=-1;++v<w;)S[v]();w=g.length}l=!1}f.exports=function(v){g.push(v)!==1||l||h()}}).call(this,typeof Se<"u"?Se:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,f,c){var u=i("immediate");function h(){}var l={},m=["REJECTED"],k=["FULFILLED"],C=["PENDING"];function x(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=C,this.queue=[],this.outcome=void 0,w!==h&&v(this,w)}function A(w,P,B){this.promise=w,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}function g(w,P,B){u(function(){var W;try{W=P(B)}catch(K){return l.reject(w,K)}W===w?l.reject(w,new TypeError("Cannot resolve promise with itself")):l.resolve(w,W)})}function E(w){var P=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof P=="function")return function(){P.apply(w,arguments)}}function v(w,P){var B=!1;function W(X){B||(B=!0,l.reject(w,X))}function K(X){B||(B=!0,l.resolve(w,X))}var nt=S(function(){P(K,W)});nt.status==="error"&&W(nt.value)}function S(w,P){var B={};try{B.value=w(P),B.status="success"}catch(W){B.status="error",B.value=W}return B}(f.exports=x).prototype.finally=function(w){if(typeof w!="function")return this;var P=this.constructor;return this.then(function(B){return P.resolve(w()).then(function(){return B})},function(B){return P.resolve(w()).then(function(){throw B})})},x.prototype.catch=function(w){return this.then(null,w)},x.prototype.then=function(w,P){if(typeof w!="function"&&this.state===k||typeof P!="function"&&this.state===m)return this;var B=new this.constructor(h);return this.state!==C?g(B,this.state===k?w:P,this.outcome):this.queue.push(new A(B,w,P)),B},A.prototype.callFulfilled=function(w){l.resolve(this.promise,w)},A.prototype.otherCallFulfilled=function(w){g(this.promise,this.onFulfilled,w)},A.prototype.callRejected=function(w){l.reject(this.promise,w)},A.prototype.otherCallRejected=function(w){g(this.promise,this.onRejected,w)},l.resolve=function(w,P){var B=S(E,P);if(B.status==="error")return l.reject(w,B.value);var W=B.value;if(W)v(w,W);else{w.state=k,w.outcome=P;for(var K=-1,nt=w.queue.length;++K<nt;)w.queue[K].callFulfilled(P)}return w},l.reject=function(w,P){w.state=m,w.outcome=P;for(var B=-1,W=w.queue.length;++B<W;)w.queue[B].callRejected(P);return w},x.resolve=function(w){return w instanceof this?w:l.resolve(new this(h),w)},x.reject=function(w){var P=new this(h);return l.reject(P,w)},x.all=function(w){var P=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=w.length,W=!1;if(!B)return this.resolve([]);for(var K=new Array(B),nt=0,X=-1,lt=new this(h);++X<B;)tt(w[X],X);return lt;function tt(pt,Rt){P.resolve(pt).then(function($){K[Rt]=$,++nt!==B||W||(W=!0,l.resolve(lt,K))},function($){W||(W=!0,l.reject(lt,$))})}},x.race=function(w){var P=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=w.length,W=!1;if(!B)return this.resolve([]);for(var K=-1,nt=new this(h);++K<B;)X=w[K],P.resolve(X).then(function(lt){W||(W=!0,l.resolve(nt,lt))},function(lt){W||(W=!0,l.reject(nt,lt))});var X;return nt}},{immediate:36}],38:[function(i,f,c){var u={};(0,i("./lib/utils/common").assign)(u,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),f.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,f,c){var u=i("./zlib/deflate"),h=i("./utils/common"),l=i("./utils/strings"),m=i("./zlib/messages"),k=i("./zlib/zstream"),C=Object.prototype.toString,x=0,A=-1,g=0,E=8;function v(w){if(!(this instanceof v))return new v(w);this.options=h.assign({level:A,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},w||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var B=u.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(B!==x)throw new Error(m[B]);if(P.header&&u.deflateSetHeader(this.strm,P.header),P.dictionary){var W;if(W=typeof P.dictionary=="string"?l.string2buf(P.dictionary):C.call(P.dictionary)==="[object ArrayBuffer]"?new Uint8Array(P.dictionary):P.dictionary,(B=u.deflateSetDictionary(this.strm,W))!==x)throw new Error(m[B]);this._dict_set=!0}}function S(w,P){var B=new v(P);if(B.push(w,!0),B.err)throw B.msg||m[B.err];return B.result}v.prototype.push=function(w,P){var B,W,K=this.strm,nt=this.options.chunkSize;if(this.ended)return!1;W=P===~~P?P:P===!0?4:0,typeof w=="string"?K.input=l.string2buf(w):C.call(w)==="[object ArrayBuffer]"?K.input=new Uint8Array(w):K.input=w,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new h.Buf8(nt),K.next_out=0,K.avail_out=nt),(B=u.deflate(K,W))!==1&&B!==x)return this.onEnd(B),!(this.ended=!0);K.avail_out!==0&&(K.avail_in!==0||W!==4&&W!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(h.shrinkBuf(K.output,K.next_out))):this.onData(h.shrinkBuf(K.output,K.next_out)))}while((0<K.avail_in||K.avail_out===0)&&B!==1);return W===4?(B=u.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===x):W!==2||(this.onEnd(x),!(K.avail_out=0))},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},c.Deflate=v,c.deflate=S,c.deflateRaw=function(w,P){return(P=P||{}).raw=!0,S(w,P)},c.gzip=function(w,P){return(P=P||{}).gzip=!0,S(w,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,f,c){var u=i("./zlib/inflate"),h=i("./utils/common"),l=i("./utils/strings"),m=i("./zlib/constants"),k=i("./zlib/messages"),C=i("./zlib/zstream"),x=i("./zlib/gzheader"),A=Object.prototype.toString;function g(v){if(!(this instanceof g))return new g(v);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},v||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||v&&v.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var w=u.inflateInit2(this.strm,S.windowBits);if(w!==m.Z_OK)throw new Error(k[w]);this.header=new x,u.inflateGetHeader(this.strm,this.header)}function E(v,S){var w=new g(S);if(w.push(v,!0),w.err)throw w.msg||k[w.err];return w.result}g.prototype.push=function(v,S){var w,P,B,W,K,nt,X=this.strm,lt=this.options.chunkSize,tt=this.options.dictionary,pt=!1;if(this.ended)return!1;P=S===~~S?S:S===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof v=="string"?X.input=l.binstring2buf(v):A.call(v)==="[object ArrayBuffer]"?X.input=new Uint8Array(v):X.input=v,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new h.Buf8(lt),X.next_out=0,X.avail_out=lt),(w=u.inflate(X,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&tt&&(nt=typeof tt=="string"?l.string2buf(tt):A.call(tt)==="[object ArrayBuffer]"?new Uint8Array(tt):tt,w=u.inflateSetDictionary(this.strm,nt)),w===m.Z_BUF_ERROR&&pt===!0&&(w=m.Z_OK,pt=!1),w!==m.Z_STREAM_END&&w!==m.Z_OK)return this.onEnd(w),!(this.ended=!0);X.next_out&&(X.avail_out!==0&&w!==m.Z_STREAM_END&&(X.avail_in!==0||P!==m.Z_FINISH&&P!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(B=l.utf8border(X.output,X.next_out),W=X.next_out-B,K=l.buf2string(X.output,B),X.next_out=W,X.avail_out=lt-W,W&&h.arraySet(X.output,X.output,B,W,0),this.onData(K)):this.onData(h.shrinkBuf(X.output,X.next_out)))),X.avail_in===0&&X.avail_out===0&&(pt=!0)}while((0<X.avail_in||X.avail_out===0)&&w!==m.Z_STREAM_END);return w===m.Z_STREAM_END&&(P=m.Z_FINISH),P===m.Z_FINISH?(w=u.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===m.Z_OK):P!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(X.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},c.Inflate=g,c.inflate=E,c.inflateRaw=function(v,S){return(S=S||{}).raw=!0,E(v,S)},c.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,f,c){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";c.assign=function(m){for(var k=Array.prototype.slice.call(arguments,1);k.length;){var C=k.shift();if(C){if(typeof C!="object")throw new TypeError(C+"must be non-object");for(var x in C)C.hasOwnProperty(x)&&(m[x]=C[x])}}return m},c.shrinkBuf=function(m,k){return m.length===k?m:m.subarray?m.subarray(0,k):(m.length=k,m)};var h={arraySet:function(m,k,C,x,A){if(k.subarray&&m.subarray)m.set(k.subarray(C,C+x),A);else for(var g=0;g<x;g++)m[A+g]=k[C+g]},flattenChunks:function(m){var k,C,x,A,g,E;for(k=x=0,C=m.length;k<C;k++)x+=m[k].length;for(E=new Uint8Array(x),k=A=0,C=m.length;k<C;k++)g=m[k],E.set(g,A),A+=g.length;return E}},l={arraySet:function(m,k,C,x,A){for(var g=0;g<x;g++)m[A+g]=k[C+g]},flattenChunks:function(m){return[].concat.apply([],m)}};c.setTyped=function(m){m?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,h)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,l))},c.setTyped(u)},{}],42:[function(i,f,c){var u=i("./common"),h=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{h=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var m=new u.Buf8(256),k=0;k<256;k++)m[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;function C(x,A){if(A<65537&&(x.subarray&&l||!x.subarray&&h))return String.fromCharCode.apply(null,u.shrinkBuf(x,A));for(var g="",E=0;E<A;E++)g+=String.fromCharCode(x[E]);return g}m[254]=m[254]=1,c.string2buf=function(x){var A,g,E,v,S,w=x.length,P=0;for(v=0;v<w;v++)(64512&(g=x.charCodeAt(v)))==55296&&v+1<w&&(64512&(E=x.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(E-56320),v++),P+=g<128?1:g<2048?2:g<65536?3:4;for(A=new u.Buf8(P),v=S=0;S<P;v++)(64512&(g=x.charCodeAt(v)))==55296&&v+1<w&&(64512&(E=x.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(E-56320),v++),g<128?A[S++]=g:(g<2048?A[S++]=192|g>>>6:(g<65536?A[S++]=224|g>>>12:(A[S++]=240|g>>>18,A[S++]=128|g>>>12&63),A[S++]=128|g>>>6&63),A[S++]=128|63&g);return A},c.buf2binstring=function(x){return C(x,x.length)},c.binstring2buf=function(x){for(var A=new u.Buf8(x.length),g=0,E=A.length;g<E;g++)A[g]=x.charCodeAt(g);return A},c.buf2string=function(x,A){var g,E,v,S,w=A||x.length,P=new Array(2*w);for(g=E=0;g<w;)if((v=x[g++])<128)P[E++]=v;else if(4<(S=m[v]))P[E++]=65533,g+=S-1;else{for(v&=S===2?31:S===3?15:7;1<S&&g<w;)v=v<<6|63&x[g++],S--;1<S?P[E++]=65533:v<65536?P[E++]=v:(v-=65536,P[E++]=55296|v>>10&1023,P[E++]=56320|1023&v)}return C(P,E)},c.utf8border=function(x,A){var g;for((A=A||x.length)>x.length&&(A=x.length),g=A-1;0<=g&&(192&x[g])==128;)g--;return g<0||g===0?A:g+m[x[g]]>A?g:A}},{"./common":41}],43:[function(i,f,c){f.exports=function(u,h,l,m){for(var k=65535&u|0,C=u>>>16&65535|0,x=0;l!==0;){for(l-=x=2e3<l?2e3:l;C=C+(k=k+h[m++]|0)|0,--x;);k%=65521,C%=65521}return k|C<<16|0}},{}],44:[function(i,f,c){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,f,c){var u=(function(){for(var h,l=[],m=0;m<256;m++){h=m;for(var k=0;k<8;k++)h=1&h?3988292384^h>>>1:h>>>1;l[m]=h}return l})();f.exports=function(h,l,m,k){var C=u,x=k+m;h^=-1;for(var A=k;A<x;A++)h=h>>>8^C[255&(h^l[A])];return-1^h}},{}],46:[function(i,f,c){var u,h=i("../utils/common"),l=i("./trees"),m=i("./adler32"),k=i("./crc32"),C=i("./messages"),x=0,A=4,g=0,E=-2,v=-1,S=4,w=2,P=8,B=9,W=286,K=30,nt=19,X=2*W+1,lt=15,tt=3,pt=258,Rt=pt+tt+1,$=42,Q=113,p=1,it=2,Pt=3,ut=4;function Tt(s,et){return s.msg=C[et],et}function st(s){return(s<<1)-(4<s?9:0)}function Ot(s){for(var et=s.length;0<=--et;)s[et]=0}function Y(s){var et=s.state,G=et.pending;G>s.avail_out&&(G=s.avail_out),G!==0&&(h.arraySet(s.output,et.pending_buf,et.pending_out,G,s.next_out),s.next_out+=G,et.pending_out+=G,s.total_out+=G,s.avail_out-=G,et.pending-=G,et.pending===0&&(et.pending_out=0))}function V(s,et){l._tr_flush_block(s,0<=s.block_start?s.block_start:-1,s.strstart-s.block_start,et),s.block_start=s.strstart,Y(s.strm)}function Et(s,et){s.pending_buf[s.pending++]=et}function xt(s,et){s.pending_buf[s.pending++]=et>>>8&255,s.pending_buf[s.pending++]=255&et}function vt(s,et){var G,O,_=s.max_chain_length,N=s.strstart,ot=s.prev_length,at=s.nice_match,H=s.strstart>s.w_size-Rt?s.strstart-(s.w_size-Rt):0,ct=s.window,kt=s.w_mask,dt=s.prev,At=s.strstart+pt,Nt=ct[N+ot-1],Bt=ct[N+ot];s.prev_length>=s.good_match&&(_>>=2),at>s.lookahead&&(at=s.lookahead);do if(ct[(G=et)+ot]===Bt&&ct[G+ot-1]===Nt&&ct[G]===ct[N]&&ct[++G]===ct[N+1]){N+=2,G++;do;while(ct[++N]===ct[++G]&&ct[++N]===ct[++G]&&ct[++N]===ct[++G]&&ct[++N]===ct[++G]&&ct[++N]===ct[++G]&&ct[++N]===ct[++G]&&ct[++N]===ct[++G]&&ct[++N]===ct[++G]&&N<At);if(O=pt-(At-N),N=At-pt,ot<O){if(s.match_start=et,at<=(ot=O))break;Nt=ct[N+ot-1],Bt=ct[N+ot]}}while((et=dt[et&kt])>H&&--_!=0);return ot<=s.lookahead?ot:s.lookahead}function Lt(s){var et,G,O,_,N,ot,at,H,ct,kt,dt=s.w_size;do{if(_=s.window_size-s.lookahead-s.strstart,s.strstart>=dt+(dt-Rt)){for(h.arraySet(s.window,s.window,dt,dt,0),s.match_start-=dt,s.strstart-=dt,s.block_start-=dt,et=G=s.hash_size;O=s.head[--et],s.head[et]=dt<=O?O-dt:0,--G;);for(et=G=dt;O=s.prev[--et],s.prev[et]=dt<=O?O-dt:0,--G;);_+=dt}if(s.strm.avail_in===0)break;if(ot=s.strm,at=s.window,H=s.strstart+s.lookahead,ct=_,kt=void 0,kt=ot.avail_in,ct<kt&&(kt=ct),G=kt===0?0:(ot.avail_in-=kt,h.arraySet(at,ot.input,ot.next_in,kt,H),ot.state.wrap===1?ot.adler=m(ot.adler,at,kt,H):ot.state.wrap===2&&(ot.adler=k(ot.adler,at,kt,H)),ot.next_in+=kt,ot.total_in+=kt,kt),s.lookahead+=G,s.lookahead+s.insert>=tt)for(N=s.strstart-s.insert,s.ins_h=s.window[N],s.ins_h=(s.ins_h<<s.hash_shift^s.window[N+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[N+tt-1])&s.hash_mask,s.prev[N&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=N,N++,s.insert--,!(s.lookahead+s.insert<tt)););}while(s.lookahead<Rt&&s.strm.avail_in!==0)}function Gt(s,et){for(var G,O;;){if(s.lookahead<Rt){if(Lt(s),s.lookahead<Rt&&et===x)return p;if(s.lookahead===0)break}if(G=0,s.lookahead>=tt&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+tt-1])&s.hash_mask,G=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),G!==0&&s.strstart-G<=s.w_size-Rt&&(s.match_length=vt(s,G)),s.match_length>=tt)if(O=l._tr_tally(s,s.strstart-s.match_start,s.match_length-tt),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=tt){for(s.match_length--;s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+tt-1])&s.hash_mask,G=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart,--s.match_length!=0;);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else O=l._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(O&&(V(s,!1),s.strm.avail_out===0))return p}return s.insert=s.strstart<tt-1?s.strstart:tt-1,et===A?(V(s,!0),s.strm.avail_out===0?Pt:ut):s.last_lit&&(V(s,!1),s.strm.avail_out===0)?p:it}function Mt(s,et){for(var G,O,_;;){if(s.lookahead<Rt){if(Lt(s),s.lookahead<Rt&&et===x)return p;if(s.lookahead===0)break}if(G=0,s.lookahead>=tt&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+tt-1])&s.hash_mask,G=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=tt-1,G!==0&&s.prev_length<s.max_lazy_match&&s.strstart-G<=s.w_size-Rt&&(s.match_length=vt(s,G),s.match_length<=5&&(s.strategy===1||s.match_length===tt&&4096<s.strstart-s.match_start)&&(s.match_length=tt-1)),s.prev_length>=tt&&s.match_length<=s.prev_length){for(_=s.strstart+s.lookahead-tt,O=l._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-tt),s.lookahead-=s.prev_length-1,s.prev_length-=2;++s.strstart<=_&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+tt-1])&s.hash_mask,G=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),--s.prev_length!=0;);if(s.match_available=0,s.match_length=tt-1,s.strstart++,O&&(V(s,!1),s.strm.avail_out===0))return p}else if(s.match_available){if((O=l._tr_tally(s,0,s.window[s.strstart-1]))&&V(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return p}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(O=l._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<tt-1?s.strstart:tt-1,et===A?(V(s,!0),s.strm.avail_out===0?Pt:ut):s.last_lit&&(V(s,!1),s.strm.avail_out===0)?p:it}function mt(s,et,G,O,_){this.good_length=s,this.max_lazy=et,this.nice_length=G,this.max_chain=O,this.func=_}function Zt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*X),this.dyn_dtree=new h.Buf16(2*(2*K+1)),this.bl_tree=new h.Buf16(2*(2*nt+1)),Ot(this.dyn_ltree),Ot(this.dyn_dtree),Ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(lt+1),this.heap=new h.Buf16(2*W+1),Ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*W+1),Ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Kt(s){var et;return s&&s.state?(s.total_in=s.total_out=0,s.data_type=w,(et=s.state).pending=0,et.pending_out=0,et.wrap<0&&(et.wrap=-et.wrap),et.status=et.wrap?$:Q,s.adler=et.wrap===2?0:1,et.last_flush=x,l._tr_init(et),g):Tt(s,E)}function Dt(s){var et=Kt(s);return et===g&&(function(G){G.window_size=2*G.w_size,Ot(G.head),G.max_lazy_match=u[G.level].max_lazy,G.good_match=u[G.level].good_length,G.nice_match=u[G.level].nice_length,G.max_chain_length=u[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=tt-1,G.match_available=0,G.ins_h=0})(s.state),et}function ee(s,et,G,O,_,N){if(!s)return E;var ot=1;if(et===v&&(et=6),O<0?(ot=0,O=-O):15<O&&(ot=2,O-=16),_<1||B<_||G!==P||O<8||15<O||et<0||9<et||N<0||S<N)return Tt(s,E);O===8&&(O=9);var at=new Zt;return(s.state=at).strm=s,at.wrap=ot,at.gzhead=null,at.w_bits=O,at.w_size=1<<at.w_bits,at.w_mask=at.w_size-1,at.hash_bits=_+7,at.hash_size=1<<at.hash_bits,at.hash_mask=at.hash_size-1,at.hash_shift=~~((at.hash_bits+tt-1)/tt),at.window=new h.Buf8(2*at.w_size),at.head=new h.Buf16(at.hash_size),at.prev=new h.Buf16(at.w_size),at.lit_bufsize=1<<_+6,at.pending_buf_size=4*at.lit_bufsize,at.pending_buf=new h.Buf8(at.pending_buf_size),at.d_buf=1*at.lit_bufsize,at.l_buf=3*at.lit_bufsize,at.level=et,at.strategy=N,at.method=G,Dt(s)}u=[new mt(0,0,0,0,function(s,et){var G=65535;for(G>s.pending_buf_size-5&&(G=s.pending_buf_size-5);;){if(s.lookahead<=1){if(Lt(s),s.lookahead===0&&et===x)return p;if(s.lookahead===0)break}s.strstart+=s.lookahead,s.lookahead=0;var O=s.block_start+G;if((s.strstart===0||s.strstart>=O)&&(s.lookahead=s.strstart-O,s.strstart=O,V(s,!1),s.strm.avail_out===0)||s.strstart-s.block_start>=s.w_size-Rt&&(V(s,!1),s.strm.avail_out===0))return p}return s.insert=0,et===A?(V(s,!0),s.strm.avail_out===0?Pt:ut):(s.strstart>s.block_start&&(V(s,!1),s.strm.avail_out),p)}),new mt(4,4,8,4,Gt),new mt(4,5,16,8,Gt),new mt(4,6,32,32,Gt),new mt(4,4,16,16,Mt),new mt(8,16,32,32,Mt),new mt(8,16,128,128,Mt),new mt(8,32,128,256,Mt),new mt(32,128,258,1024,Mt),new mt(32,258,258,4096,Mt)],c.deflateInit=function(s,et){return ee(s,et,P,15,8,0)},c.deflateInit2=ee,c.deflateReset=Dt,c.deflateResetKeep=Kt,c.deflateSetHeader=function(s,et){return s&&s.state?s.state.wrap!==2?E:(s.state.gzhead=et,g):E},c.deflate=function(s,et){var G,O,_,N;if(!s||!s.state||5<et||et<0)return s?Tt(s,E):E;if(O=s.state,!s.output||!s.input&&s.avail_in!==0||O.status===666&&et!==A)return Tt(s,s.avail_out===0?-5:E);if(O.strm=s,G=O.last_flush,O.last_flush=et,O.status===$)if(O.wrap===2)s.adler=0,Et(O,31),Et(O,139),Et(O,8),O.gzhead?(Et(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),Et(O,255&O.gzhead.time),Et(O,O.gzhead.time>>8&255),Et(O,O.gzhead.time>>16&255),Et(O,O.gzhead.time>>24&255),Et(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),Et(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(Et(O,255&O.gzhead.extra.length),Et(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(s.adler=k(s.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(Et(O,0),Et(O,0),Et(O,0),Et(O,0),Et(O,0),Et(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),Et(O,3),O.status=Q);else{var ot=P+(O.w_bits-8<<4)<<8;ot|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(ot|=32),ot+=31-ot%31,O.status=Q,xt(O,ot),O.strstart!==0&&(xt(O,s.adler>>>16),xt(O,65535&s.adler)),s.adler=1}if(O.status===69)if(O.gzhead.extra){for(_=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>_&&(s.adler=k(s.adler,O.pending_buf,O.pending-_,_)),Y(s),_=O.pending,O.pending!==O.pending_buf_size));)Et(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>_&&(s.adler=k(s.adler,O.pending_buf,O.pending-_,_)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){_=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>_&&(s.adler=k(s.adler,O.pending_buf,O.pending-_,_)),Y(s),_=O.pending,O.pending===O.pending_buf_size)){N=1;break}N=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,Et(O,N)}while(N!==0);O.gzhead.hcrc&&O.pending>_&&(s.adler=k(s.adler,O.pending_buf,O.pending-_,_)),N===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){_=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>_&&(s.adler=k(s.adler,O.pending_buf,O.pending-_,_)),Y(s),_=O.pending,O.pending===O.pending_buf_size)){N=1;break}N=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,Et(O,N)}while(N!==0);O.gzhead.hcrc&&O.pending>_&&(s.adler=k(s.adler,O.pending_buf,O.pending-_,_)),N===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&Y(s),O.pending+2<=O.pending_buf_size&&(Et(O,255&s.adler),Et(O,s.adler>>8&255),s.adler=0,O.status=Q)):O.status=Q),O.pending!==0){if(Y(s),s.avail_out===0)return O.last_flush=-1,g}else if(s.avail_in===0&&st(et)<=st(G)&&et!==A)return Tt(s,-5);if(O.status===666&&s.avail_in!==0)return Tt(s,-5);if(s.avail_in!==0||O.lookahead!==0||et!==x&&O.status!==666){var at=O.strategy===2?(function(H,ct){for(var kt;;){if(H.lookahead===0&&(Lt(H),H.lookahead===0)){if(ct===x)return p;break}if(H.match_length=0,kt=l._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,kt&&(V(H,!1),H.strm.avail_out===0))return p}return H.insert=0,ct===A?(V(H,!0),H.strm.avail_out===0?Pt:ut):H.last_lit&&(V(H,!1),H.strm.avail_out===0)?p:it})(O,et):O.strategy===3?(function(H,ct){for(var kt,dt,At,Nt,Bt=H.window;;){if(H.lookahead<=pt){if(Lt(H),H.lookahead<=pt&&ct===x)return p;if(H.lookahead===0)break}if(H.match_length=0,H.lookahead>=tt&&0<H.strstart&&(dt=Bt[At=H.strstart-1])===Bt[++At]&&dt===Bt[++At]&&dt===Bt[++At]){Nt=H.strstart+pt;do;while(dt===Bt[++At]&&dt===Bt[++At]&&dt===Bt[++At]&&dt===Bt[++At]&&dt===Bt[++At]&&dt===Bt[++At]&&dt===Bt[++At]&&dt===Bt[++At]&&At<Nt);H.match_length=pt-(Nt-At),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=tt?(kt=l._tr_tally(H,1,H.match_length-tt),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(kt=l._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),kt&&(V(H,!1),H.strm.avail_out===0))return p}return H.insert=0,ct===A?(V(H,!0),H.strm.avail_out===0?Pt:ut):H.last_lit&&(V(H,!1),H.strm.avail_out===0)?p:it})(O,et):u[O.level].func(O,et);if(at!==Pt&&at!==ut||(O.status=666),at===p||at===Pt)return s.avail_out===0&&(O.last_flush=-1),g;if(at===it&&(et===1?l._tr_align(O):et!==5&&(l._tr_stored_block(O,0,0,!1),et===3&&(Ot(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),Y(s),s.avail_out===0))return O.last_flush=-1,g}return et!==A?g:O.wrap<=0?1:(O.wrap===2?(Et(O,255&s.adler),Et(O,s.adler>>8&255),Et(O,s.adler>>16&255),Et(O,s.adler>>24&255),Et(O,255&s.total_in),Et(O,s.total_in>>8&255),Et(O,s.total_in>>16&255),Et(O,s.total_in>>24&255)):(xt(O,s.adler>>>16),xt(O,65535&s.adler)),Y(s),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?g:1)},c.deflateEnd=function(s){var et;return s&&s.state?(et=s.state.status)!==$&&et!==69&&et!==73&&et!==91&&et!==103&&et!==Q&&et!==666?Tt(s,E):(s.state=null,et===Q?Tt(s,-3):g):E},c.deflateSetDictionary=function(s,et){var G,O,_,N,ot,at,H,ct,kt=et.length;if(!s||!s.state||(N=(G=s.state).wrap)===2||N===1&&G.status!==$||G.lookahead)return E;for(N===1&&(s.adler=m(s.adler,et,kt,0)),G.wrap=0,kt>=G.w_size&&(N===0&&(Ot(G.head),G.strstart=0,G.block_start=0,G.insert=0),ct=new h.Buf8(G.w_size),h.arraySet(ct,et,kt-G.w_size,G.w_size,0),et=ct,kt=G.w_size),ot=s.avail_in,at=s.next_in,H=s.input,s.avail_in=kt,s.next_in=0,s.input=et,Lt(G);G.lookahead>=tt;){for(O=G.strstart,_=G.lookahead-(tt-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[O+tt-1])&G.hash_mask,G.prev[O&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=O,O++,--_;);G.strstart=O,G.lookahead=tt-1,Lt(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=tt-1,G.match_available=0,s.next_in=at,s.input=H,s.avail_in=ot,G.wrap=N,g},c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,f,c){f.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,f,c){f.exports=function(u,h){var l,m,k,C,x,A,g,E,v,S,w,P,B,W,K,nt,X,lt,tt,pt,Rt,$,Q,p,it;l=u.state,m=u.next_in,p=u.input,k=m+(u.avail_in-5),C=u.next_out,it=u.output,x=C-(h-u.avail_out),A=C+(u.avail_out-257),g=l.dmax,E=l.wsize,v=l.whave,S=l.wnext,w=l.window,P=l.hold,B=l.bits,W=l.lencode,K=l.distcode,nt=(1<<l.lenbits)-1,X=(1<<l.distbits)-1;t:do{B<15&&(P+=p[m++]<<B,B+=8,P+=p[m++]<<B,B+=8),lt=W[P&nt];e:for(;;){if(P>>>=tt=lt>>>24,B-=tt,(tt=lt>>>16&255)===0)it[C++]=65535&lt;else{if(!(16&tt)){if((64&tt)==0){lt=W[(65535&lt)+(P&(1<<tt)-1)];continue e}if(32&tt){l.mode=12;break t}u.msg="invalid literal/length code",l.mode=30;break t}pt=65535&lt,(tt&=15)&&(B<tt&&(P+=p[m++]<<B,B+=8),pt+=P&(1<<tt)-1,P>>>=tt,B-=tt),B<15&&(P+=p[m++]<<B,B+=8,P+=p[m++]<<B,B+=8),lt=K[P&X];n:for(;;){if(P>>>=tt=lt>>>24,B-=tt,!(16&(tt=lt>>>16&255))){if((64&tt)==0){lt=K[(65535&lt)+(P&(1<<tt)-1)];continue n}u.msg="invalid distance code",l.mode=30;break t}if(Rt=65535&lt,B<(tt&=15)&&(P+=p[m++]<<B,(B+=8)<tt&&(P+=p[m++]<<B,B+=8)),g<(Rt+=P&(1<<tt)-1)){u.msg="invalid distance too far back",l.mode=30;break t}if(P>>>=tt,B-=tt,(tt=C-x)<Rt){if(v<(tt=Rt-tt)&&l.sane){u.msg="invalid distance too far back",l.mode=30;break t}if(Q=w,($=0)===S){if($+=E-tt,tt<pt){for(pt-=tt;it[C++]=w[$++],--tt;);$=C-Rt,Q=it}}else if(S<tt){if($+=E+S-tt,(tt-=S)<pt){for(pt-=tt;it[C++]=w[$++],--tt;);if($=0,S<pt){for(pt-=tt=S;it[C++]=w[$++],--tt;);$=C-Rt,Q=it}}}else if($+=S-tt,tt<pt){for(pt-=tt;it[C++]=w[$++],--tt;);$=C-Rt,Q=it}for(;2<pt;)it[C++]=Q[$++],it[C++]=Q[$++],it[C++]=Q[$++],pt-=3;pt&&(it[C++]=Q[$++],1<pt&&(it[C++]=Q[$++]))}else{for($=C-Rt;it[C++]=it[$++],it[C++]=it[$++],it[C++]=it[$++],2<(pt-=3););pt&&(it[C++]=it[$++],1<pt&&(it[C++]=it[$++]))}break}}break}}while(m<k&&C<A);m-=pt=B>>3,P&=(1<<(B-=pt<<3))-1,u.next_in=m,u.next_out=C,u.avail_in=m<k?k-m+5:5-(m-k),u.avail_out=C<A?A-C+257:257-(C-A),l.hold=P,l.bits=B}},{}],49:[function(i,f,c){var u=i("../utils/common"),h=i("./adler32"),l=i("./crc32"),m=i("./inffast"),k=i("./inftrees"),C=1,x=2,A=0,g=-2,E=1,v=852,S=592;function w($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function B($){var Q;return $&&$.state?(Q=$.state,$.total_in=$.total_out=Q.total=0,$.msg="",Q.wrap&&($.adler=1&Q.wrap),Q.mode=E,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new u.Buf32(v),Q.distcode=Q.distdyn=new u.Buf32(S),Q.sane=1,Q.back=-1,A):g}function W($){var Q;return $&&$.state?((Q=$.state).wsize=0,Q.whave=0,Q.wnext=0,B($)):g}function K($,Q){var p,it;return $&&$.state?(it=$.state,Q<0?(p=0,Q=-Q):(p=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?g:(it.window!==null&&it.wbits!==Q&&(it.window=null),it.wrap=p,it.wbits=Q,W($))):g}function nt($,Q){var p,it;return $?(it=new P,($.state=it).window=null,(p=K($,Q))!==A&&($.state=null),p):g}var X,lt,tt=!0;function pt($){if(tt){var Q;for(X=new u.Buf32(512),lt=new u.Buf32(32),Q=0;Q<144;)$.lens[Q++]=8;for(;Q<256;)$.lens[Q++]=9;for(;Q<280;)$.lens[Q++]=7;for(;Q<288;)$.lens[Q++]=8;for(k(C,$.lens,0,288,X,0,$.work,{bits:9}),Q=0;Q<32;)$.lens[Q++]=5;k(x,$.lens,0,32,lt,0,$.work,{bits:5}),tt=!1}$.lencode=X,$.lenbits=9,$.distcode=lt,$.distbits=5}function Rt($,Q,p,it){var Pt,ut=$.state;return ut.window===null&&(ut.wsize=1<<ut.wbits,ut.wnext=0,ut.whave=0,ut.window=new u.Buf8(ut.wsize)),it>=ut.wsize?(u.arraySet(ut.window,Q,p-ut.wsize,ut.wsize,0),ut.wnext=0,ut.whave=ut.wsize):(it<(Pt=ut.wsize-ut.wnext)&&(Pt=it),u.arraySet(ut.window,Q,p-it,Pt,ut.wnext),(it-=Pt)?(u.arraySet(ut.window,Q,p-it,it,0),ut.wnext=it,ut.whave=ut.wsize):(ut.wnext+=Pt,ut.wnext===ut.wsize&&(ut.wnext=0),ut.whave<ut.wsize&&(ut.whave+=Pt))),0}c.inflateReset=W,c.inflateReset2=K,c.inflateResetKeep=B,c.inflateInit=function($){return nt($,15)},c.inflateInit2=nt,c.inflate=function($,Q){var p,it,Pt,ut,Tt,st,Ot,Y,V,Et,xt,vt,Lt,Gt,Mt,mt,Zt,Kt,Dt,ee,s,et,G,O,_=0,N=new u.Buf8(4),ot=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return g;(p=$.state).mode===12&&(p.mode=13),Tt=$.next_out,Pt=$.output,Ot=$.avail_out,ut=$.next_in,it=$.input,st=$.avail_in,Y=p.hold,V=p.bits,Et=st,xt=Ot,et=A;t:for(;;)switch(p.mode){case E:if(p.wrap===0){p.mode=13;break}for(;V<16;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(2&p.wrap&&Y===35615){N[p.check=0]=255&Y,N[1]=Y>>>8&255,p.check=l(p.check,N,2,0),V=Y=0,p.mode=2;break}if(p.flags=0,p.head&&(p.head.done=!1),!(1&p.wrap)||(((255&Y)<<8)+(Y>>8))%31){$.msg="incorrect header check",p.mode=30;break}if((15&Y)!=8){$.msg="unknown compression method",p.mode=30;break}if(V-=4,s=8+(15&(Y>>>=4)),p.wbits===0)p.wbits=s;else if(s>p.wbits){$.msg="invalid window size",p.mode=30;break}p.dmax=1<<s,$.adler=p.check=1,p.mode=512&Y?10:12,V=Y=0;break;case 2:for(;V<16;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(p.flags=Y,(255&p.flags)!=8){$.msg="unknown compression method",p.mode=30;break}if(57344&p.flags){$.msg="unknown header flags set",p.mode=30;break}p.head&&(p.head.text=Y>>8&1),512&p.flags&&(N[0]=255&Y,N[1]=Y>>>8&255,p.check=l(p.check,N,2,0)),V=Y=0,p.mode=3;case 3:for(;V<32;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}p.head&&(p.head.time=Y),512&p.flags&&(N[0]=255&Y,N[1]=Y>>>8&255,N[2]=Y>>>16&255,N[3]=Y>>>24&255,p.check=l(p.check,N,4,0)),V=Y=0,p.mode=4;case 4:for(;V<16;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}p.head&&(p.head.xflags=255&Y,p.head.os=Y>>8),512&p.flags&&(N[0]=255&Y,N[1]=Y>>>8&255,p.check=l(p.check,N,2,0)),V=Y=0,p.mode=5;case 5:if(1024&p.flags){for(;V<16;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}p.length=Y,p.head&&(p.head.extra_len=Y),512&p.flags&&(N[0]=255&Y,N[1]=Y>>>8&255,p.check=l(p.check,N,2,0)),V=Y=0}else p.head&&(p.head.extra=null);p.mode=6;case 6:if(1024&p.flags&&(st<(vt=p.length)&&(vt=st),vt&&(p.head&&(s=p.head.extra_len-p.length,p.head.extra||(p.head.extra=new Array(p.head.extra_len)),u.arraySet(p.head.extra,it,ut,vt,s)),512&p.flags&&(p.check=l(p.check,it,vt,ut)),st-=vt,ut+=vt,p.length-=vt),p.length))break t;p.length=0,p.mode=7;case 7:if(2048&p.flags){if(st===0)break t;for(vt=0;s=it[ut+vt++],p.head&&s&&p.length<65536&&(p.head.name+=String.fromCharCode(s)),s&&vt<st;);if(512&p.flags&&(p.check=l(p.check,it,vt,ut)),st-=vt,ut+=vt,s)break t}else p.head&&(p.head.name=null);p.length=0,p.mode=8;case 8:if(4096&p.flags){if(st===0)break t;for(vt=0;s=it[ut+vt++],p.head&&s&&p.length<65536&&(p.head.comment+=String.fromCharCode(s)),s&&vt<st;);if(512&p.flags&&(p.check=l(p.check,it,vt,ut)),st-=vt,ut+=vt,s)break t}else p.head&&(p.head.comment=null);p.mode=9;case 9:if(512&p.flags){for(;V<16;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(Y!==(65535&p.check)){$.msg="header crc mismatch",p.mode=30;break}V=Y=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0),$.adler=p.check=0,p.mode=12;break;case 10:for(;V<32;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}$.adler=p.check=w(Y),V=Y=0,p.mode=11;case 11:if(p.havedict===0)return $.next_out=Tt,$.avail_out=Ot,$.next_in=ut,$.avail_in=st,p.hold=Y,p.bits=V,2;$.adler=p.check=1,p.mode=12;case 12:if(Q===5||Q===6)break t;case 13:if(p.last){Y>>>=7&V,V-=7&V,p.mode=27;break}for(;V<3;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}switch(p.last=1&Y,V-=1,3&(Y>>>=1)){case 0:p.mode=14;break;case 1:if(pt(p),p.mode=20,Q!==6)break;Y>>>=2,V-=2;break t;case 2:p.mode=17;break;case 3:$.msg="invalid block type",p.mode=30}Y>>>=2,V-=2;break;case 14:for(Y>>>=7&V,V-=7&V;V<32;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if((65535&Y)!=(Y>>>16^65535)){$.msg="invalid stored block lengths",p.mode=30;break}if(p.length=65535&Y,V=Y=0,p.mode=15,Q===6)break t;case 15:p.mode=16;case 16:if(vt=p.length){if(st<vt&&(vt=st),Ot<vt&&(vt=Ot),vt===0)break t;u.arraySet(Pt,it,ut,vt,Tt),st-=vt,ut+=vt,Ot-=vt,Tt+=vt,p.length-=vt;break}p.mode=12;break;case 17:for(;V<14;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(p.nlen=257+(31&Y),Y>>>=5,V-=5,p.ndist=1+(31&Y),Y>>>=5,V-=5,p.ncode=4+(15&Y),Y>>>=4,V-=4,286<p.nlen||30<p.ndist){$.msg="too many length or distance symbols",p.mode=30;break}p.have=0,p.mode=18;case 18:for(;p.have<p.ncode;){for(;V<3;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}p.lens[ot[p.have++]]=7&Y,Y>>>=3,V-=3}for(;p.have<19;)p.lens[ot[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,G={bits:p.lenbits},et=k(0,p.lens,0,19,p.lencode,0,p.work,G),p.lenbits=G.bits,et){$.msg="invalid code lengths set",p.mode=30;break}p.have=0,p.mode=19;case 19:for(;p.have<p.nlen+p.ndist;){for(;mt=(_=p.lencode[Y&(1<<p.lenbits)-1])>>>16&255,Zt=65535&_,!((Mt=_>>>24)<=V);){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(Zt<16)Y>>>=Mt,V-=Mt,p.lens[p.have++]=Zt;else{if(Zt===16){for(O=Mt+2;V<O;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(Y>>>=Mt,V-=Mt,p.have===0){$.msg="invalid bit length repeat",p.mode=30;break}s=p.lens[p.have-1],vt=3+(3&Y),Y>>>=2,V-=2}else if(Zt===17){for(O=Mt+3;V<O;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}V-=Mt,s=0,vt=3+(7&(Y>>>=Mt)),Y>>>=3,V-=3}else{for(O=Mt+7;V<O;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}V-=Mt,s=0,vt=11+(127&(Y>>>=Mt)),Y>>>=7,V-=7}if(p.have+vt>p.nlen+p.ndist){$.msg="invalid bit length repeat",p.mode=30;break}for(;vt--;)p.lens[p.have++]=s}}if(p.mode===30)break;if(p.lens[256]===0){$.msg="invalid code -- missing end-of-block",p.mode=30;break}if(p.lenbits=9,G={bits:p.lenbits},et=k(C,p.lens,0,p.nlen,p.lencode,0,p.work,G),p.lenbits=G.bits,et){$.msg="invalid literal/lengths set",p.mode=30;break}if(p.distbits=6,p.distcode=p.distdyn,G={bits:p.distbits},et=k(x,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,G),p.distbits=G.bits,et){$.msg="invalid distances set",p.mode=30;break}if(p.mode=20,Q===6)break t;case 20:p.mode=21;case 21:if(6<=st&&258<=Ot){$.next_out=Tt,$.avail_out=Ot,$.next_in=ut,$.avail_in=st,p.hold=Y,p.bits=V,m($,xt),Tt=$.next_out,Pt=$.output,Ot=$.avail_out,ut=$.next_in,it=$.input,st=$.avail_in,Y=p.hold,V=p.bits,p.mode===12&&(p.back=-1);break}for(p.back=0;mt=(_=p.lencode[Y&(1<<p.lenbits)-1])>>>16&255,Zt=65535&_,!((Mt=_>>>24)<=V);){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(mt&&(240&mt)==0){for(Kt=Mt,Dt=mt,ee=Zt;mt=(_=p.lencode[ee+((Y&(1<<Kt+Dt)-1)>>Kt)])>>>16&255,Zt=65535&_,!(Kt+(Mt=_>>>24)<=V);){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}Y>>>=Kt,V-=Kt,p.back+=Kt}if(Y>>>=Mt,V-=Mt,p.back+=Mt,p.length=Zt,mt===0){p.mode=26;break}if(32&mt){p.back=-1,p.mode=12;break}if(64&mt){$.msg="invalid literal/length code",p.mode=30;break}p.extra=15&mt,p.mode=22;case 22:if(p.extra){for(O=p.extra;V<O;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}p.length+=Y&(1<<p.extra)-1,Y>>>=p.extra,V-=p.extra,p.back+=p.extra}p.was=p.length,p.mode=23;case 23:for(;mt=(_=p.distcode[Y&(1<<p.distbits)-1])>>>16&255,Zt=65535&_,!((Mt=_>>>24)<=V);){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if((240&mt)==0){for(Kt=Mt,Dt=mt,ee=Zt;mt=(_=p.distcode[ee+((Y&(1<<Kt+Dt)-1)>>Kt)])>>>16&255,Zt=65535&_,!(Kt+(Mt=_>>>24)<=V);){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}Y>>>=Kt,V-=Kt,p.back+=Kt}if(Y>>>=Mt,V-=Mt,p.back+=Mt,64&mt){$.msg="invalid distance code",p.mode=30;break}p.offset=Zt,p.extra=15&mt,p.mode=24;case 24:if(p.extra){for(O=p.extra;V<O;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}p.offset+=Y&(1<<p.extra)-1,Y>>>=p.extra,V-=p.extra,p.back+=p.extra}if(p.offset>p.dmax){$.msg="invalid distance too far back",p.mode=30;break}p.mode=25;case 25:if(Ot===0)break t;if(vt=xt-Ot,p.offset>vt){if((vt=p.offset-vt)>p.whave&&p.sane){$.msg="invalid distance too far back",p.mode=30;break}Lt=vt>p.wnext?(vt-=p.wnext,p.wsize-vt):p.wnext-vt,vt>p.length&&(vt=p.length),Gt=p.window}else Gt=Pt,Lt=Tt-p.offset,vt=p.length;for(Ot<vt&&(vt=Ot),Ot-=vt,p.length-=vt;Pt[Tt++]=Gt[Lt++],--vt;);p.length===0&&(p.mode=21);break;case 26:if(Ot===0)break t;Pt[Tt++]=p.length,Ot--,p.mode=21;break;case 27:if(p.wrap){for(;V<32;){if(st===0)break t;st--,Y|=it[ut++]<<V,V+=8}if(xt-=Ot,$.total_out+=xt,p.total+=xt,xt&&($.adler=p.check=p.flags?l(p.check,Pt,xt,Tt-xt):h(p.check,Pt,xt,Tt-xt)),xt=Ot,(p.flags?Y:w(Y))!==p.check){$.msg="incorrect data check",p.mode=30;break}V=Y=0}p.mode=28;case 28:if(p.wrap&&p.flags){for(;V<32;){if(st===0)break t;st--,Y+=it[ut++]<<V,V+=8}if(Y!==(4294967295&p.total)){$.msg="incorrect length check",p.mode=30;break}V=Y=0}p.mode=29;case 29:et=1;break t;case 30:et=-3;break t;case 31:return-4;case 32:default:return g}return $.next_out=Tt,$.avail_out=Ot,$.next_in=ut,$.avail_in=st,p.hold=Y,p.bits=V,(p.wsize||xt!==$.avail_out&&p.mode<30&&(p.mode<27||Q!==4))&&Rt($,$.output,$.next_out,xt-$.avail_out)?(p.mode=31,-4):(Et-=$.avail_in,xt-=$.avail_out,$.total_in+=Et,$.total_out+=xt,p.total+=xt,p.wrap&&xt&&($.adler=p.check=p.flags?l(p.check,Pt,xt,$.next_out-xt):h(p.check,Pt,xt,$.next_out-xt)),$.data_type=p.bits+(p.last?64:0)+(p.mode===12?128:0)+(p.mode===20||p.mode===15?256:0),(Et==0&&xt===0||Q===4)&&et===A&&(et=-5),et)},c.inflateEnd=function($){if(!$||!$.state)return g;var Q=$.state;return Q.window&&(Q.window=null),$.state=null,A},c.inflateGetHeader=function($,Q){var p;return $&&$.state?(2&(p=$.state).wrap)==0?g:((p.head=Q).done=!1,A):g},c.inflateSetDictionary=function($,Q){var p,it=Q.length;return $&&$.state?(p=$.state).wrap!==0&&p.mode!==11?g:p.mode===11&&h(1,Q,it,0)!==p.check?-3:Rt($,Q,it,it)?(p.mode=31,-4):(p.havedict=1,A):g},c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,f,c){var u=i("../utils/common"),h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function(C,x,A,g,E,v,S,w){var P,B,W,K,nt,X,lt,tt,pt,Rt=w.bits,$=0,Q=0,p=0,it=0,Pt=0,ut=0,Tt=0,st=0,Ot=0,Y=0,V=null,Et=0,xt=new u.Buf16(16),vt=new u.Buf16(16),Lt=null,Gt=0;for($=0;$<=15;$++)xt[$]=0;for(Q=0;Q<g;Q++)xt[x[A+Q]]++;for(Pt=Rt,it=15;1<=it&&xt[it]===0;it--);if(it<Pt&&(Pt=it),it===0)return E[v++]=20971520,E[v++]=20971520,w.bits=1,0;for(p=1;p<it&&xt[p]===0;p++);for(Pt<p&&(Pt=p),$=st=1;$<=15;$++)if(st<<=1,(st-=xt[$])<0)return-1;if(0<st&&(C===0||it!==1))return-1;for(vt[1]=0,$=1;$<15;$++)vt[$+1]=vt[$]+xt[$];for(Q=0;Q<g;Q++)x[A+Q]!==0&&(S[vt[x[A+Q]]++]=Q);if(X=C===0?(V=Lt=S,19):C===1?(V=h,Et-=257,Lt=l,Gt-=257,256):(V=m,Lt=k,-1),$=p,nt=v,Tt=Q=Y=0,W=-1,K=(Ot=1<<(ut=Pt))-1,C===1&&852<Ot||C===2&&592<Ot)return 1;for(;;){for(lt=$-Tt,pt=S[Q]<X?(tt=0,S[Q]):S[Q]>X?(tt=Lt[Gt+S[Q]],V[Et+S[Q]]):(tt=96,0),P=1<<$-Tt,p=B=1<<ut;E[nt+(Y>>Tt)+(B-=P)]=lt<<24|tt<<16|pt|0,B!==0;);for(P=1<<$-1;Y&P;)P>>=1;if(P!==0?(Y&=P-1,Y+=P):Y=0,Q++,--xt[$]==0){if($===it)break;$=x[A+S[Q]]}if(Pt<$&&(Y&K)!==W){for(Tt===0&&(Tt=Pt),nt+=p,st=1<<(ut=$-Tt);ut+Tt<it&&!((st-=xt[ut+Tt])<=0);)ut++,st<<=1;if(Ot+=1<<ut,C===1&&852<Ot||C===2&&592<Ot)return 1;E[W=Y&K]=Pt<<24|ut<<16|nt-v|0}}return Y!==0&&(E[nt+Y]=$-Tt<<24|64<<16|0),w.bits=Pt,0}},{"../utils/common":41}],51:[function(i,f,c){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,f,c){var u=i("../utils/common"),h=0,l=1;function m(_){for(var N=_.length;0<=--N;)_[N]=0}var k=0,C=29,x=256,A=x+1+C,g=30,E=19,v=2*A+1,S=15,w=16,P=7,B=256,W=16,K=17,nt=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],lt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Rt=new Array(2*(A+2));m(Rt);var $=new Array(2*g);m($);var Q=new Array(512);m(Q);var p=new Array(256);m(p);var it=new Array(C);m(it);var Pt,ut,Tt,st=new Array(g);function Ot(_,N,ot,at,H){this.static_tree=_,this.extra_bits=N,this.extra_base=ot,this.elems=at,this.max_length=H,this.has_stree=_&&_.length}function Y(_,N){this.dyn_tree=_,this.max_code=0,this.stat_desc=N}function V(_){return _<256?Q[_]:Q[256+(_>>>7)]}function Et(_,N){_.pending_buf[_.pending++]=255&N,_.pending_buf[_.pending++]=N>>>8&255}function xt(_,N,ot){_.bi_valid>w-ot?(_.bi_buf|=N<<_.bi_valid&65535,Et(_,_.bi_buf),_.bi_buf=N>>w-_.bi_valid,_.bi_valid+=ot-w):(_.bi_buf|=N<<_.bi_valid&65535,_.bi_valid+=ot)}function vt(_,N,ot){xt(_,ot[2*N],ot[2*N+1])}function Lt(_,N){for(var ot=0;ot|=1&_,_>>>=1,ot<<=1,0<--N;);return ot>>>1}function Gt(_,N,ot){var at,H,ct=new Array(S+1),kt=0;for(at=1;at<=S;at++)ct[at]=kt=kt+ot[at-1]<<1;for(H=0;H<=N;H++){var dt=_[2*H+1];dt!==0&&(_[2*H]=Lt(ct[dt]++,dt))}}function Mt(_){var N;for(N=0;N<A;N++)_.dyn_ltree[2*N]=0;for(N=0;N<g;N++)_.dyn_dtree[2*N]=0;for(N=0;N<E;N++)_.bl_tree[2*N]=0;_.dyn_ltree[2*B]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function mt(_){8<_.bi_valid?Et(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function Zt(_,N,ot,at){var H=2*N,ct=2*ot;return _[H]<_[ct]||_[H]===_[ct]&&at[N]<=at[ot]}function Kt(_,N,ot){for(var at=_.heap[ot],H=ot<<1;H<=_.heap_len&&(H<_.heap_len&&Zt(N,_.heap[H+1],_.heap[H],_.depth)&&H++,!Zt(N,at,_.heap[H],_.depth));)_.heap[ot]=_.heap[H],ot=H,H<<=1;_.heap[ot]=at}function Dt(_,N,ot){var at,H,ct,kt,dt=0;if(_.last_lit!==0)for(;at=_.pending_buf[_.d_buf+2*dt]<<8|_.pending_buf[_.d_buf+2*dt+1],H=_.pending_buf[_.l_buf+dt],dt++,at===0?vt(_,H,N):(vt(_,(ct=p[H])+x+1,N),(kt=X[ct])!==0&&xt(_,H-=it[ct],kt),vt(_,ct=V(--at),ot),(kt=lt[ct])!==0&&xt(_,at-=st[ct],kt)),dt<_.last_lit;);vt(_,B,N)}function ee(_,N){var ot,at,H,ct=N.dyn_tree,kt=N.stat_desc.static_tree,dt=N.stat_desc.has_stree,At=N.stat_desc.elems,Nt=-1;for(_.heap_len=0,_.heap_max=v,ot=0;ot<At;ot++)ct[2*ot]!==0?(_.heap[++_.heap_len]=Nt=ot,_.depth[ot]=0):ct[2*ot+1]=0;for(;_.heap_len<2;)ct[2*(H=_.heap[++_.heap_len]=Nt<2?++Nt:0)]=1,_.depth[H]=0,_.opt_len--,dt&&(_.static_len-=kt[2*H+1]);for(N.max_code=Nt,ot=_.heap_len>>1;1<=ot;ot--)Kt(_,ct,ot);for(H=At;ot=_.heap[1],_.heap[1]=_.heap[_.heap_len--],Kt(_,ct,1),at=_.heap[1],_.heap[--_.heap_max]=ot,_.heap[--_.heap_max]=at,ct[2*H]=ct[2*ot]+ct[2*at],_.depth[H]=(_.depth[ot]>=_.depth[at]?_.depth[ot]:_.depth[at])+1,ct[2*ot+1]=ct[2*at+1]=H,_.heap[1]=H++,Kt(_,ct,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],(function(Bt,Jt){var we,se,he,qt,Ce,pe,St=Jt.dyn_tree,Ae=Jt.max_code,_e=Jt.stat_desc.static_tree,Ve=Jt.stat_desc.has_stree,_t=Jt.stat_desc.extra_bits,Ye=Jt.stat_desc.extra_base,Ee=Jt.stat_desc.max_length,Oe=0;for(qt=0;qt<=S;qt++)Bt.bl_count[qt]=0;for(St[2*Bt.heap[Bt.heap_max]+1]=0,we=Bt.heap_max+1;we<v;we++)Ee<(qt=St[2*St[2*(se=Bt.heap[we])+1]+1]+1)&&(qt=Ee,Oe++),St[2*se+1]=qt,Ae<se||(Bt.bl_count[qt]++,Ce=0,Ye<=se&&(Ce=_t[se-Ye]),pe=St[2*se],Bt.opt_len+=pe*(qt+Ce),Ve&&(Bt.static_len+=pe*(_e[2*se+1]+Ce)));if(Oe!==0){do{for(qt=Ee-1;Bt.bl_count[qt]===0;)qt--;Bt.bl_count[qt]--,Bt.bl_count[qt+1]+=2,Bt.bl_count[Ee]--,Oe-=2}while(0<Oe);for(qt=Ee;qt!==0;qt--)for(se=Bt.bl_count[qt];se!==0;)Ae<(he=Bt.heap[--we])||(St[2*he+1]!==qt&&(Bt.opt_len+=(qt-St[2*he+1])*St[2*he],St[2*he+1]=qt),se--)}})(_,N),Gt(ct,Nt,_.bl_count)}function s(_,N,ot){var at,H,ct=-1,kt=N[1],dt=0,At=7,Nt=4;for(kt===0&&(At=138,Nt=3),N[2*(ot+1)+1]=65535,at=0;at<=ot;at++)H=kt,kt=N[2*(at+1)+1],++dt<At&&H===kt||(dt<Nt?_.bl_tree[2*H]+=dt:H!==0?(H!==ct&&_.bl_tree[2*H]++,_.bl_tree[2*W]++):dt<=10?_.bl_tree[2*K]++:_.bl_tree[2*nt]++,ct=H,Nt=(dt=0)===kt?(At=138,3):H===kt?(At=6,3):(At=7,4))}function et(_,N,ot){var at,H,ct=-1,kt=N[1],dt=0,At=7,Nt=4;for(kt===0&&(At=138,Nt=3),at=0;at<=ot;at++)if(H=kt,kt=N[2*(at+1)+1],!(++dt<At&&H===kt)){if(dt<Nt)for(;vt(_,H,_.bl_tree),--dt!=0;);else H!==0?(H!==ct&&(vt(_,H,_.bl_tree),dt--),vt(_,W,_.bl_tree),xt(_,dt-3,2)):dt<=10?(vt(_,K,_.bl_tree),xt(_,dt-3,3)):(vt(_,nt,_.bl_tree),xt(_,dt-11,7));ct=H,Nt=(dt=0)===kt?(At=138,3):H===kt?(At=6,3):(At=7,4)}}m(st);var G=!1;function O(_,N,ot,at){xt(_,(k<<1)+(at?1:0),3),(function(H,ct,kt,dt){mt(H),Et(H,kt),Et(H,~kt),u.arraySet(H.pending_buf,H.window,ct,kt,H.pending),H.pending+=kt})(_,N,ot)}c._tr_init=function(_){G||((function(){var N,ot,at,H,ct,kt=new Array(S+1);for(H=at=0;H<C-1;H++)for(it[H]=at,N=0;N<1<<X[H];N++)p[at++]=H;for(p[at-1]=H,H=ct=0;H<16;H++)for(st[H]=ct,N=0;N<1<<lt[H];N++)Q[ct++]=H;for(ct>>=7;H<g;H++)for(st[H]=ct<<7,N=0;N<1<<lt[H]-7;N++)Q[256+ct++]=H;for(ot=0;ot<=S;ot++)kt[ot]=0;for(N=0;N<=143;)Rt[2*N+1]=8,N++,kt[8]++;for(;N<=255;)Rt[2*N+1]=9,N++,kt[9]++;for(;N<=279;)Rt[2*N+1]=7,N++,kt[7]++;for(;N<=287;)Rt[2*N+1]=8,N++,kt[8]++;for(Gt(Rt,A+1,kt),N=0;N<g;N++)$[2*N+1]=5,$[2*N]=Lt(N,5);Pt=new Ot(Rt,X,x+1,A,S),ut=new Ot($,lt,0,g,S),Tt=new Ot(new Array(0),tt,0,E,P)})(),G=!0),_.l_desc=new Y(_.dyn_ltree,Pt),_.d_desc=new Y(_.dyn_dtree,ut),_.bl_desc=new Y(_.bl_tree,Tt),_.bi_buf=0,_.bi_valid=0,Mt(_)},c._tr_stored_block=O,c._tr_flush_block=function(_,N,ot,at){var H,ct,kt=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=(function(dt){var At,Nt=4093624447;for(At=0;At<=31;At++,Nt>>>=1)if(1&Nt&&dt.dyn_ltree[2*At]!==0)return h;if(dt.dyn_ltree[18]!==0||dt.dyn_ltree[20]!==0||dt.dyn_ltree[26]!==0)return l;for(At=32;At<x;At++)if(dt.dyn_ltree[2*At]!==0)return l;return h})(_)),ee(_,_.l_desc),ee(_,_.d_desc),kt=(function(dt){var At;for(s(dt,dt.dyn_ltree,dt.l_desc.max_code),s(dt,dt.dyn_dtree,dt.d_desc.max_code),ee(dt,dt.bl_desc),At=E-1;3<=At&&dt.bl_tree[2*pt[At]+1]===0;At--);return dt.opt_len+=3*(At+1)+5+5+4,At})(_),H=_.opt_len+3+7>>>3,(ct=_.static_len+3+7>>>3)<=H&&(H=ct)):H=ct=ot+5,ot+4<=H&&N!==-1?O(_,N,ot,at):_.strategy===4||ct===H?(xt(_,2+(at?1:0),3),Dt(_,Rt,$)):(xt(_,4+(at?1:0),3),(function(dt,At,Nt,Bt){var Jt;for(xt(dt,At-257,5),xt(dt,Nt-1,5),xt(dt,Bt-4,4),Jt=0;Jt<Bt;Jt++)xt(dt,dt.bl_tree[2*pt[Jt]+1],3);et(dt,dt.dyn_ltree,At-1),et(dt,dt.dyn_dtree,Nt-1)})(_,_.l_desc.max_code+1,_.d_desc.max_code+1,kt+1),Dt(_,_.dyn_ltree,_.dyn_dtree)),Mt(_),at&&mt(_)},c._tr_tally=function(_,N,ot){return _.pending_buf[_.d_buf+2*_.last_lit]=N>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&N,_.pending_buf[_.l_buf+_.last_lit]=255&ot,_.last_lit++,N===0?_.dyn_ltree[2*ot]++:(_.matches++,N--,_.dyn_ltree[2*(p[ot]+x+1)]++,_.dyn_dtree[2*V(N)]++),_.last_lit===_.lit_bufsize-1},c._tr_align=function(_){xt(_,2,3),vt(_,B,Rt),(function(N){N.bi_valid===16?(Et(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)})(_)}},{"../utils/common":41}],53:[function(i,f,c){f.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,f,c){(function(u){(function(h,l){if(!h.setImmediate){var m,k,C,x,A=1,g={},E=!1,v=h.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(h);S=S&&S.setTimeout?S:h,m={}.toString.call(h.process)==="[object process]"?function(W){process.nextTick(function(){P(W)})}:(function(){if(h.postMessage&&!h.importScripts){var W=!0,K=h.onmessage;return h.onmessage=function(){W=!1},h.postMessage("","*"),h.onmessage=K,W}})()?(x="setImmediate$"+Math.random()+"$",h.addEventListener?h.addEventListener("message",B,!1):h.attachEvent("onmessage",B),function(W){h.postMessage(x+W,"*")}):h.MessageChannel?((C=new MessageChannel).port1.onmessage=function(W){P(W.data)},function(W){C.port2.postMessage(W)}):v&&"onreadystatechange"in v.createElement("script")?(k=v.documentElement,function(W){var K=v.createElement("script");K.onreadystatechange=function(){P(W),K.onreadystatechange=null,k.removeChild(K),K=null},k.appendChild(K)}):function(W){setTimeout(P,0,W)},S.setImmediate=function(W){typeof W!="function"&&(W=new Function(""+W));for(var K=new Array(arguments.length-1),nt=0;nt<K.length;nt++)K[nt]=arguments[nt+1];var X={callback:W,args:K};return g[A]=X,m(A),A++},S.clearImmediate=w}function w(W){delete g[W]}function P(W){if(E)setTimeout(P,0,W);else{var K=g[W];if(K){E=!0;try{(function(nt){var X=nt.callback,lt=nt.args;switch(lt.length){case 0:X();break;case 1:X(lt[0]);break;case 2:X(lt[0],lt[1]);break;case 3:X(lt[0],lt[1],lt[2]);break;default:X.apply(l,lt)}})(K)}finally{w(W),E=!1}}}}function B(W){W.source===h&&typeof W.data=="string"&&W.data.indexOf(x)===0&&P(+W.data.slice(x.length))}})(typeof self>"u"?u===void 0?this:u:self)}).call(this,typeof Se<"u"?Se:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Fr)),Fr.exports}var To=Po();const Qi=Gi(To);var Jn={exports:{}},$o=Jn.exports,Ui;function Io(){return Ui||(Ui=1,(function(y,o){(function(i,f){f()})($o,function(){function i(k,C){return typeof C>"u"?C={autoBom:!1}:typeof C!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),C={autoBom:!C}),C.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(k.type)?new Blob(["\uFEFF",k],{type:k.type}):k}function f(k,C,x){var A=new XMLHttpRequest;A.open("GET",k),A.responseType="blob",A.onload=function(){m(A.response,C,x)},A.onerror=function(){console.error("could not download file")},A.send()}function c(k){var C=new XMLHttpRequest;C.open("HEAD",k,!1);try{C.send()}catch{}return 200<=C.status&&299>=C.status}function u(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var C=document.createEvent("MouseEvents");C.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(C)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Se=="object"&&Se.global===Se?Se:void 0,l=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(k,C,x){var A=h.URL||h.webkitURL,g=document.createElement("a");C=C||k.name||"download",g.download=C,g.rel="noopener",typeof k=="string"?(g.href=k,g.origin===location.origin?u(g):c(g.href)?f(k,C,x):u(g,g.target="_blank")):(g.href=A.createObjectURL(k),setTimeout(function(){A.revokeObjectURL(g.href)},4e4),setTimeout(function(){u(g)},0))}:"msSaveOrOpenBlob"in navigator?function(k,C,x){if(C=C||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(i(k,x),C);else if(c(k))f(k,C,x);else{var A=document.createElement("a");A.href=k,A.target="_blank",setTimeout(function(){u(A)})}}:function(k,C,x,A){if(A=A||open("","_blank"),A&&(A.document.title=A.document.body.innerText="downloading..."),typeof k=="string")return f(k,C,x);var g=k.type==="application/octet-stream",E=/constructor/i.test(h.HTMLElement)||h.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||g&&E||l)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var B=S.result;B=v?B:B.replace(/^data:[^;]*;/,"data:attachment/file;"),A?A.location.href=B:location=B,A=null},S.readAsDataURL(k)}else{var w=h.URL||h.webkitURL,P=w.createObjectURL(k);A?A.location=P:location.href=P,A=null,setTimeout(function(){w.revokeObjectURL(P)},4e4)}});h.saveAs=m.saveAs=m,y.exports=m})})(Jn)),Jn.exports}var ta=Io();function Li(y){const o=Math.floor(y/3600),i=Math.floor(y%3600/60),f=Math.floor(y%60),c=Math.floor(y%1*1e3);return`${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")},${c.toString().padStart(3,"0")}`}function Ki(y){const o=Math.floor(y/3600),i=Math.floor(y%3600/60),f=Math.floor(y%60),c=Math.floor(y%1*1e3);return`${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}.${c.toString().padStart(3,"0")}`}function ea(y){return y.map((o,i)=>{const f=i+1,c=Li(o.start),u=Li(o.end),h=o.text;return`${f}
${c} --> ${u}
${h}
`}).join(`
`)}function na(y){const o=`WEBVTT

`,i=y.map(f=>{const c=Ki(f.start),u=Ki(f.end),h=f.text;return`${c} --> ${u}
${h}
`}).join(`
`);return o+i}function ra(y){return y.map(o=>{const i=o.start.toFixed(3),f=o.end.toFixed(3);return`[${i}s - ${f}s] ${o.text}`}).join(`
`)}function ia(y,o,i,f,c,u,h){return{id:y,title:o,duration:i,created_at:new Date(f).toISOString(),source:c,full_text:u,segments:h.map(l=>({id:l.id,text:l.text,start:l.start,end:l.end,duration:l.end-l.start}))}}async function aa(y){return y}async function zo(y){const o=await wo(y),i=await bn(y);if(!o)throw new Error("Recording not found");if(!i)throw new Error("No annotations found for this recording");const f=new Qi,c=`${o.title}-${y.slice(0,8)}`,u=f.folder(c),h=await aa(o.audioBlob);u.file(`${y}.wav`,h);const l=ia(o.id,o.title,o.duration,o.createdAt,o.source,i.fullText,i.segments);u.file(`${y}.json`,JSON.stringify(l,null,2));const m=ea(i.segments);u.file(`${y}.srt`,m);const k=na(i.segments);u.file(`${y}.vtt`,k);const C=ra(i.segments);u.file(`${y}.txt`,C);const x=await f.generateAsync({type:"blob"});ta.saveAs(x,`${c}.zip`)}async function Do(){const o=(await Ji()).filter(l=>l.isAnnotated);if(o.length===0)throw new Error("No annotated recordings to export");const i=new Qi,c=`annotations-export-${new Date().toISOString().replace(/[:.]/g,"-")}`,u=i.folder(c);for(const l of o){const m=await bn(l.id);if(!m)continue;const k=`${l.title}-${l.id.slice(0,8)}`,C=u.folder(k),x=await aa(l.audioBlob);C.file(`${l.id}.wav`,x);const A=ia(l.id,l.title,l.duration,l.createdAt,l.source,m.fullText,m.segments);C.file(`${l.id}.json`,JSON.stringify(A,null,2));const g=ea(m.segments);C.file(`${l.id}.srt`,g);const E=na(m.segments);C.file(`${l.id}.vtt`,E);const v=ra(m.segments);C.file(`${l.id}.txt`,v)}const h=await i.generateAsync({type:"blob"});ta.saveAs(h,`${c}.zip`)}class Bo{constructor(o){this.listeners=new Set,this.state=o}getState(){return this.state}subscribe(o){return this.listeners.add(o),()=>{this.listeners.delete(o)}}notify(){this.listeners.forEach(o=>o(this.state))}setState(o){this.state={...this.state,...o},this.notify()}}const oa="aidio-theme",jo=()=>{try{const y=localStorage.getItem(oa);if(y==="dark"||y==="pastel")return y}catch(y){console.warn("Failed to read theme from localStorage:",y)}return"dark"},Mo={currentTheme:jo()};class Fo extends Bo{constructor(){super(Mo)}toggleTheme(){const o=this.state.currentTheme==="dark"?"pastel":"dark";this.setTheme(o)}setTheme(o){this.setState({currentTheme:o});try{localStorage.setItem(oa,o)}catch(i){console.warn("Failed to save theme to localStorage:",i)}}getCurrentTheme(){return this.state.currentTheme}}const wn=new Fo,No=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-sun"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <circle cx="12" cy="12" r="4" />
  <path d="M12 2v2" />
  <path d="M12 20v2" />
  <path d="m4.93 4.93 1.41 1.41" />
  <path d="m17.66 17.66 1.41 1.41" />
  <path d="M2 12h2" />
  <path d="M20 12h2" />
  <path d="m6.34 17.66-1.41 1.41" />
  <path d="m19.07 4.93-1.41 1.41" />
</svg>
`,Uo=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-moon"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401" />
</svg>
`;var Lo=Object.defineProperty,Ko=Object.getOwnPropertyDescriptor,sa=(y,o,i,f)=>{for(var c=f>1?void 0:f?Ko(o,i):o,u=y.length-1,h;u>=0;u--)(h=y[u])&&(c=(f?h(o,i,c):h(c))||c);return f&&c&&Lo(o,i,c),c};let nr=class extends Be{constructor(){super(...arguments),this.currentTheme=wn.getCurrentTheme()}connectedCallback(){super.connectedCallback(),this.unsubscribe=wn.subscribe(y=>{this.currentTheme=y.currentTheme})}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe?.()}handleToggle(){wn.toggleTheme()}render(){const y=this.currentTheme==="dark"?No:Uo,o=this.currentTheme==="dark"?"Switch to Pastel Theme":"Switch to Dark Theme";return ne`
      <button
        class="theme-toggle-btn"
        @click=${this.handleToggle}
        title=${o}
        aria-label=${o}
      >
        <span class="theme-icon">${oe(y)}</span>
      </button>
    `}};nr.styles=rr`
    :host {
      display: inline-flex;
    }

    .theme-toggle-btn {
      width: clamp(40px, 6vw, 48px);
      height: clamp(40px, 6vw, 48px);
      border-radius: var(--radius-md);
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      color: var(--text-primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(1.125rem, 2vw, 1.25rem);
      transition: all var(--duration-normal) var(--ease-out);
      box-shadow: var(--shadow-sm);
    }

    .theme-toggle-btn:hover {
      border-color: var(--accent-coral);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .theme-toggle-btn:active {
      transform: translateY(0);
      box-shadow: var(--shadow-xs);
    }

    .theme-icon {
      width: clamp(20px, 3vw, 24px);
      height: clamp(20px, 3vw, 24px);
      transition: transform var(--duration-normal) var(--ease-out);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .theme-icon svg {
      width: 100%;
      height: 100%;
      stroke: currentColor;
      fill: none;
    }

    .theme-toggle-btn:hover .theme-icon {
      transform: rotate(20deg);
    }
  `;sa([le()],nr.prototype,"currentTheme",2);nr=sa([or("theme-toggle")],nr);const ua=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-play"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z" />
</svg>
`,qo=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-pause"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect x="14" y="3" width="5" height="18" rx="1" />
  <rect x="5" y="3" width="5" height="18" rx="1" />
</svg>
`,Wo=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-repeat"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="m17 2 4 4-4 4" />
  <path d="M3 11v-1a4 4 0 0 1 4-4h14" />
  <path d="m7 22-4-4 4-4" />
  <path d="M21 13v1a4 4 0 0 1-4 4H3" />
</svg>
`,Ho=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-save"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" />
  <path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7" />
  <path d="M7 3v4a1 1 0 0 0 1 1h7" />
</svg>
`,Zo=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-check"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M20 6 9 17l-5-5" />
</svg>
`;var Vo=Object.defineProperty,Yo=Object.getOwnPropertyDescriptor,ve=(y,o,i,f)=>{for(var c=f>1?void 0:f?Yo(o,i):o,u=y.length-1,h;u>=0;u--)(h=y[u])&&(c=(f?h(o,i,c):h(c))||c);return f&&c&&Vo(o,i,c),c};class Go{constructor(){this.status="idle",this.playhead=0,this.loop=!1,this.segment={start:0,end:3},this.duration=0,this.ctx=null,this.source=null,this.rafId=null,this.buffer=null}async load(o){this.dispose(),this.ctx=new AudioContext;const i=await this.ctx.decodeAudioData(await o.arrayBuffer());this.buffer=i,this.duration=i.duration,this.segment={start:0,end:Math.min(3,i.duration)},this.playhead=this.segment.start,this.onUpdate?.()}async play(){if(!this.ctx||!this.buffer)return;await this.ctx.resume(),this.stop(!1),this.source=this.ctx.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.ctx.destination);const{start:o,end:i}=this.segment,f=Math.max(.01,i-o),c=this.ctx.currentTime;this.source.start(0,o,f),this.status="playing",this.playhead=o,this.onUpdate?.(),this.trackPlayhead(c,o,f),this.source.onended=()=>{this.loop?this.play():(this.stop(!1),this.playhead=this.segment.end,this.onUpdate?.())}}pause(){this.stop()}setSegment(o,i){this.segment={start:o,end:i},this.playhead=o,this.onUpdate?.()}setLoop(o){this.loop=o,this.onUpdate?.(),o&&this.status==="playing"&&this.play()}reset(){this.stop(),this.loop=!1,this.segment={start:0,end:Math.min(3,this.duration)},this.playhead=this.segment.start,this.onUpdate?.()}dispose(){this.stop(),this.ctx&&(this.ctx.close(),this.ctx=null),this.buffer=null,this.duration=0}stop(o=!0){if(this.source){this.source.onended=null;try{this.source.stop()}catch{}this.source.disconnect(),this.source=null}this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=null,this.status="idle",o&&(this.playhead=this.segment.start),this.onUpdate?.()}trackPlayhead(o,i,f){if(!this.ctx)return;const c=this.ctx,u=()=>{if(this.ctx!==c||this.status!=="playing")return;const h=this.ctx.currentTime-o;this.playhead=Math.min(i+h,i+f),this.onUpdate?.(),this.rafId=requestAnimationFrame(u)};this.rafId=requestAnimationFrame(u)}}let ce=class extends Be{constructor(){super(...arguments),this.audioBlob=null,this.recordingId="",this.duration=0,this.leftClamp=0,this.rightClamp=3,this.text="",this.isPlaying=!1,this.loop=!1,this.showConfirmReset=!1,this.playhead=0,this.peaks=[],this.controller=null,this.dragging=null,this.handleClampPointerDown=y=>{if(!this.duration)return;const o=this.canvas.getBoundingClientRect(),i=y.clientX-o.left,f=8,c=this.leftClamp/this.duration*o.width,u=this.rightClamp/this.duration*o.width;Math.abs(i-c)<f?this.dragging="left":Math.abs(i-u)<f?this.dragging="right":this.dragging=null,this.dragging&&(y.preventDefault(),window.addEventListener("pointermove",this.handleClampPointerMove,{passive:!0}),window.addEventListener("pointerup",this.handleClampPointerUp,{once:!0}),window.addEventListener("pointercancel",this.handleClampPointerCancel,{once:!0}))},this.handleClampPointerMove=y=>{this.dragging&&this.handleClampDrag(y,this.dragging)},this.handleClampPointerUp=()=>{window.removeEventListener("pointermove",this.handleClampPointerMove),window.removeEventListener("pointercancel",this.handleClampPointerCancel),this.dragging=null},this.handleClampPointerCancel=()=>{window.removeEventListener("pointermove",this.handleClampPointerMove),this.dragging=null},this.drawQueued=!1}async firstUpdated(){this.audioBlob&&await this.loadAudio()}disconnectedCallback(){super.disconnectedCallback(),this.controller?.dispose(),this.controller=null}async loadAudio(){this.controller?.dispose(),this.controller=new Go,this.controller.onUpdate=()=>{this.syncFromController(),this.requestUpdate()},await this.controller.load(this.audioBlob),this.syncFromController();const y=this.controller.buffer;if(y){const o=y.getChannelData(0),i=1e3,f=Math.floor(o.length/i);this.peaks=new Array(i).fill(0);for(let c=0;c<i;c++){let u=0;const h=c*f;for(let l=0;l<f&&h+l<o.length;l++){const m=Math.abs(o[h+l]);m>u&&(u=m)}this.peaks[c]=u}}}syncFromController(){this.controller&&(this.duration=this.controller.duration,this.leftClamp=this.controller.segment.start,this.rightClamp=this.controller.segment.end,this.playhead=this.controller.playhead,this.isPlaying=this.controller.status==="playing",this.loop=this.controller.loop)}async handlePlayPause(){this.controller&&(this.isPlaying?this.controller.pause():await this.controller.play(),this.syncFromController())}handleLoopToggle(){this.controller&&(this.controller.setLoop(!this.loop),this.syncFromController())}handleClampDrag(y,o){if(!this.duration)return;const i=this.canvas.getBoundingClientRect(),f=y.clientX-i.left,c=Math.max(0,Math.min(this.duration,f/i.width*this.duration));let u=this.leftClamp,h=this.rightClamp;o==="left"?u=Math.min(c,h-.05):h=Math.max(c,u+.05),this.controller?(this.controller.setSegment(u,h),this.syncFromController()):(this.leftClamp=u,this.rightClamp=h,this.playhead=u)}handleSave(){const y={id:crypto.randomUUID(),start:this.leftClamp,end:this.rightClamp,text:this.text.trim()};this.dispatchEvent(new CustomEvent("progress-saved",{detail:{segments:[y]},bubbles:!0,composed:!0}))}handleComplete(){const y={id:crypto.randomUUID(),start:this.leftClamp,end:this.rightClamp,text:this.text.trim()};this.dispatchEvent(new CustomEvent("annotation-complete",{detail:{segments:[y]},bubbles:!0,composed:!0}))}startOver(){this.showConfirmReset=!0}confirmReset(){this.showConfirmReset=!1,this.controller?(this.controller.reset(),this.text="",this.syncFromController()):(this.leftClamp=0,this.rightClamp=Math.min(3,this.duration),this.playhead=this.leftClamp,this.text="")}cancelReset(){this.showConfirmReset=!1}updated(){this.scheduleDraw()}scheduleDraw(){this.drawQueued||(this.drawQueued=!0,requestAnimationFrame(()=>{this.drawQueued=!1,this.drawWaveform()}))}drawWaveform(){if(!this.canvas||!this.peaks.length)return;const y=this.canvas.getContext("2d");if(!y)return;const o=this.canvas.getBoundingClientRect(),i=window.devicePixelRatio||1;this.canvas.width=o.width*i,this.canvas.height=o.height*i,y.scale(i,i);const f=o.width,c=o.height;y.clearRect(0,0,f,c),y.fillStyle="#161b22",y.fillRect(0,0,f,c),y.strokeStyle="#f6d86b",y.lineWidth=1,y.beginPath();const u=this.peaks.length,h=c/2;for(let l=0;l<u;l++){const m=l/u*f,k=this.peaks[l]*(c/2)*.9;y.moveTo(m,h-k),y.lineTo(m,h+k)}y.stroke()}formatTime(y){return y.toFixed(2)+"s"}render(){const y=this.duration?this.leftClamp/this.duration*100:0,o=this.duration?this.rightClamp/this.duration*100:0,i=this.duration?this.playhead/this.duration*100:0;return ne`
      <div class="page">
        <div class="header">
          <div class="title">Audio-Text Alignment</div>
          <div class="stats">
            <span>Segment: ${this.formatTime(this.leftClamp)} â ${this.formatTime(this.rightClamp)}</span>
            <span>Length: ${this.formatTime(this.rightClamp-this.leftClamp)}</span>
            <span>Duration: ${this.formatTime(this.duration)}</span>
          </div>
        </div>

        <div class="visual">
          <div class="wave-wrap"
            @pointerdown=${this.handleClampPointerDown}
          >
            <canvas></canvas>
            <div class="marker left" style="left:${y}%"></div>
            <div class="marker right" style="left:${o}%"></div>
            <div class="marker-label" style="left:${y}%">${this.formatTime(this.leftClamp)}</div>
            <div class="marker-label" style="left:${o}%">${this.formatTime(this.rightClamp)}</div>
            <div class="playhead-line" style="left:${i}%"></div>
          </div>
          <div class="controls">
            <button class="btn" @click=${this.handlePlayPause}>
              ${oe(this.isPlaying?qo:ua)}
              <span>${this.isPlaying?"Pause":"Play"}</span>
            </button>
            <button class="btn" @click=${this.handleLoopToggle} ?aria-pressed=${this.loop}>
              ${oe(Wo)}
              <span>Loop ${this.loop?"On":"Off"}</span>
            </button>
            <button class="btn" @click=${this.startOver}>Start Over</button>
          </div>
        </div>

        <div class="visual" style="display:flex; flex-direction:column; gap: var(--spacing-2);">
          <div class="title" style="font-size: var(--text-base);">Segment Text</div>
          <textarea
            .value=${this.text}
            @input=${f=>this.text=f.target.value}
            placeholder="Type the transcript for this segment..."
          ></textarea>
        </div>

        <div class="footer">
          <div>${this.formatTime(this.rightClamp-this.leftClamp)} segment</div>
          <div style="display:flex; gap: var(--spacing-2);">
            <button class="btn" @click=${this.handleSave}>
              ${oe(Ho)}
              <span>Save Progress</span>
            </button>
            <button class="btn primary" @click=${this.handleComplete} ?disabled=${!this.text.trim()}>
              ${oe(Zo)}
              <span>Confirm & Next</span>
            </button>
          </div>
        </div>

        ${this.showConfirmReset?ne`
          <div class="overlay">
            <div class="modal">
              <div style="font-size: var(--text-lg); font-weight: var(--font-bold); margin-bottom: var(--spacing-2);">
                Start over?
              </div>
              <div style="font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--spacing-3);">
                This will stop playback, turn off loop, clear the text, and reset clamps.
              </div>
              <div style="display:flex; gap: var(--spacing-2); justify-content: flex-end;">
                <button class="btn" @click=${this.cancelReset}>Cancel</button>
                <button class="btn primary" @click=${this.confirmReset}>Confirm</button>
              </div>
            </div>
          </div>
        `:null}
      </div>
    `}};ce.styles=rr`
    :host {
      display: block;
      height: 100%;
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: var(--font-ui);
    }

    .page {
      height: 100%;
      display: grid;
      grid-template-rows: auto auto 1fr auto;
      gap: var(--spacing-3);
      padding: var(--spacing-4);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: var(--spacing-3) var(--spacing-4);
    }

    .title {
      font-size: var(--text-xl);
      font-weight: var(--font-bold);
    }

    .stats {
      display: flex;
      gap: var(--spacing-3);
      font-family: var(--font-data);
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }

    .visual {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: var(--spacing-3);
    }

    .wave-wrap {
      position: relative;
      height: 160px;
      background: var(--bg-surface);
      border-radius: var(--radius-md);
      overflow: hidden;
      cursor: crosshair;
    }

    canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    .marker {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 3px;
      pointer-events: none;
    }

    .marker.left {
      background: #39ff14;
    }

    .marker.right {
      background: var(--accent-coral);
    }

    .marker-label {
      position: absolute;
      top: 4px;
      padding: 4px 6px;
      background: rgba(0, 0, 0, 0.6);
      color: #fff;
      border-radius: 4px;
      font-size: 12px;
      pointer-events: none;
      transform: translateX(-50%);
      white-space: nowrap;
    }

    .playhead-line {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #ff6b6b;
      pointer-events: none;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-2);
      margin-top: var(--spacing-3);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-2);
      padding: var(--spacing-2) var(--spacing-3);
      border-radius: var(--radius-md);
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      color: var(--text-primary);
      cursor: pointer;
      font-size: var(--text-sm);
      font-weight: var(--font-semibold);
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .btn.primary {
      background: var(--color-signal-active);
      border-color: var(--color-signal-active);
      color: #0a0a0a;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    textarea {
      width: 100%;
      height: 100%;
      min-height: 220px;
      padding: var(--spacing-3);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      background: var(--bg-surface);
      color: var(--text-primary);
      font-family: var(--font-ui);
      font-size: var(--text-base);
      resize: vertical;
      transition: border-color 120ms ease;
    }

    textarea:focus {
      outline: none;
      border-color: var(--color-signal-active);
    }

    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: var(--spacing-3) var(--spacing-4);
    }

    .overlay {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
    }

    .modal {
      background: var(--bg-surface);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: var(--spacing-4);
      min-width: 320px;
      box-shadow: var(--shadow-xl);
    }
  `;ve([sr({type:Object})],ce.prototype,"audioBlob",2);ve([sr({type:String})],ce.prototype,"recordingId",2);ve([le()],ce.prototype,"duration",2);ve([le()],ce.prototype,"leftClamp",2);ve([le()],ce.prototype,"rightClamp",2);ve([le()],ce.prototype,"text",2);ve([le()],ce.prototype,"isPlaying",2);ve([le()],ce.prototype,"loop",2);ve([le()],ce.prototype,"showConfirmReset",2);ve([le()],ce.prototype,"playhead",2);ve([oo("canvas")],ce.prototype,"canvas",2);ce=ve([or("annotation-workflow")],ce);const Xo=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-x"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M18 6 6 18" />
  <path d="m6 6 12 12" />
</svg>
`,Jo=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-rotate-ccw"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
  <path d="M3 3v5h5" />
</svg>
`;var Qo=Object.defineProperty,ts=Object.getOwnPropertyDescriptor,Vr=(y,o,i,f)=>{for(var c=f>1?void 0:f?ts(o,i):o,u=y.length-1,h;u>=0;u--)(h=y[u])&&(c=(f?h(o,i,c):h(c))||c);return f&&c&&Qo(o,i,c),c};let Sn=class extends Be{constructor(){super(...arguments),this.recording=null,this.existingAnnotation=null}async connectedCallback(){super.connectedCallback(),this.recording?.isAnnotated&&(this.existingAnnotation=await bn(this.recording.id)||null)}handleClose(){this.dispatchEvent(new CustomEvent("close",{bubbles:!0,composed:!0}))}async handleStartOver(){!this.recording||!confirm("Are you sure you want to start over? This will delete all current annotations.")||(await ko(this.recording.id),this.existingAnnotation=null,this.requestUpdate(),this.dispatchEvent(new CustomEvent("annotation-reset",{detail:{recordingId:this.recording.id},bubbles:!0,composed:!0})))}async handleAnnotationComplete(y){if(!this.recording)return;const{annotations:o,fullText:i}=y.detail,f={recordingId:this.recording.id,fullText:i,segments:o,completedAt:Date.now(),updatedAt:Date.now()};await Mr(f),this.dispatchEvent(new CustomEvent("annotation-saved",{detail:{recordingId:this.recording.id},bubbles:!0,composed:!0})),this.handleClose()}async handleAnnotationSaved(y){if(!this.recording)return;const{allAnnotations:o}=y.detail,i=await bn(this.recording.id);i&&(i.segments=o,i.updatedAt=Date.now(),await Mr(i))}async handleProgressSaved(y){if(!this.recording)return;const{annotations:o}=y.detail;let i=await bn(this.recording.id);i?(i.segments=o,i.updatedAt=Date.now()):i={recordingId:this.recording.id,fullText:"",segments:o,completedAt:0,updatedAt:Date.now()},await Mr(i)}render(){return this.recording?ne`
      <div class="modal-header">
        <div class="title-section">
          <div class="modal-title">Annotating: ${this.recording.title}</div>
          <div class="subtitle">
            Duration: ${this.recording.duration.toFixed(2)}s |
            Source: ${this.recording.source}
          </div>
        </div>

        <div class="header-actions">
          ${this.existingAnnotation?ne`
                <button
                  class="header-btn danger"
                  @click=${this.handleStartOver}
                  title="Delete all annotations and start over"
                >
                  ${oe(Jo)}
                  <span>Start Over</span>
                </button>
              `:null}

          <button
            class="header-btn"
            @click=${this.handleClose}
            title="Close without saving"
          >
            ${oe(Xo)}
            <span>Close</span>
          </button>
        </div>
      </div>

      <div class="modal-content">
        <annotation-workflow
          .audioBlob=${this.recording.audioBlob}
          .recordingId=${this.recording.id}
          @annotation-complete=${this.handleAnnotationComplete}
          @annotation-saved=${this.handleAnnotationSaved}
          @progress-saved=${this.handleProgressSaved}
        ></annotation-workflow>
      </div>
    `:ne`<div>No recording selected</div>`}};Sn.styles=rr`
    :host {
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1000;
      background: var(--bg-primary);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-4);
      background: var(--glass-bg);
      backdrop-filter: blur(var(--glass-blur));
      border-bottom: 1px solid var(--glass-border);
    }

    .title-section {
      flex: 1;
    }

    .modal-title {
      font-family: var(--font-ui);
      font-size: var(--text-xl);
      font-weight: var(--font-bold);
      color: var(--text-primary);
      margin-bottom: var(--spacing-1);
    }

    .subtitle {
      font-family: var(--font-data);
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }

    .header-actions {
      display: flex;
      gap: var(--spacing-2);
    }

    .header-btn {
      padding: var(--spacing-2) var(--spacing-3);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      cursor: pointer;
      font-family: var(--font-ui);
      font-size: var(--text-sm);
      font-weight: var(--font-semibold);
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      transition: all var(--duration-fast) var(--ease-out);
    }

    .header-btn:hover {
      border-color: var(--accent-coral);
      transform: translateY(-1px);
    }

    .header-btn svg {
      width: 16px;
      height: 16px;
      stroke: currentColor;
      fill: none;
    }

    .header-btn.danger:hover {
      background: rgba(255, 107, 107, 0.1);
      border-color: var(--accent-coral);
    }

    .modal-content {
      height: calc(100vh - 80px);
      overflow-y: auto;
    }

    annotation-workflow {
      height: 100%;
    }
  `;Vr([sr({type:Object})],Sn.prototype,"recording",2);Vr([le()],Sn.prototype,"existingAnnotation",2);Sn=Vr([or("annotation-modal")],Sn);const es=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-circle"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <circle cx="12" cy="12" r="10" />
</svg>
`,ns=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-square"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect width="18" height="18" x="3" y="3" rx="2" />
</svg>
`,rs=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-upload"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 3v12" />
  <path d="m17 8-5-5-5 5" />
  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
</svg>
`,is=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-edit"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
  <path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z" />
</svg>
`,as=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-trash-2"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M10 11v6" />
  <path d="M14 11v6" />
  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
  <path d="M3 6h18" />
  <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
</svg>
`,qi=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-download"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 15V3" />
  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
  <path d="m7 10 5 5 5-5" />
</svg>
`,os=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-check-circle"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M21.801 10A10 10 0 1 1 17 3.335" />
  <path d="m9 11 3 3L22 4" />
</svg>
`,ss=`<!-- @license lucide-static v0.554.0 - ISC -->
<svg
  class="lucide lucide-mic"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 19v3" />
  <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
  <rect x="9" y="2" width="6" height="13" rx="3" />
</svg>
`;var us=Object.defineProperty,ls=Object.getOwnPropertyDescriptor,sn=(y,o,i,f)=>{for(var c=f>1?void 0:f?ls(o,i):o,u=y.length-1,h;u>=0;u--)(h=y[u])&&(c=(f?h(o,i,c):h(c))||c);return f&&c&&us(o,i,c),c};let je=class extends Be{constructor(){super(...arguments),this.recordings=[],this.isRecording=!1,this.recordingDuration=0,this.selectedRecording=null,this.isModalOpen=!1,this.microphoneService=null,this.mediaRecorderService=null,this.recordingTimer=null}async connectedCallback(){super.connectedCallback(),await this.loadRecordings()}disconnectedCallback(){super.disconnectedCallback(),this.cleanup()}async loadRecordings(){this.recordings=await Ji()}async startRecording(){try{this.microphoneService=new co;const y=await this.microphoneService.requestPermission();this.mediaRecorderService=new ho,await this.mediaRecorderService.initialize(y),this.mediaRecorderService.onStateChange(o=>{o==="recording"&&!this.recordingTimer&&(this.isRecording=!0,this.recordingTimer=window.setInterval(()=>{this.recordingDuration+=.25;const i=this.shadowRoot?.querySelector(".duration");i&&(i.textContent=this.formatDuration(this.recordingDuration))},250))}),this.recordingDuration=0,this.mediaRecorderService.start()}catch(y){console.error("Failed to start recording:",y),alert("Failed to start recording. Please check microphone permissions."),this.cleanup()}}async stopRecording(){if(this.mediaRecorderService)try{const y=await this.mediaRecorderService.stop(),o=this.recordingDuration,f=`Untitled ${await So()}`;await Xi({title:f,audioBlob:y,duration:o,source:"recording"}),await this.loadRecordings()}catch(y){console.error("Failed to save recording:",y),alert("Failed to save recording.")}finally{this.cleanup()}}cleanup(){this.isRecording=!1,this.recordingDuration=0,this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null),this.microphoneService?.release(),this.mediaRecorderService=null,this.microphoneService=null}async handleUpload(){const y=await Ro();if(!(!y||y.length===0))try{await Oo(y),await this.loadRecordings()}catch(o){console.error("Failed to upload files:",o),alert("Failed to upload files.")}}async handleTitleChange(y,o){await _o(y.id,{title:o}),await this.loadRecordings()}async handlePlay(y){new Audio(URL.createObjectURL(y.audioBlob)).play()}handleAnnotate(y){this.selectedRecording=y,this.isModalOpen=!0}async handleExport(y){try{await zo(y.id)}catch(o){console.error("Failed to export recording:",o),alert(o instanceof Error?o.message:"Failed to export recording.")}}async handleDelete(y){confirm(`Are you sure you want to delete "${y.title}"? This cannot be undone.`)&&(await xo(y.id),await this.loadRecordings())}async handleExportAll(){try{await Do()}catch(y){console.error("Failed to export all recordings:",y),alert(y instanceof Error?y.message:"Failed to export recordings.")}}handleModalClose(){this.isModalOpen=!1,this.selectedRecording=null,this.loadRecordings()}formatDuration(y){const o=Math.floor(y/60),i=Math.floor(y%60);return`${o}:${i.toString().padStart(2,"0")}`}render(){return ne`
      <div class="container">
        <!-- Header -->
        <div class="header">
          <div class="logo-container">
            <div class="logo">
              <div class="freq-bar"></div>
              <div class="freq-bar"></div>
              <div class="freq-bar"></div>
              <div class="freq-bar"></div>
              <div class="freq-bar"></div>
            </div>
            <h1 class="title"><span class="ai">AI</span>dio</h1>
          </div>
          <theme-toggle></theme-toggle>
        </div>

        <!-- Hero Recording Section -->
        <div class="recording-section">
          ${this.isRecording?null:ne`
                <div class="hero-text">
                  <div class="hero-title">Build Better Voice AI</div>
                  <div class="hero-subtitle">
                    Record, annotate, and export high-quality audio training data
                  </div>
                </div>
              `}

          <div class="action-buttons">
            <button
              class="record-btn ${this.isRecording?"recording":""}"
              @click=${this.isRecording?this.stopRecording:this.startRecording}
              ?disabled=${this.isRecording&&this.recordingDuration<.5}
            >
              ${oe(this.isRecording?ns:es)}
              <span>${this.isRecording?"Stop Recording":"Record Audio"}</span>
            </button>

            ${this.isRecording?ne`<div class="duration">${this.formatDuration(this.recordingDuration)}</div>`:ne`
                  <button class="upload-btn" @click=${this.handleUpload}>
                    ${oe(rs)}
                    <span>Upload Files</span>
                  </button>
                `}
          </div>
        </div>

        <!-- Recordings Table -->
        <div class="recordings-header">
          <h2 class="section-title">Recordings (${this.recordings.length})</h2>
          ${this.recordings.some(y=>y.isAnnotated)?ne`
                <button class="export-all-btn" @click=${this.handleExportAll}>
                  ${oe(qi)}
                  <span>Export All</span>
                </button>
              `:null}
        </div>

        <div class="recordings-table">
          ${this.recordings.length===0?ne`
                <div class="empty-state">
                  <div class="empty-icon">${oe(ss)}</div>
                  <div class="empty-title">No recordings yet</div>
                  <div class="empty-description">
                    Start recording or upload audio files to begin annotating your voice data
                  </div>
                </div>
              `:ne`
                <table>
                  <thead>
                    <tr>
                      <th style="width: 40px;"></th>
                      <th>Title</th>
                      <th style="width: 100px;">Duration</th>
                      <th style="width: 100px;">Source</th>
                      <th style="width: 300px;">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${this.recordings.map(y=>ne`
                        <tr>
                          <td>
                            ${y.isAnnotated?ne`${oe(os)}`:""}
                          </td>
                          <td>
                            <div class="title-cell">
                              <input
                                class="title-input"
                                type="text"
                                .value=${y.title}
                                @change=${o=>this.handleTitleChange(y,o.target.value)}
                                placeholder="Enter title..."
                              />
                            </div>
                          </td>
                          <td>
                            <span class="duration-badge">
                              ${this.formatDuration(y.duration)}
                            </span>
                          </td>
                          <td>
                            <span class="duration-badge">
                              ${y.source==="recording"?"Recorded":"Uploaded"}
                            </span>
                          </td>
                          <td>
                            <div class="actions">
                              <button
                                class="action-btn"
                                @click=${()=>this.handlePlay(y)}
                                title="Play audio"
                              >
                                ${oe(ua)}
                                <span>Play</span>
                              </button>

                              <button
                                class="action-btn"
                                @click=${()=>this.handleAnnotate(y)}
                                title="Annotate audio"
                              >
                                ${oe(is)}
                                <span>Annotate</span>
                              </button>

                              ${y.isAnnotated?ne`
                                    <button
                                      class="action-btn"
                                      @click=${()=>this.handleExport(y)}
                                      title="Export annotation"
                                    >
                                      ${oe(qi)}
                                      <span>Export</span>
                                    </button>
                                  `:null}

                              <button
                                class="action-btn danger"
                                @click=${()=>this.handleDelete(y)}
                                title="Delete recording"
                              >
                                ${oe(as)}
                                <span>Delete</span>
                              </button>
                            </div>
                          </td>
                        </tr>
                      `)}
                  </tbody>
                </table>
              `}
        </div>
      </div>

      <!-- Annotation Modal -->
      ${this.isModalOpen&&this.selectedRecording?ne`
            <annotation-modal
              .recording=${this.selectedRecording}
              @close=${this.handleModalClose}
              @annotation-saved=${this.handleModalClose}
            ></annotation-modal>
          `:null}
    `}};je.styles=rr`
    :host {
      display: block;
      min-height: 100vh;
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
      position: relative;
      overflow-x: hidden;
    }

    /* Animated background pattern */
    :host::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image:
        radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 107, 107, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(57, 255, 20, 0.05) 0%, transparent 50%);
      animation: float 20s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(30px, -30px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: var(--spacing-6) var(--spacing-4);
      position: relative;
      z-index: 1;
    }

    /* Header with Logo */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-12);
      padding: var(--spacing-4) 0;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
    }

    .logo {
      display: flex;
      align-items: flex-end;
      gap: 2px;
      height: 40px;
    }

    .freq-bar {
      width: 4px;
      background: linear-gradient(180deg, #39ff14 0%, #7877c6 100%);
      border-radius: 2px;
      animation: pulse-bar 2s ease-in-out infinite;
      box-shadow: 0 0 10px rgba(57, 255, 20, 0.5);
    }

    .freq-bar:nth-child(1) { height: 60%; animation-delay: 0s; }
    .freq-bar:nth-child(2) { height: 100%; animation-delay: 0.1s; }
    .freq-bar:nth-child(3) { height: 75%; animation-delay: 0.2s; }
    .freq-bar:nth-child(4) { height: 90%; animation-delay: 0.3s; }
    .freq-bar:nth-child(5) { height: 65%; animation-delay: 0.4s; }

    @keyframes pulse-bar {
      0%, 100% { opacity: 0.6; transform: scaleY(1); }
      50% { opacity: 1; transform: scaleY(0.8); }
    }

    .title {
      font-family: 'Outfit', var(--font-ui);
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, #39ff14 0%, #7877c6 50%, #ff6b6b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.02em;
      text-transform: lowercase;
    }

    .title .ai {
      font-weight: 900;
    }

    .tagline {
      font-family: var(--font-data);
      font-size: var(--text-sm);
      color: rgba(255, 255, 255, 0.5);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-top: var(--spacing-1);
    }

    /* Recording Section - Hero Style */
    .recording-section {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-6);
      align-items: center;
      justify-content: center;
      padding: var(--spacing-16) var(--spacing-8);
      margin-bottom: var(--spacing-12);
      background: rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(40px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: var(--radius-lg);
      position: relative;
      overflow: hidden;
    }

    .recording-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(57, 255, 20, 0.5), transparent);
    }

    .hero-text {
      text-align: center;
      margin-bottom: var(--spacing-4);
    }

    .hero-title {
      font-family: 'Outfit', var(--font-ui);
      font-size: 3rem;
      font-weight: 800;
      color: white;
      margin-bottom: var(--spacing-2);
      letter-spacing: -0.03em;
    }

    .hero-subtitle {
      font-family: var(--font-ui);
      font-size: var(--text-lg);
      color: rgba(255, 255, 255, 0.6);
      font-weight: 400;
    }

    .action-buttons {
      display: flex;
      gap: var(--spacing-4);
      align-items: center;
    }

    .record-btn,
    .upload-btn {
      padding: var(--spacing-5) var(--spacing-8);
      border-radius: 100px;
      border: none;
      font-family: 'Outfit', var(--font-ui);
      font-size: var(--text-lg);
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .record-btn {
      background: linear-gradient(135deg, #39ff14 0%, #00cc88 100%);
      color: #0a0a0f;
      box-shadow: 0 10px 40px rgba(57, 255, 20, 0.3), 0 0 0 0 rgba(57, 255, 20, 0.5);
    }

    .record-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #00cc88 0%, #39ff14 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .record-btn:hover::before {
      opacity: 1;
    }

    .record-btn:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 15px 60px rgba(57, 255, 20, 0.4), 0 0 0 8px rgba(57, 255, 20, 0.1);
    }

    .record-btn.recording {
      background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 10px 40px rgba(255, 107, 107, 0.4), 0 0 0 0 rgba(255, 107, 107, 0.6);
      }
      50% {
        box-shadow: 0 15px 60px rgba(255, 107, 107, 0.6), 0 0 0 12px rgba(255, 107, 107, 0.2);
      }
    }

    .upload-btn {
      background: rgba(255, 255, 255, 0.05);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .upload-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 10px 40px rgba(255, 255, 255, 0.1);
    }

    .btn-icon {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      fill: currentColor;
    }

    .duration {
      font-family: var(--font-data);
      font-size: var(--text-2xl);
      color: var(--text-secondary);
      font-variant-numeric: tabular-nums;
    }

    /* Recordings Table */
    .recordings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-4);
    }

    .section-title {
      font-family: var(--font-ui);
      font-size: var(--text-xl);
      font-weight: var(--font-bold);
      color: var(--text-primary);
    }

    .export-all-btn {
      padding: var(--spacing-2) var(--spacing-4);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      cursor: pointer;
      font-family: var(--font-ui);
      font-size: var(--text-sm);
      font-weight: var(--font-semibold);
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      transition: all var(--duration-fast) var(--ease-out);
    }

    .export-all-btn:hover {
      border-color: var(--accent-coral);
      transform: translateY(-1px);
    }

    .recordings-table {
      width: 100%;
      background: var(--glass-bg);
      backdrop-filter: blur(var(--glass-blur));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: rgba(255, 255, 255, 0.02);
    }

    th {
      padding: var(--spacing-3) var(--spacing-4);
      text-align: left;
      font-family: var(--font-ui);
      font-size: var(--text-sm);
      font-weight: var(--font-semibold);
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-bottom: 1px solid var(--glass-border);
    }

    td {
      padding: var(--spacing-3) var(--spacing-4);
      font-family: var(--font-ui);
      font-size: var(--text-base);
      color: var(--text-primary);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    tr:last-child td {
      border-bottom: none;
    }

    tbody tr {
      transition: background var(--duration-fast) var(--ease-out);
    }

    tbody tr:hover {
      background: rgba(255, 255, 255, 0.02);
    }

    .title-cell {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
    }

    .title-input {
      flex: 1;
      padding: var(--spacing-1) var(--spacing-2);
      background: transparent;
      border: 1px solid transparent;
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-family: var(--font-ui);
      font-size: var(--text-base);
      transition: all var(--duration-fast) var(--ease-out);
    }

    .title-input:hover {
      border-color: var(--glass-border);
    }

    .title-input:focus {
      outline: none;
      border-color: var(--accent-coral);
      background: rgba(255, 255, 255, 0.05);
    }

    .status-icon {
      width: 20px;
      height: 20px;
      stroke: #39ff14;
      fill: none;
    }

    .duration-badge {
      font-family: var(--font-data);
      font-size: var(--text-sm);
      color: var(--text-secondary);
      font-variant-numeric: tabular-nums;
    }

    .actions {
      display: flex;
      gap: var(--spacing-2);
    }

    .action-btn {
      padding: var(--spacing-1) var(--spacing-2);
      background: transparent;
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: var(--spacing-1);
      font-family: var(--font-ui);
      font-size: var(--text-xs);
      font-weight: var(--font-semibold);
      transition: all var(--duration-fast) var(--ease-out);
    }

    .action-btn:hover {
      border-color: var(--accent-coral);
      transform: translateY(-1px);
    }

    .action-btn svg {
      width: 14px;
      height: 14px;
      stroke: currentColor;
      fill: none;
    }

    .action-btn.danger:hover {
      background: rgba(255, 107, 107, 0.1);
      border-color: var(--accent-coral);
    }

    .empty-state {
      padding: var(--spacing-16) var(--spacing-8);
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-4);
    }

    .empty-icon {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(57, 255, 20, 0.1), rgba(120, 119, 198, 0.1));
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: var(--spacing-4);
    }

    .empty-icon svg {
      width: 40px;
      height: 40px;
      stroke: rgba(57, 255, 20, 0.6);
      fill: none;
    }

    .empty-title {
      font-family: 'Outfit', var(--font-ui);
      font-size: var(--text-xl);
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: var(--spacing-2);
    }

    .empty-description {
      font-family: var(--font-ui);
      font-size: var(--text-base);
      color: rgba(255, 255, 255, 0.4);
      max-width: 400px;
    }
  `;sn([le()],je.prototype,"recordings",2);sn([le()],je.prototype,"isRecording",2);sn([le()],je.prototype,"recordingDuration",2);sn([le()],je.prototype,"selectedRecording",2);sn([le()],je.prototype,"isModalOpen",2);je=sn([or("minimal-recorder")],je);const la=y=>{document.body.setAttribute("data-theme",y)};la(wn.getCurrentTheme());wn.subscribe(y=>{la(y.currentTheme)});
